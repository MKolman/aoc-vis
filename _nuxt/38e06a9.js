/*! For license information please see LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{249:function(t,o,n){"use strict";var e,r,l;l=function(t){var o=t?t._modules:{};function n(t,path,o,n){t.hasOwnProperty(path)||(t[path]=n.apply(null,o))}n(o,"Extensions/Annotations/Mixins/EventEmitterMixin.js",[o["Core/Globals.js"],o["Core/Utilities.js"]],(function(t,o){var n=o.addEvent,e=o.fireEvent,r=o.objectEach,l=o.pick,h=o.removeEvent;return{addEvents:function(){var o=this,l=function(element){n(element,t.isTouchDevice?"touchstart":"mousedown",(function(t){o.onMouseDown(t)}),{passive:!1})};if(l(this.graphic.element),(o.labels||[]).forEach((function(label){label.options.useHTML&&label.graphic.text&&l(label.graphic.text.element)})),r(o.options.events,(function(t,e){var r=function(n){"click"===e&&o.cancelClick||t.call(o,o.chart.pointer.normalize(n),o.target)};-1===(o.nonDOMEvents||[]).indexOf(e)?o.graphic.on(e,r):n(o,e,r,{passive:!1})})),o.options.draggable&&(n(o,"drag",o.onDrag),!o.graphic.renderer.styledMode)){var h={cursor:{x:"ew-resize",y:"ns-resize",xy:"move"}[o.options.draggable]};o.graphic.css(h),(o.labels||[]).forEach((function(label){label.options.useHTML&&label.graphic.text&&label.graphic.text.css(h)}))}o.isUpdating||e(o,"add")},removeDocEvents:function(){this.removeDrag&&(this.removeDrag=this.removeDrag()),this.removeMouseUp&&(this.removeMouseUp=this.removeMouseUp())},onMouseDown:function(o){var r,h,c=this,d=c.chart.pointer;o.preventDefault&&o.preventDefault(),2!==o.button&&(o=d.normalize(o),r=o.chartX,h=o.chartY,c.cancelClick=!1,c.chart.hasDraggedAnnotation=!0,c.removeDrag=n(t.doc,t.isTouchDevice?"touchmove":"mousemove",(function(t){c.hasDragged=!0,(t=d.normalize(t)).prevChartX=r,t.prevChartY=h,e(c,"drag",t),r=t.chartX,h=t.chartY}),t.isTouchDevice?{passive:!1}:void 0),c.removeMouseUp=n(t.doc,t.isTouchDevice?"touchend":"mouseup",(function(t){var o=l(c.target&&c.target.annotation,c.target);o&&(o.cancelClick=c.hasDragged),c.cancelClick=c.hasDragged,c.hasDragged=!1,c.chart.hasDraggedAnnotation=!1,e(l(o,c),"afterUpdate"),c.onMouseUp(t)}),t.isTouchDevice?{passive:!1}:void 0))},onMouseUp:function(t){var o=this.chart,n=this.target||this,e=o.options.annotations,r=o.annotations.indexOf(n);this.removeDocEvents(),e[r]=n.options},onDrag:function(t){if(this.chart.isInsidePlot(t.chartX-this.chart.plotLeft,t.chartY-this.chart.plotTop,{visiblePlotOnly:!0})){var o=this.mouseMoveToTranslation(t);"x"===this.options.draggable&&(o.y=0),"y"===this.options.draggable&&(o.x=0),this.points.length?this.translate(o.x,o.y):(this.shapes.forEach((function(t){t.translate(o.x,o.y)})),this.labels.forEach((function(label){label.translate(o.x,o.y)}))),this.redraw(!1)}},mouseMoveToRadians:function(t,o,n){var e,r=t.prevChartY-n,l=t.prevChartX-o,h=t.chartY-n,c=t.chartX-o;return this.chart.inverted&&(e=l,l=r,r=e,e=c,c=h,h=e),Math.atan2(h,c)-Math.atan2(r,l)},mouseMoveToTranslation:function(t){var o,n=t.chartX-t.prevChartX,e=t.chartY-t.prevChartY;return this.chart.inverted&&(o=e,e=n,n=o),{x:n,y:e}},mouseMoveToScale:function(t,o,n){var e,r=t.prevChartX-o,l=t.prevChartY-n,h=(t.chartX-o||1)/(r||1),c=(t.chartY-n||1)/(l||1);return this.chart.inverted&&(e=c,c=h,h=e),{x:h,y:c}},destroy:function(){this.removeDocEvents(),h(this),this.hcEvents=null}}})),n(o,"Extensions/Annotations/ControlPoint.js",[o["Core/Utilities.js"],o["Extensions/Annotations/Mixins/EventEmitterMixin.js"]],(function(t,o){var n=t.merge,e=t.pick;return function(){function t(t,n,r,l){this.addEvents=o.addEvents,this.graphic=void 0,this.mouseMoveToRadians=o.mouseMoveToRadians,this.mouseMoveToScale=o.mouseMoveToScale,this.mouseMoveToTranslation=o.mouseMoveToTranslation,this.onDrag=o.onDrag,this.onMouseDown=o.onMouseDown,this.onMouseUp=o.onMouseUp,this.removeDocEvents=o.removeDocEvents,this.nonDOMEvents=["drag"],this.chart=t,this.target=n,this.options=r,this.index=e(r.index,l)}return t.prototype.setVisibility=function(t){this.graphic.attr("visibility",t?"visible":"hidden"),this.options.visible=t},t.prototype.render=function(){var t=this.chart,o=this.options;this.graphic=t.renderer.symbol(o.symbol,0,0,o.width,o.height).add(t.controlPointsGroup).css(o.style),this.setVisibility(o.visible),this.addEvents()},t.prototype.redraw=function(t){this.graphic[t?"animate":"attr"](this.options.positioner.call(this,this.target))},t.prototype.destroy=function(){o.destroy.call(this),this.graphic&&(this.graphic=this.graphic.destroy()),this.chart=null,this.target=null,this.options=null},t.prototype.update=function(t){var o=this.chart,e=this.target,r=this.index,l=n(!0,this.options,t);this.destroy(),this.constructor(o,e,l,r),this.render(o.controlPointsGroup),this.redraw()},t}()})),n(o,"Extensions/Annotations/MockPoint.js",[o["Core/Series/Series.js"],o["Core/Utilities.js"],o["Core/Axis/Axis.js"]],(function(t,o,n){var e=o.defined,r=(o.extend,o.fireEvent);return function(){function o(o,n,e){this.isInside=void 0,this.negative=void 0,this.plotX=void 0,this.plotY=void 0,this.ttBelow=void 0,this.x=void 0,this.y=void 0,this.mock=!0,this.series={visible:!0,chart:o,getPlotBox:t.prototype.getPlotBox},this.target=n||null,this.options=e,this.applyOptions(this.getOptions())}return o.fromPoint=function(t){return new o(t.series.chart,null,{x:t.x,y:t.y,xAxis:t.series.xAxis,yAxis:t.series.yAxis})},o.pointToPixels=function(t,o){var n,e=t.series,r=e.chart,l=t.plotX,h=t.plotY;return r.inverted&&(t.mock?(l=t.plotY,h=t.plotX):(l=r.plotWidth-t.plotY,h=r.plotHeight-t.plotX)),e&&!o&&(l+=(n=e.getPlotBox()).translateX,h+=n.translateY),{x:l,y:h}},o.pointToOptions=function(t){return{x:t.x,y:t.y,xAxis:t.series.xAxis,yAxis:t.series.yAxis}},o.prototype.hasDynamicOptions=function(){return"function"==typeof this.options},o.prototype.getOptions=function(){return this.hasDynamicOptions()?this.options(this.target):this.options},o.prototype.applyOptions=function(t){this.command=t.command,this.setAxis(t,"x"),this.setAxis(t,"y"),this.refresh()},o.prototype.setAxis=function(t,o){var r=o+"Axis",l=t[r],h=this.series.chart;this.series[r]=l instanceof n?l:e(l)?h[r][l]||h.get(l):null},o.prototype.toAnchor=function(){var t=[this.plotX,this.plotY,0,0];return this.series.chart.inverted&&(t[0]=this.plotY,t[1]=this.plotX),t},o.prototype.getLabelConfig=function(){return{x:this.x,y:this.y,point:this}},o.prototype.isInsidePlot=function(){var t=this.plotX,o=this.plotY,n=this.series.xAxis,l=this.series.yAxis,h={x:t,y:o,isInsidePlot:!0};return n&&(h.isInsidePlot=e(t)&&t>=0&&t<=n.len),l&&(h.isInsidePlot=h.isInsidePlot&&e(o)&&o>=0&&o<=l.len),r(this.series.chart,"afterIsInsidePlot",h),h.isInsidePlot},o.prototype.refresh=function(){var t=this.series,o=t.xAxis,n=t.yAxis,e=this.getOptions();o?(this.x=e.x,this.plotX=o.toPixels(e.x,!0)):(this.x=null,this.plotX=e.x),n?(this.y=e.y,this.plotY=n.toPixels(e.y,!0)):(this.y=null,this.plotY=e.y),this.isInside=this.isInsidePlot()},o.prototype.translate=function(t,o,n,e){this.hasDynamicOptions()||(this.plotX+=n,this.plotY+=e,this.refreshOptions())},o.prototype.scale=function(t,o,n,e){if(!this.hasDynamicOptions()){var r=this.plotX*n,l=this.plotY*e,h=(1-n)*t,c=(1-e)*o;this.plotX=h+r,this.plotY=c+l,this.refreshOptions()}},o.prototype.rotate=function(t,o,n){if(!this.hasDynamicOptions()){var e,r,l=Math.cos(n),h=Math.sin(n),c=this.plotX,d=this.plotY;e=(c-=t)*l-(d-=o)*h,r=c*h+d*l,this.plotX=e+t,this.plotY=r+o,this.refreshOptions()}},o.prototype.refreshOptions=function(){var t=this.series,o=t.xAxis,n=t.yAxis;this.x=this.options.x=o?this.options.x=o.toValue(this.plotX,!0):this.plotX,this.y=this.options.y=n?n.toValue(this.plotY,!0):this.plotY},o}()})),n(o,"Extensions/Annotations/Mixins/ControllableMixin.js",[o["Extensions/Annotations/ControlPoint.js"],o["Extensions/Annotations/MockPoint.js"],o["Core/Tooltip.js"],o["Core/Utilities.js"]],(function(t,o,n,e){var r=e.isObject,l=e.isString,h=e.merge,c=e.splat,d={init:function(t,o,n){this.annotation=t,this.chart=t.chart,this.options=o,this.points=[],this.controlPoints=[],this.index=n,this.linkPoints(),this.addControlPoints()},attr:function(){this.graphic.attr.apply(this.graphic,arguments)},getPointsOptions:function(){var t=this.options;return t.points||t.point&&c(t.point)},attrsFromOptions:function(t){var o,n,map=this.constructor.attrsMap,e={},r=this.chart.styledMode;for(o in t)!(n=map[o])||r&&-1!==["fill","stroke","stroke-width"].indexOf(n)||(e[n]=t[o]);return e},anchor:function(t){var o=t.series.getPlotBox(),e=t.series.chart,r=t.mock?t.toAnchor():n.prototype.getAnchor.call({chart:t.series.chart},t),l={x:r[0]+(this.options.x||0),y:r[1]+(this.options.y||0),height:r[2]||0,width:r[3]||0};return{relativePosition:l,absolutePosition:h(l,{x:l.x+(t.mock?o.translateX:e.plotLeft),y:l.y+(t.mock?o.translateY:e.plotTop)})}},point:function(t,n){if(t&&t.series)return t;if(!n||null===n.series)if(r(t))n=new o(this.chart,this,t);else if(l(t))n=this.chart.get(t)||null;else if("function"==typeof t){var e=t.call(n,this);n=e.series?e:new o(this.chart,this,t)}return n},linkPoints:function(){var i,t,o=this.getPointsOptions(),n=this.points,e=o&&o.length||0;for(i=0;i<e;i++){if(!(t=this.point(o[i],n[i])))return void(n.length=0);t.mock&&t.refresh(),n[i]=t}return n},addControlPoints:function(){var o=this.options.controlPoints;(o||[]).forEach((function(n,i){var e=h(this.options.controlPointOptions,n);e.index||(e.index=i),o[i]=e,this.controlPoints.push(new t(this.chart,this,e))}),this)},shouldBeDrawn:function(){return Boolean(this.points.length)},render:function(t){this.controlPoints.forEach((function(t){t.render()}))},redraw:function(t){this.controlPoints.forEach((function(o){o.redraw(t)}))},transform:function(t,o,n,e,r){if(this.chart.inverted){var l=o;o=n,n=l}this.points.forEach((function(l,i){this.transformPoint(t,o,n,e,r,i)}),this)},transformPoint:function(t,n,e,r,l,i){var h=this.points[i];h.mock||(h=this.points[i]=o.fromPoint(h)),h[t](n,e,r,l)},translate:function(t,o){this.transform("translate",null,null,t,o)},translatePoint:function(t,o,i){this.transformPoint("translate",null,null,t,o,i)},translateShape:function(t,o,n){var e=this.annotation.chart,r=this.annotation.userOptions,l=e.annotations.indexOf(this.annotation),h=e.options.annotations[l];this.translatePoint(t,o,0),n&&this.translatePoint(t,o,1),h[this.collection][this.index].point=this.options.point,r[this.collection][this.index].point=this.options.point},rotate:function(t,o,n){this.transform("rotate",t,o,n)},scale:function(t,o,n,e){this.transform("scale",t,o,n,e)},setControlPointsVisibility:function(t){this.controlPoints.forEach((function(o){o.setVisibility(t)}))},destroy:function(){this.graphic&&(this.graphic=this.graphic.destroy()),this.tracker&&(this.tracker=this.tracker.destroy()),this.controlPoints.forEach((function(t){t.destroy()})),this.chart=null,this.points=null,this.controlPoints=null,this.options=null,this.annotation&&(this.annotation=null)},update:function(t){var o=this.annotation,n=h(!0,this.options,t),e=this.graphic.parentGroup;this.destroy(),this.constructor(o,n,this.index),this.render(e),this.redraw()}};return d})),n(o,"Extensions/Annotations/Mixins/MarkerMixin.js",[o["Core/Chart/Chart.js"],o["Core/Renderer/SVG/SVGRenderer.js"],o["Core/Utilities.js"]],(function(t,o,n){var e=n.addEvent,r=n.defined,l=n.merge,h=n.uniqueKey,c={arrow:{tagName:"marker",attributes:{id:"arrow",refY:5,refX:9,markerWidth:10,markerHeight:10},children:[{tagName:"path",attributes:{d:"M 0 0 L 10 5 L 0 10 Z","stroke-width":0}}]},"reverse-arrow":{tagName:"marker",attributes:{id:"reverse-arrow",refY:5,refX:1,markerWidth:10,markerHeight:10},children:[{tagName:"path",attributes:{d:"M 0 5 L 10 0 L 10 10 Z","stroke-width":0}}]}};function d(t){return function(o){this.attr(t,"url(#"+o+")")}}o.prototype.addMarker=function(t,o){var n={attributes:{id:t}},e={stroke:o.color||"none",fill:o.color||"rgba(0, 0, 0, 0.75)"};n.children=o.children&&o.children.map((function(t){return l(e,t)}));var r=l(!0,{attributes:{markerWidth:20,markerHeight:20,refX:0,refY:0,orient:"auto"}},o,n),marker=this.definition(r);return marker.id=t,marker};var f={markerEndSetter:d("marker-end"),markerStartSetter:d("marker-start"),setItemMarkers:function(t){var o=t.options,n=t.chart,defs=n.options.defs,e=o.fill,c=r(e)&&"none"!==e?e:o.stroke;["markerStart","markerEnd"].forEach((function(e){var r,d,f,marker,v=o[e];if(v){for(f in defs)if((v===((r=defs[f]).attributes&&r.attributes.id)||v===r.id)&&"marker"===r.tagName){d=r;break}d&&(marker=t[e]=n.renderer.addMarker((o.id||h())+"-"+v,l(d,{color:c})),t.attr(e,marker.getAttribute("id")))}}))}};return e(t,"afterGetContainer",(function(){this.options.defs=l(c,this.options.defs||{})})),f})),n(o,"Extensions/Annotations/Controllables/ControllablePath.js",[o["Extensions/Annotations/Mixins/ControllableMixin.js"],o["Core/Globals.js"],o["Extensions/Annotations/Mixins/MarkerMixin.js"],o["Core/Utilities.js"]],(function(t,o,n,e){var r=e.extend,l="rgba(192,192,192,"+(o.svg?1e-4:.002)+")";return function(){function o(o,e,r){this.addControlPoints=t.addControlPoints,this.anchor=t.anchor,this.attr=t.attr,this.attrsFromOptions=t.attrsFromOptions,this.destroy=t.destroy,this.getPointsOptions=t.getPointsOptions,this.init=t.init,this.linkPoints=t.linkPoints,this.point=t.point,this.rotate=t.rotate,this.scale=t.scale,this.setControlPointsVisibility=t.setControlPointsVisibility,this.setMarkers=n.setItemMarkers,this.transform=t.transform,this.transformPoint=t.transformPoint,this.translate=t.translate,this.translatePoint=t.translatePoint,this.translateShape=t.translateShape,this.update=t.update,this.type="path",this.init(o,e,r),this.collection="shapes"}return o.prototype.toD=function(){var t=this.options.d;if(t)return"function"==typeof t?t.call(this):t;var o,n=this.points,e=n.length,r=e,l=n[0],h=r&&this.anchor(l).absolutePosition,c=0,d=[];if(h)for(d.push(["M",h.x,h.y]);++c<e&&r;)o=(l=n[c]).command||"L",h=this.anchor(l).absolutePosition,"M"===o||"L"===o?d.push([o,h.x,h.y]):"Z"===o&&d.push([o]),r=l.series.visible;return r?this.chart.renderer.crispLine(d,this.graphic.strokeWidth()):null},o.prototype.shouldBeDrawn=function(){return t.shouldBeDrawn.call(this)||Boolean(this.options.d)},o.prototype.render=function(o){var e=this.options,h=this.attrsFromOptions(e);this.graphic=this.annotation.chart.renderer.path([["M",0,0]]).attr(h).add(o),e.className&&this.graphic.addClass(e.className),this.tracker=this.annotation.chart.renderer.path([["M",0,0]]).addClass("highcharts-tracker-line").attr({zIndex:2}).add(o),this.annotation.chart.styledMode||this.tracker.attr({"stroke-linejoin":"round",stroke:l,fill:l,"stroke-width":this.graphic.strokeWidth()+2*e.snap}),t.render.call(this),r(this.graphic,{markerStartSetter:n.markerStartSetter,markerEndSetter:n.markerEndSetter}),this.setMarkers(this)},o.prototype.redraw=function(o){var n=this.toD(),e=o?"animate":"attr";n?(this.graphic[e]({d:n}),this.tracker[e]({d:n})):(this.graphic.attr({d:"M 0 -9000000000"}),this.tracker.attr({d:"M 0 -9000000000"})),this.graphic.placed=this.tracker.placed=Boolean(n),t.redraw.call(this,o)},o.attrsMap={dashStyle:"dashstyle",strokeWidth:"stroke-width",stroke:"stroke",fill:"fill",zIndex:"zIndex"},o}()})),n(o,"Extensions/Annotations/Controllables/ControllableRect.js",[o["Extensions/Annotations/Mixins/ControllableMixin.js"],o["Extensions/Annotations/Controllables/ControllablePath.js"],o["Core/Utilities.js"]],(function(t,o,n){var e=n.merge;return function(){function n(o,n,e){this.addControlPoints=t.addControlPoints,this.anchor=t.anchor,this.attr=t.attr,this.attrsFromOptions=t.attrsFromOptions,this.destroy=t.destroy,this.getPointsOptions=t.getPointsOptions,this.init=t.init,this.linkPoints=t.linkPoints,this.point=t.point,this.rotate=t.rotate,this.scale=t.scale,this.setControlPointsVisibility=t.setControlPointsVisibility,this.shouldBeDrawn=t.shouldBeDrawn,this.transform=t.transform,this.transformPoint=t.transformPoint,this.translatePoint=t.translatePoint,this.translateShape=t.translateShape,this.update=t.update,this.type="rect",this.translate=t.translateShape,this.init(o,n,e),this.collection="shapes"}return n.prototype.render=function(o){var n=this.attrsFromOptions(this.options);this.graphic=this.annotation.chart.renderer.rect(0,-9e9,0,0).attr(n).add(o),t.render.call(this)},n.prototype.redraw=function(o){var n=this.anchor(this.points[0]).absolutePosition;n?this.graphic[o?"animate":"attr"]({x:n.x,y:n.y,width:this.options.width,height:this.options.height}):this.attr({x:0,y:-9e9}),this.graphic.placed=Boolean(n),t.redraw.call(this,o)},n.attrsMap=e(o.attrsMap,{width:"width",height:"height"}),n}()})),n(o,"Extensions/Annotations/Controllables/ControllableCircle.js",[o["Extensions/Annotations/Mixins/ControllableMixin.js"],o["Extensions/Annotations/Controllables/ControllablePath.js"],o["Core/Utilities.js"]],(function(t,o,n){var e=n.merge;return function(){function n(o,n,e){this.addControlPoints=t.addControlPoints,this.anchor=t.anchor,this.attr=t.attr,this.attrsFromOptions=t.attrsFromOptions,this.destroy=t.destroy,this.getPointsOptions=t.getPointsOptions,this.init=t.init,this.linkPoints=t.linkPoints,this.point=t.point,this.rotate=t.rotate,this.scale=t.scale,this.setControlPointsVisibility=t.setControlPointsVisibility,this.shouldBeDrawn=t.shouldBeDrawn,this.transform=t.transform,this.transformPoint=t.transformPoint,this.translatePoint=t.translatePoint,this.translateShape=t.translateShape,this.update=t.update,this.type="circle",this.translate=t.translateShape,this.init(o,n,e),this.collection="shapes"}return n.prototype.render=function(o){var n=this.attrsFromOptions(this.options);this.graphic=this.annotation.chart.renderer.circle(0,-9e9,0).attr(n).add(o),t.render.call(this)},n.prototype.redraw=function(o){var n=this.anchor(this.points[0]).absolutePosition;n?this.graphic[o?"animate":"attr"]({x:n.x,y:n.y,r:this.options.r}):this.graphic.attr({x:0,y:-9e9}),this.graphic.placed=Boolean(n),t.redraw.call(this,o)},n.prototype.setRadius=function(t){this.options.r=t},n.attrsMap=e(o.attrsMap,{r:"r"}),n}()})),n(o,"Extensions/Annotations/Controllables/ControllableEllipse.js",[o["Extensions/Annotations/Mixins/ControllableMixin.js"],o["Extensions/Annotations/Controllables/ControllablePath.js"],o["Core/Utilities.js"]],(function(t,o,n){var e=n.merge,r=n.defined;return function(){function n(o,n,e){this.addControlPoints=t.addControlPoints,this.anchor=t.anchor,this.attr=t.attr,this.attrsFromOptions=t.attrsFromOptions,this.destroy=t.destroy,this.getPointsOptions=t.getPointsOptions,this.linkPoints=t.linkPoints,this.point=t.point,this.scale=t.scale,this.setControlPointsVisibility=t.setControlPointsVisibility,this.shouldBeDrawn=t.shouldBeDrawn,this.transform=t.transform,this.translatePoint=t.translatePoint,this.transformPoint=t.transformPoint,this.type="ellipse",this.init(o,n,e),this.collection="shapes"}return n.prototype.init=function(o,n,e){r(n.yAxis)&&n.points.forEach((function(t){t.yAxis=n.yAxis})),r(n.xAxis)&&n.points.forEach((function(t){t.xAxis=n.xAxis})),t.init.call(this,o,n,e)},n.prototype.render=function(o){this.graphic=this.annotation.chart.renderer.createElement("ellipse").attr(this.attrsFromOptions(this.options)).add(o),t.render.call(this)},n.prototype.translate=function(o,n){t.translateShape.call(this,o,n,!0)},n.prototype.getDistanceFromLine=function(t,o,n,e){return Math.abs((o.y-t.y)*n-(o.x-t.x)*e+o.x*t.y-o.y*t.x)/Math.sqrt((o.y-t.y)*(o.y-t.y)+(o.x-t.x)*(o.x-t.x))},n.prototype.getAttrs=function(t,o){var n=t.x,e=t.y,r=o.x,l=o.y,h=(n+r)/2,c=(e+l)/2,d=Math.sqrt((n-r)*(n-r)/4+(e-l)*(e-l)/4),f=(l-e)/(r-n),v=180*Math.atan(f)/Math.PI;return h<n&&(v+=180),{cx:h,cy:c,rx:d,ry:this.getRY(),angle:v}},n.prototype.getRY=function(){var t=this.getYAxis();return r(t)?Math.abs(t.toPixels(this.options.ry)-t.toPixels(0)):this.options.ry},n.prototype.getYAxis=function(){var t=this.options.yAxis;return this.chart.yAxis[t]},n.prototype.getAbsolutePosition=function(t){return this.anchor(t).absolutePosition},n.prototype.redraw=function(o){var n=this.getAbsolutePosition(this.points[0]),e=this.getAbsolutePosition(this.points[1]),r=this.getAttrs(n,e);n?this.graphic[o?"animate":"attr"]({cx:r.cx,cy:r.cy,rx:r.rx,ry:r.ry,rotation:r.angle,rotationOriginX:r.cx,rotationOriginY:r.cy}):this.graphic.attr({x:0,y:-9e9}),this.graphic.placed=Boolean(n),t.redraw.call(this,o)},n.prototype.setYRadius=function(t){this.options.ry=t,this.annotation.userOptions.shapes[0].ry=t,this.annotation.options.shapes[0].ry=t},n.attrsMap=e(o.attrsMap,{ry:"ry"}),n}()})),n(o,"Extensions/Annotations/Controllables/ControllableLabel.js",[o["Extensions/Annotations/Mixins/ControllableMixin.js"],o["Core/FormatUtilities.js"],o["Extensions/Annotations/MockPoint.js"],o["Core/Renderer/SVG/SVGRenderer.js"],o["Core/Tooltip.js"],o["Core/Utilities.js"]],(function(t,o,n,e,r,l){var h=o.format,c=e.prototype.symbols,d=l.extend,f=l.isNumber,v=l.pick,y=function(){function o(o,n,e){this.addControlPoints=t.addControlPoints,this.attr=t.attr,this.attrsFromOptions=t.attrsFromOptions,this.destroy=t.destroy,this.getPointsOptions=t.getPointsOptions,this.init=t.init,this.linkPoints=t.linkPoints,this.point=t.point,this.rotate=t.rotate,this.scale=t.scale,this.setControlPointsVisibility=t.setControlPointsVisibility,this.shouldBeDrawn=t.shouldBeDrawn,this.transform=t.transform,this.transformPoint=t.transformPoint,this.translateShape=t.translateShape,this.update=t.update,this.init(o,n,e),this.collection="labels"}return o.alignedPosition=function(t,o){var n,e,r=t.align,l=t.verticalAlign,h=(o.x||0)+(t.x||0),c=(o.y||0)+(t.y||0);return"right"===r?n=1:"center"===r&&(n=2),n&&(h+=(o.width-(t.width||0))/n),"bottom"===l?e=1:"middle"===l&&(e=2),e&&(c+=(o.height-(t.height||0))/e),{x:Math.round(h),y:Math.round(c)}},o.justifiedOptions=function(t,label,o,n){var e,r=o.align,l=o.verticalAlign,h=label.box?0:label.padding||0,c=label.getBBox(),d={align:r,verticalAlign:l,x:o.x,y:o.y,width:label.width,height:label.height},f=(n.x||0)-t.plotLeft,v=(n.y||0)-t.plotTop;return(e=f+h)<0&&("right"===r?d.align="left":d.x=(d.x||0)-e),(e=f+c.width-h)>t.plotWidth&&("left"===r?d.align="right":d.x=(d.x||0)+t.plotWidth-e),(e=v+h)<0&&("bottom"===l?d.verticalAlign="top":d.y=(d.y||0)-e),(e=v+c.height-h)>t.plotHeight&&("top"===l?d.verticalAlign="bottom":d.y=(d.y||0)+t.plotHeight-e),d},o.prototype.translatePoint=function(o,n){t.translatePoint.call(this,o,n,0)},o.prototype.translate=function(t,o){var n=this.annotation.chart,e=this.annotation.userOptions,r=n.annotations.indexOf(this.annotation),l=n.options.annotations[r];if(n.inverted){var h=t;t=o,o=h}this.options.x+=t,this.options.y+=o,l[this.collection][this.index].x=this.options.x,l[this.collection][this.index].y=this.options.y,e[this.collection][this.index].x=this.options.x,e[this.collection][this.index].y=this.options.y},o.prototype.render=function(n){var e=this.options,r=this.attrsFromOptions(e),style=e.style;this.graphic=this.annotation.chart.renderer.label("",0,-9999,e.shape,null,null,e.useHTML,null,"annotation-label").attr(r).add(n),this.annotation.chart.styledMode||("contrast"===style.color&&(style.color=this.annotation.chart.renderer.getContrast(o.shapesWithoutBackground.indexOf(e.shape)>-1?"#FFFFFF":e.backgroundColor)),this.graphic.css(e.style).shadow(e.shadow)),e.className&&this.graphic.addClass(e.className),this.graphic.labelrank=e.labelrank,t.render.call(this)},o.prototype.redraw=function(o){var n=this.options,text=this.text||n.format||n.text,label=this.graphic,e=this.points[0];label.attr({text:text?h(text,e.getLabelConfig(),this.annotation.chart):n.formatter.call(e,this)});var r=this.anchor(e),l=this.position(r);l?(label.alignAttr=l,l.anchorX=r.absolutePosition.x,l.anchorY=r.absolutePosition.y,label[o?"animate":"attr"](l)):label.attr({x:0,y:-9999}),label.placed=!!l,t.redraw.call(this,o)},o.prototype.anchor=function(o){var n=t.anchor.apply(this,arguments),e=this.options.x||0,r=this.options.y||0;return n.absolutePosition.x-=e,n.absolutePosition.y-=r,n.relativePosition.x-=e,n.relativePosition.y-=r,n},o.prototype.position=function(t){var e,l,h,c,f=this.graphic,y=this.annotation.chart,m=this.points[0],x=this.options,A=t.absolutePosition,C=t.relativePosition,P=m.series.visible&&n.prototype.isInsidePlot.call(m),k=f.width,E=void 0===k?0:k,w=f.height,O=void 0===w?0:w;return P&&(x.distance?e=r.prototype.getPosition.call({chart:y,distance:v(x.distance,16)},E,O,{plotX:C.x,plotY:C.y,negative:m.negative,ttBelow:m.ttBelow,h:C.height||C.width}):x.positioner?e=x.positioner.call(this):(l={x:A.x,y:A.y,width:0,height:0},e=o.alignedPosition(d(x,{width:E,height:O}),l),"justify"===this.options.overflow&&(e=o.alignedPosition(o.justifiedOptions(y,f,x,e),l))),x.crop&&(h=e.x-y.plotLeft,c=e.y-y.plotTop,P=y.isInsidePlot(h,c)&&y.isInsidePlot(h+E,c+O))),P?e:null},o.attrsMap={backgroundColor:"fill",borderColor:"stroke",borderWidth:"stroke-width",zIndex:"zIndex",borderRadius:"r",padding:"padding"},o.shapesWithoutBackground=["connector"],o}();return c.connector=function(t,o,n,e,r){var path,l,h=r&&r.anchorX,c=r&&r.anchorY,d=n/2;return f(h)&&f(c)&&(path=[["M",h,c]],(l=o-c)<0&&(l=-e-l),l<n&&(d=h<t+n/2?l:n-l),c>o+e?path.push(["L",t+d,o+e]):c<o?path.push(["L",t+d,o]):h<t?path.push(["L",t,o+e/2]):h>t+n&&path.push(["L",t+n,o+e/2])),path||[]},y})),n(o,"Extensions/Annotations/Controllables/ControllableImage.js",[o["Extensions/Annotations/Controllables/ControllableLabel.js"],o["Extensions/Annotations/Mixins/ControllableMixin.js"]],(function(t,o){return function(){function n(t,n,e){this.addControlPoints=o.addControlPoints,this.anchor=o.anchor,this.attr=o.attr,this.attrsFromOptions=o.attrsFromOptions,this.destroy=o.destroy,this.getPointsOptions=o.getPointsOptions,this.init=o.init,this.linkPoints=o.linkPoints,this.point=o.point,this.rotate=o.rotate,this.scale=o.scale,this.setControlPointsVisibility=o.setControlPointsVisibility,this.shouldBeDrawn=o.shouldBeDrawn,this.transform=o.transform,this.transformPoint=o.transformPoint,this.translatePoint=o.translatePoint,this.translateShape=o.translateShape,this.update=o.update,this.type="image",this.translate=o.translateShape,this.init(t,n,e),this.collection="shapes"}return n.prototype.render=function(t){var n=this.attrsFromOptions(this.options),e=this.options;this.graphic=this.annotation.chart.renderer.image(e.src,0,-9e9,e.width,e.height).attr(n).add(t),this.graphic.width=e.width,this.graphic.height=e.height,o.render.call(this)},n.prototype.redraw=function(n){var e=this.anchor(this.points[0]),r=t.prototype.position.call(this,e);r?this.graphic[n?"animate":"attr"]({x:r.x,y:r.y}):this.graphic.attr({x:0,y:-9e9}),this.graphic.placed=Boolean(r),o.redraw.call(this,n)},n.attrsMap={width:"width",height:"height",zIndex:"zIndex"},n}()})),n(o,"Extensions/Annotations/Annotations.js",[o["Core/Animation/AnimationUtilities.js"],o["Core/Chart/Chart.js"],o["Extensions/Annotations/Mixins/ControllableMixin.js"],o["Extensions/Annotations/Controllables/ControllableRect.js"],o["Extensions/Annotations/Controllables/ControllableCircle.js"],o["Extensions/Annotations/Controllables/ControllableEllipse.js"],o["Extensions/Annotations/Controllables/ControllablePath.js"],o["Extensions/Annotations/Controllables/ControllableImage.js"],o["Extensions/Annotations/Controllables/ControllableLabel.js"],o["Extensions/Annotations/ControlPoint.js"],o["Extensions/Annotations/Mixins/EventEmitterMixin.js"],o["Core/Globals.js"],o["Extensions/Annotations/MockPoint.js"],o["Core/Pointer.js"],o["Core/Utilities.js"]],(function(t,o,n,e,r,l,h,c,d,f,v,y,m,x,A){var C=t.getDeferredAnimation,P=o.prototype,k=A.addEvent,E=A.defined,w=A.destroyObjectProperties,O=A.erase,M=A.extend,B=A.find,T=A.fireEvent,N=A.merge,j=A.pick,S=A.splat,D=A.wrap,I=function(){function t(t,o){var n;this.annotation=void 0,this.coll="annotations",this.collection=void 0,this.animationConfig=void 0,this.graphic=void 0,this.group=void 0,this.labelCollector=void 0,this.labelsGroup=void 0,this.shapesGroup=void 0,this.chart=t,this.points=[],this.controlPoints=[],this.coll="annotations",this.labels=[],this.shapes=[],this.options=N(this.defaultOptions,o),this.userOptions=o,n=this.getLabelsAndShapesOptions(this.options,o),this.options.labels=n.labels,this.options.shapes=n.shapes,this.init(t,this.options)}return t.prototype.init=function(){var t=this.chart,o=this.options.animation;this.linkPoints(),this.addControlPoints(),this.addShapes(),this.addLabels(),this.setLabelCollector(),this.animationConfig=C(t,o)},t.prototype.getLabelsAndShapesOptions=function(t,o){var n={};return["labels","shapes"].forEach((function(e){t[e]&&(o[e]?n[e]=S(o[e]).map((function(o,i){return N(t[e][i],o)})):n[e]=t[e])})),n},t.prototype.addShapes=function(){(this.options.shapes||[]).forEach((function(t,i){var o=this.initShape(t,i);N(!0,this.options.shapes[i],o.options)}),this)},t.prototype.addLabels=function(){(this.options.labels||[]).forEach((function(t,i){var o=this.initLabel(t,i);N(!0,this.options.labels[i],o.options)}),this)},t.prototype.addClipPaths=function(){this.setClipAxes(),this.clipXAxis&&this.clipYAxis&&this.options.crop&&(this.clipRect=this.chart.renderer.clipRect(this.getClipBox()))},t.prototype.setClipAxes=function(){var t=this.chart.xAxis,o=this.chart.yAxis,n=(this.options.labels||[]).concat(this.options.shapes||[]).reduce((function(n,e){var r=e&&(e.point||e.points&&e.points[0]);return[t[r&&r.xAxis]||n[0],o[r&&r.yAxis]||n[1]]}),[]);this.clipXAxis=n[0],this.clipYAxis=n[1]},t.prototype.getClipBox=function(){if(this.clipXAxis&&this.clipYAxis)return{x:this.clipXAxis.left,y:this.clipYAxis.top,width:this.clipXAxis.width,height:this.clipYAxis.height}},t.prototype.setLabelCollector=function(){var t=this;t.labelCollector=function(){return t.labels.reduce((function(t,label){return label.options.allowOverlap||t.push(label.graphic),t}),[])},t.chart.labelCollectors.push(t.labelCollector)},t.prototype.setOptions=function(t){this.options=N(this.defaultOptions,t)},t.prototype.redraw=function(t){this.linkPoints(),this.graphic||this.render(),this.clipRect&&this.clipRect.animate(this.getClipBox()),this.redrawItems(this.shapes,t),this.redrawItems(this.labels,t),n.redraw.call(this,t)},t.prototype.redrawItems=function(t,o){for(var i=t.length;i--;)this.redrawItem(t[i],o)},t.prototype.renderItems=function(t){for(var i=t.length;i--;)this.renderItem(t[i])},t.prototype.render=function(){var t=this.chart.renderer;this.graphic=t.g("annotation").attr({opacity:0,zIndex:this.options.zIndex,visibility:this.options.visible?"visible":"hidden"}).add(),this.shapesGroup=t.g("annotation-shapes").add(this.graphic),this.options.crop&&this.shapesGroup.clip(this.chart.plotBoxClip),this.labelsGroup=t.g("annotation-labels").attr({translateX:0,translateY:0}).add(this.graphic),this.addClipPaths(),this.clipRect&&this.graphic.clip(this.clipRect),this.renderItems(this.shapes),this.renderItems(this.labels),this.addEvents(),n.render.call(this)},t.prototype.setVisibility=function(t){var o=this.options,n=this.chart.navigationBindings,e=j(t,!o.visible);this.graphic.attr("visibility",e?"visible":"hidden"),e||(this.setControlPointsVisibility(!1),n.activeAnnotation===this&&n.popup&&"annotation-toolbar"===n.popup.formType&&T(n,"closePopup")),o.visible=e},t.prototype.setControlPointsVisibility=function(t){var o=function(o){o.setControlPointsVisibility(t)};n.setControlPointsVisibility.call(this,t),this.shapes.forEach(o),this.labels.forEach(o)},t.prototype.destroy=function(){var t=this.chart,o=function(t){t.destroy()};this.labels.forEach(o),this.shapes.forEach(o),this.clipXAxis=null,this.clipYAxis=null,O(t.labelCollectors,this.labelCollector),v.destroy.call(this),n.destroy.call(this),w(this,t)},t.prototype.remove=function(){return this.chart.removeAnnotation(this)},t.prototype.update=function(t,o){var n=this.chart,e=this.getLabelsAndShapesOptions(this.userOptions,t),r=n.annotations.indexOf(this),l=N(!0,this.userOptions,t);l.labels=e.labels,l.shapes=e.shapes,this.destroy(),this.constructor(n,l),n.options.annotations[r]=l,this.isUpdating=!0,j(o,!0)&&n.redraw(),T(this,"afterUpdate"),this.isUpdating=!1},t.prototype.initShape=function(o,n){var e=N(this.options.shapeOptions,{controlPointOptions:this.options.controlPointOptions},o),r=new t.shapesMap[e.type](this,e,n);return r.itemType="shape",this.shapes.push(r),r},t.prototype.initLabel=function(t,o){var n=N(this.options.labelOptions,{controlPointOptions:this.options.controlPointOptions},t),label=new d(this,n,o);return label.itemType="label",this.labels.push(label),label},t.prototype.redrawItem=function(t,o){t.linkPoints(),t.shouldBeDrawn()?(t.graphic||this.renderItem(t),t.redraw(j(o,!0)&&t.graphic.placed),t.points.length&&this.adjustVisibility(t)):this.destroyItem(t)},t.prototype.adjustVisibility=function(t){var o=!1,label=t.graphic;t.points.forEach((function(t){!1!==t.series.visible&&!1!==t.visible&&(o=!0)})),o?"hidden"===label.visibility&&label.show():label.hide()},t.prototype.destroyItem=function(t){O(this[t.itemType+"s"],t),t.destroy()},t.prototype.renderItem=function(t){t.render("label"===t.itemType?this.labelsGroup:this.shapesGroup)},t.ControlPoint=f,t.MockPoint=m,t.shapesMap={rect:e,circle:r,ellipse:l,path:h,image:c},t.types={},t}();return N(!0,I.prototype,n,v,N(I.prototype,{nonDOMEvents:["add","afterUpdate","drag","remove"],defaultOptions:{visible:!0,animation:{},crop:!0,draggable:"xy",labelOptions:{align:"center",allowOverlap:!1,backgroundColor:"rgba(0, 0, 0, 0.75)",borderColor:"#000000",borderRadius:3,borderWidth:1,className:"highcharts-no-tooltip",crop:!1,formatter:function(){return E(this.y)?this.y:"Annotation label"},includeInDataExport:!0,overflow:"justify",padding:5,shadow:!1,shape:"callout",style:{fontSize:"11px",fontWeight:"normal",color:"contrast"},useHTML:!1,verticalAlign:"bottom",x:0,y:-16},shapeOptions:{stroke:"rgba(0, 0, 0, 0.75)",strokeWidth:1,fill:"rgba(0, 0, 0, 0.75)",r:0,snap:2},controlPointOptions:{symbol:"circle",width:10,height:10,style:{cursor:"pointer",fill:"#ffffff",stroke:"#000000","stroke-width":2},visible:!1,events:{}},events:{},zIndex:6}})),y.extendAnnotation=function(t,o,n,e){o=o||I,M(t.prototype,N(o.prototype,n)),t.prototype.defaultOptions=N(t.prototype.defaultOptions,e||{})},M(P,{initAnnotation:function(t){var o=new(I.types[t.type]||I)(this,t);return this.annotations.push(o),o},addAnnotation:function(t,o){var n=this.initAnnotation(t);return this.options.annotations.push(n.options),j(o,!0)&&(n.redraw(),n.graphic.attr({opacity:1})),n},removeAnnotation:function(t){var o=this.annotations,n="annotations"===t.coll?t:B(o,(function(o){return o.options.id===t}));n&&(T(n,"remove"),O(this.options.annotations,n.options),O(o,n),n.destroy())},drawAnnotations:function(){this.plotBoxClip.attr(this.plotBox),this.annotations.forEach((function(t){t.redraw(),t.graphic.animate({opacity:1},t.animationConfig)}))}}),P.collectionsWithUpdate.push("annotations"),P.collectionsWithInit.annotations=[P.addAnnotation],k(o,"afterInit",(function(){this.annotations=[],this.options.annotations||(this.options.annotations=[])})),P.callbacks.push((function(t){t.plotBoxClip=this.renderer.clipRect(this.plotBox),t.controlPointsGroup=t.renderer.g("control-points").attr({zIndex:99}).clip(t.plotBoxClip).add(),t.options.annotations.forEach((function(o,i){if(!t.annotations.some((function(t){return t.options===o}))){var n=t.initAnnotation(o);t.options.annotations[i]=n.options}})),t.drawAnnotations(),k(t,"redraw",t.drawAnnotations),k(t,"destroy",(function(){t.plotBoxClip.destroy(),t.controlPointsGroup.destroy()})),k(t,"exportData",(function(o){var n=t.annotations,e=(this.options.exporting&&this.options.exporting.csv||{}).columnHeaderFormatter,r=!o.dataRows[1].xValues,l=t.options.lang&&t.options.lang.exportData&&t.options.lang.exportData.annotationHeader,h=o.dataRows[0].length,c=t.options.exporting&&t.options.exporting.csv&&t.options.exporting.csv.annotations&&t.options.exporting.csv.annotations.itemDelimiter,d=t.options.exporting&&t.options.exporting.csv&&t.options.exporting.csv.annotations&&t.options.exporting.csv.annotations.join;n.forEach((function(t){t.options.labelOptions.includeInDataExport&&t.labels.forEach((function(label){if(label.options.text){var t=label.options.text;label.points.forEach((function(n){var e=n.x,r=n.series.xAxis?n.series.xAxis.options.index:-1,l=!1;if(-1===r){for(var f=o.dataRows[0].length,v=new Array(f),i=0;i<f;++i)v[i]="";v.push(t),v.xValues=[],v.xValues[r]=e,o.dataRows.push(v),l=!0}if(l||o.dataRows.forEach((function(o){!l&&o.xValues&&void 0!==r&&e===o.xValues[r]&&(d&&o.length>h?o[o.length-1]+=c+t:o.push(t),l=!0)})),!l){for(f=o.dataRows[0].length,v=new Array(f),i=0;i<f;++i)v[i]="";v[0]=e,v.push(t),v.xValues=[],void 0!==r&&(v.xValues[r]=e),o.dataRows.push(v)}}))}}))}));var f=0;o.dataRows.forEach((function(t){f=Math.max(f,t.length)}));for(var v,s,y=f-o.dataRows[0].length,i=0;i<y;i++){var header=(v=i+1,s=void 0,e&&!1!==(s=e(v))?s:(s=l+" "+v,r?{columnTitle:s,topLevelColumnTitle:s}:s));r?(o.dataRows[0].push(header.topLevelColumnTitle),o.dataRows[1].push(header.columnTitle)):o.dataRows[0].push(header)}}))})),D(x.prototype,"onContainerMouseDown",(function(t){this.chart.hasDraggedAnnotation||t.apply(this,Array.prototype.slice.call(arguments,1))})),y.Annotation=I,I})),n(o,"Core/Chart/ChartNavigationComposition.js",[],(function(){var t;return function(t){t.compose=function(t){return t.navigation||(t.navigation=new o(t)),t};var o=function(){function t(t){this.updates=[],this.chart=t}return t.prototype.addUpdate=function(t){this.chart.navigation.updates.push(t)},t.prototype.update=function(t,o){var n=this;this.updates.forEach((function(e){e.call(n.chart,t,o)}))},t}();t.Additions=o}(t||(t={})),t})),n(o,"Extensions/Annotations/NavigationBindings.js",[o["Extensions/Annotations/Annotations.js"],o["Core/Chart/Chart.js"],o["Core/Chart/ChartNavigationComposition.js"],o["Core/FormatUtilities.js"],o["Core/Globals.js"],o["Core/DefaultOptions.js"],o["Core/Utilities.js"]],(function(t,o,n,e,r,l,h){var c=e.format,d=l.setOptions,f=h.addEvent,v=h.attr,y=h.fireEvent,m=h.isArray,x=h.isFunction,A=h.isNumber,C=h.isObject,P=h.merge,k=h.objectEach,E=h.pick,w=r.doc,O=r.win,M="highcharts-",B={getFieldType:function(t){return{string:"text",number:"number",boolean:"checkbox"}[typeof t]},updateRectSize:function(t,o){var n=o.chart,e=o.options.typeOptions,r=A(e.xAxis)&&n.xAxis[e.xAxis],l=A(e.yAxis)&&n.yAxis[e.yAxis];if(r&&l){var h=r.toValue(t[r.horiz?"chartX":"chartY"]),c=l.toValue(t[l.horiz?"chartX":"chartY"]),d=h-e.point.x,f=e.point.y-c;o.update({typeOptions:{background:{width:n.inverted?f:d,height:n.inverted?d:f}}})}},getAssignedAxis:function(t){return t.filter((function(t){var o=t.axis.getExtremes(),n=o.min,e=o.max,r=E(t.axis.minPointOffset,0);return A(n)&&A(e)&&t.value>=n-r&&t.value<=e+r&&!t.axis.options.isInternal}))[0]}},T=function(){function t(t,o){this.boundClassNames=void 0,this.selectedButton=void 0,this.chart=t,this.options=o,this.eventsToUnbind=[],this.container=w.getElementsByClassName(this.options.bindingsClassName||"")}return t.prototype.initEvents=function(){var t=this,o=t.chart,n=t.container,e=t.options;t.boundClassNames={},k(e.bindings||{},(function(o){t.boundClassNames[o.className]=o})),[].forEach.call(n,(function(o){t.eventsToUnbind.push(f(o,"click",(function(n){var e=t.getButtonEvents(o,n);e&&-1===e.button.className.indexOf("highcharts-disabled-btn")&&t.bindingsButtonClick(e.button,e.events,n)})))})),k(e.events||{},(function(o,n){x(o)&&t.eventsToUnbind.push(f(t,n,o,{passive:!1}))})),t.eventsToUnbind.push(f(o.container,"click",(function(n){!o.cancelClick&&o.isInsidePlot(n.chartX-o.plotLeft,n.chartY-o.plotTop,{visiblePlotOnly:!0})&&t.bindingsChartClick(this,n)}))),t.eventsToUnbind.push(f(o.container,r.isTouchDevice?"touchmove":"mousemove",(function(o){t.bindingsContainerMouseMove(this,o)}),r.isTouchDevice?{passive:!1}:void 0))},t.prototype.initUpdate=function(){var t=this;n.compose(this.chart).navigation.addUpdate((function(o){t.update(o)}))},t.prototype.bindingsButtonClick=function(button,t,o){var n=this,e=n.chart,r=e.renderer.boxWrapper,l=!0;n.selectedButtonElement&&(n.selectedButtonElement.classList===button.classList&&(l=!1),y(n,"deselectButton",{button:n.selectedButtonElement}),n.nextEvent&&(n.currentUserDetails&&"annotations"===n.currentUserDetails.coll&&e.removeAnnotation(n.currentUserDetails),n.mouseMoveEvent=n.nextEvent=!1)),l?(n.selectedButton=t,n.selectedButtonElement=button,y(n,"selectButton",{button:button}),t.init&&t.init.call(n,button,o),(t.start||t.steps)&&e.renderer.boxWrapper.addClass(M+"draw-mode")):(e.stockTools&&e.stockTools.toggleButtonAciveClass(button),r.removeClass(M+"draw-mode"),n.nextEvent=!1,n.mouseMoveEvent=!1,n.selectedButton=null)},t.prototype.bindingsChartClick=function(t,o){t=this.chart;var n=this,e=n.activeAnnotation,r=n.selectedButton,l=t.renderer.boxWrapper;e&&(e.cancelClick||o.activeAnnotation||!o.target.parentNode||function(t,s){var o=O.Element.prototype,n=o.matches||o.msMatchesSelector||o.webkitMatchesSelector,e=null;if(o.closest)e=o.closest.call(t,s);else do{if(n.call(t,s))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return e}(o.target,"."+M+"popup")?e.cancelClick&&setTimeout((function(){e.cancelClick=!1}),0):y(n,"closePopup")),r&&r.start&&(n.nextEvent?(n.nextEvent(o,n.currentUserDetails),n.steps&&(n.stepIndex++,r.steps[n.stepIndex]?n.mouseMoveEvent=n.nextEvent=r.steps[n.stepIndex]:(y(n,"deselectButton",{button:n.selectedButtonElement}),l.removeClass(M+"draw-mode"),r.end&&r.end.call(n,o,n.currentUserDetails),n.nextEvent=!1,n.mouseMoveEvent=!1,n.selectedButton=null))):(n.currentUserDetails=r.start.call(n,o),n.currentUserDetails&&r.steps?(n.stepIndex=0,n.steps=!0,n.mouseMoveEvent=n.nextEvent=r.steps[n.stepIndex]):(y(n,"deselectButton",{button:n.selectedButtonElement}),l.removeClass(M+"draw-mode"),n.steps=!1,n.selectedButton=null,r.end&&r.end.call(n,o,n.currentUserDetails))))},t.prototype.bindingsContainerMouseMove=function(t,o){this.mouseMoveEvent&&this.mouseMoveEvent(o,this.currentUserDetails)},t.prototype.fieldsToOptions=function(t,o){return k(t,(function(t,n){var e=parseFloat(t),path=n.split("."),r=o,l=path.length-1;!A(e)||t.match(/px/g)||n.match(/format/g)||(t=e),""!==t&&"undefined"!==t&&path.forEach((function(o,n){var e=E(path[n+1],"");l===n?r[o]=t:(r[o]||(r[o]=e.match(/\d/g)?[]:{}),r=r[o])}))})),o},t.prototype.deselectAnnotation=function(){this.activeAnnotation&&(this.activeAnnotation.setControlPointsVisibility(!1),this.activeAnnotation=!1)},t.prototype.annotationToFields=function(o){var n=o.options,e=t.annotationsEditable,r=e.nestedOptions,l=this.utils.getFieldType,h=E(n.type,n.shapes&&n.shapes[0]&&n.shapes[0].type,n.labels&&n.labels[0]&&n.labels[0].itemType,"label"),d=t.annotationsNonEditable[n.langKey]||[],f={langKey:n.langKey,type:h};function v(option,t,n,e){var h;n&&option&&-1===d.indexOf(t)&&((n.indexOf&&n.indexOf(t))>=0||n[t]||!0===n)&&(m(option)?(e[t]=[],option.forEach((function(o,i){C(o)?(e[t][i]={},k(o,(function(o,n){v(o,n,r[t],e[t][i])}))):v(o,0,r[t],e[t])}))):C(option)?(h={},m(e)?(e.push(h),h[t]={},h=h[t]):e[t]=h,k(option,(function(o,e){v(o,e,0===t?n:r[t],h)}))):"format"===t?e[t]=[c(option,o.labels[0].points[0]).toString(),"text"]:m(e)?e.push([option,l(option)]):e[t]=[option,l(option)])}return k(n,(function(option,t){"typeOptions"===t?(f[t]={},k(n[t],(function(o,n){v(o,n,r,f[t])}))):v(option,t,e[h],f)})),f},t.prototype.getClickedClassNames=function(t,o){for(var n,element=o.target,e=[];element;)if((n=v(element,"class"))&&(e=e.concat(n.split(" ").map((function(t){return[t,element]})))),(element=element.parentNode)===t)return e;return e},t.prototype.getButtonEvents=function(t,o){var n,e=this;return this.getClickedClassNames(t,o).forEach((function(t){e.boundClassNames[t[0]]&&!n&&(n={events:e.boundClassNames[t[0]],button:t[1]})})),n},t.prototype.update=function(t){this.options=P(!0,this.options,t),this.removeEvents(),this.initEvents()},t.prototype.removeEvents=function(){this.eventsToUnbind.forEach((function(t){t()}))},t.prototype.destroy=function(){this.removeEvents()},t.annotationsEditable={nestedOptions:{labelOptions:["style","format","backgroundColor"],labels:["style"],label:["style"],style:["fontSize","color"],background:["fill","strokeWidth","stroke"],innerBackground:["fill","strokeWidth","stroke"],outerBackground:["fill","strokeWidth","stroke"],shapeOptions:["fill","strokeWidth","stroke"],shapes:["fill","strokeWidth","stroke"],line:["strokeWidth","stroke"],backgroundColors:[!0],connector:["fill","strokeWidth","stroke"],crosshairX:["strokeWidth","stroke"],crosshairY:["strokeWidth","stroke"]},circle:["shapes"],ellipse:["shapes"],verticalLine:[],label:["labelOptions"],measure:["background","crosshairY","crosshairX"],fibonacci:[],tunnel:["background","line","height"],pitchfork:["innerBackground","outerBackground"],rect:["shapes"],crookedLine:[],basicAnnotation:["shapes","labelOptions"]},t.annotationsNonEditable={rectangle:["crosshairX","crosshairY","labelOptions"],ellipse:["labelOptions"],circle:["labelOptions"]},t}();function N(t){var o=t.prototype.defaultOptions.events&&t.prototype.defaultOptions.events.click;P(!0,t.prototype.defaultOptions.events,{click:function(t){var n=this,e=n.chart.navigationBindings,r=e.activeAnnotation;o&&o.call(n,t),r!==n?(e.deselectAnnotation(),e.activeAnnotation=n,n.setControlPointsVisibility(!0),y(e,"showPopup",{annotation:n,formType:"annotation-toolbar",options:e.annotationToFields(n),onSubmit:function(data){var t,o={};"remove"===data.actionType?(e.activeAnnotation=!1,e.chart.removeAnnotation(n)):(e.fieldsToOptions(data.fields,o),e.deselectAnnotation(),t=o.typeOptions,"measure"===n.options.type&&(t.crosshairY.enabled=0!==t.crosshairY.strokeWidth,t.crosshairX.enabled=0!==t.crosshairX.strokeWidth),n.update(o))}})):y(e,"closePopup"),t.activeAnnotation=!0}})}return T.prototype.utils=B,o.prototype.initNavigationBindings=function(){var t=this,o=t.options;o&&o.navigation&&o.navigation.bindings&&(t.navigationBindings=new T(t,o.navigation),t.navigationBindings.initEvents(),t.navigationBindings.initUpdate())},f(o,"load",(function(){this.initNavigationBindings()})),f(o,"destroy",(function(){this.navigationBindings&&this.navigationBindings.destroy()})),f(T,"deselectButton",(function(){this.selectedButtonElement=null})),f(t,"remove",(function(){this.chart.navigationBindings&&this.chart.navigationBindings.deselectAnnotation()})),r.Annotation&&(N(t),k(t.types,(function(t){N(t)}))),d({lang:{navigation:{popup:{simpleShapes:"Simple shapes",lines:"Lines",circle:"Circle",ellipse:"Ellipse",rectangle:"Rectangle",label:"Label",shapeOptions:"Shape options",typeOptions:"Details",fill:"Fill",format:"Text",strokeWidth:"Line width",stroke:"Line color",title:"Title",name:"Name",labelOptions:"Label options",labels:"Labels",backgroundColor:"Background color",backgroundColors:"Background colors",borderColor:"Border color",borderRadius:"Border radius",borderWidth:"Border width",style:"Style",padding:"Padding",fontSize:"Font size",color:"Color",height:"Height",shapes:"Shape options"}}},navigation:{bindingsClassName:"highcharts-bindings-container",bindings:{circleAnnotation:{className:"highcharts-circle-annotation",start:function(t){var o=this.chart.pointer.getCoordinates(t),n=this.utils.getAssignedAxis(o.xAxis),e=this.utils.getAssignedAxis(o.yAxis),r=this.chart.options.navigation;if(n&&e)return this.chart.addAnnotation(P({langKey:"circle",type:"basicAnnotation",shapes:[{type:"circle",point:{x:n.value,y:e.value,xAxis:n.axis.options.index,yAxis:e.axis.options.index},r:5}]},r.annotationsOptions,r.bindings.circleAnnotation.annotationsOptions))},steps:[function(t,o){var n,e=o.options.shapes[0].point;if(A(e.xAxis)&&A(e.yAxis)){var r=this.chart.inverted,l=this.chart.xAxis[e.xAxis].toPixels(e.x),h=this.chart.yAxis[e.yAxis].toPixels(e.y);n=Math.max(Math.sqrt(Math.pow(r?h-t.chartX:l-t.chartX,2)+Math.pow(r?l-t.chartY:h-t.chartY,2)),5)}o.update({shapes:[{r:n}]})}]},ellipseAnnotation:{className:"highcharts-ellipse-annotation",start:function(t){var o=this.chart.pointer.getCoordinates(t),n=this.utils.getAssignedAxis(o.xAxis),e=this.utils.getAssignedAxis(o.yAxis),r=this.chart.options.navigation;if(n&&e)return this.chart.addAnnotation(P({langKey:"ellipse",type:"basicAnnotation",shapes:[{type:"ellipse",xAxis:n.axis.options.index,yAxis:e.axis.options.index,points:[{x:n.value,y:e.value},{x:n.value,y:e.value}],ry:1}]},r.annotationsOptions,r.bindings.ellipseAnnotation.annotationOptions))},steps:[function(t,o){var n=o.shapes[0],e=n.getAbsolutePosition(n.points[1]);n.translatePoint(t.chartX-e.x,t.chartY-e.y,1),n.redraw(!1)},function(t,o){var n=o.shapes[0],e=n.getAbsolutePosition(n.points[0]),r=n.getAbsolutePosition(n.points[1]),l=n.getDistanceFromLine(e,r,t.chartX,t.chartY),h=n.getYAxis(),c=Math.abs(h.toValue(0)-h.toValue(l));n.setYRadius(c),n.redraw(!1)}]},rectangleAnnotation:{className:"highcharts-rectangle-annotation",start:function(t){var o=this.chart.pointer.getCoordinates(t),n=this.utils.getAssignedAxis(o.xAxis),e=this.utils.getAssignedAxis(o.yAxis);if(n&&e){var r=n.value,l=e.value,h=n.axis.options.index,c=e.axis.options.index,d=this.chart.options.navigation;return this.chart.addAnnotation(P({langKey:"rectangle",type:"basicAnnotation",shapes:[{type:"path",points:[{xAxis:h,yAxis:c,x:r,y:l},{xAxis:h,yAxis:c,x:r,y:l},{xAxis:h,yAxis:c,x:r,y:l},{xAxis:h,yAxis:c,x:r,y:l},{command:"Z"}]}]},d.annotationsOptions,d.bindings.rectangleAnnotation.annotationsOptions))}},steps:[function(t,o){var n,e,r=o.options.shapes[0].points,l=this.chart.pointer.getCoordinates(t),h=this.utils.getAssignedAxis(l.xAxis),c=this.utils.getAssignedAxis(l.yAxis);h&&c&&(n=h.value,e=c.value,r[1].x=n,r[2].x=n,r[2].y=e,r[3].y=e,o.update({shapes:[{points:r}]}))}]},labelAnnotation:{className:"highcharts-label-annotation",start:function(t){var o=this.chart.pointer.getCoordinates(t),n=this.utils.getAssignedAxis(o.xAxis),e=this.utils.getAssignedAxis(o.yAxis),r=this.chart.options.navigation;if(n&&e)return this.chart.addAnnotation(P({langKey:"label",type:"basicAnnotation",labelOptions:{format:"{y:.2f}"},labels:[{point:{xAxis:n.axis.options.index,yAxis:e.axis.options.index,x:n.value,y:e.value},overflow:"none",crop:!0}]},r.annotationsOptions,r.bindings.labelAnnotation.annotationsOptions))}}},events:{},annotationsOptions:{animation:{defer:0}}}}),f(o,"render",(function(){var t=this,o=t.navigationBindings,n="highcharts-disabled-btn";if(t&&o){var e=!1;t.series.forEach((function(t){!t.options.isInternal&&t.visible&&(e=!0)})),k(o.boundClassNames,(function(o,r){if(t.navigationBindings&&t.navigationBindings.container&&t.navigationBindings.container[0]){var l=t.navigationBindings.container[0].querySelectorAll("."+r);if(l)for(var i=0;i<l.length;i++){var button=l[i],h=button.className;"normal"===o.noDataState||e?-1!==h.indexOf(n)&&button.classList.remove(n):-1===h.indexOf(n)&&(button.className+=" "+n)}}}))}})),f(T,"closePopup",(function(){this.deselectAnnotation()})),T})),n(o,"Extensions/Annotations/Popup.js",[o["Core/Renderer/HTML/AST.js"],o["Core/Globals.js"],o["Extensions/Annotations/NavigationBindings.js"],o["Core/DefaultOptions.js"],o["Core/Pointer.js"],o["Core/Utilities.js"]],(function(t,o,n,e,r,l){var h,c=o.doc,d=o.isFirefox,f=e.getOptions,v=l.addEvent,y=l.createElement,m=l.defined,x=l.fireEvent,A=l.isArray,C=l.isObject,P=l.objectEach,k=l.pick,E=l.stableSort,w=l.wrap,O=/\d/g,M="highcharts-",B="div",T="input",N="label",j="select",S="option",D="span";!function(t){t[t["params.algorithm"]=0]="params.algorithm",t[t["params.average"]=1]="params.average"}(h||(h={}));var I={"algorithm-pivotpoints":["standard","fibonacci","camarilla"],"average-disparityindex":["sma","ema","dema","tema","wma"]};return w(r.prototype,"onContainerMouseDown",(function(t,o){this.inClass(o.target,M+"popup")||t.apply(this,Array.prototype.slice.call(arguments,1))})),o.Popup=function(t,o,n){this.init(t,o,n)},o.Popup.prototype={init:function(t,n,e){this.chart=e,this.container=y(B,{className:M+"popup highcharts-no-tooltip"},void 0,t),v(this.container,"mousedown",(function(){var t=e&&e.navigationBindings&&e.navigationBindings.activeAnnotation;if(t){t.cancelClick=!0;var n=v(o.doc,"click",(function(){setTimeout((function(){t.cancelClick=!1}),0),n()}))}})),this.lang=this.getLangpack(),this.iconsURL=n,this.addCloseBtn()},addCloseBtn:function(){var t,o=this,n=this.iconsURL;(t=y(B,{className:M+"popup-close"},void 0,this.container)).style["background-image"]="url("+(n.match(/png|svg|jpeg|jpg|gif/gi)?n:n+"close.svg")+")",["click","touchstart"].forEach((function(n){v(t,n,(function(){o.chart?x(o.chart.navigationBindings,"closePopup"):o.closePopup()}))}))},addColsContainer:function(t){var o,n;return n=y(B,{className:M+"popup-lhs-col"},void 0,t),o=y(B,{className:M+"popup-rhs-col"},void 0,t),y(B,{className:M+"popup-rhs-col-wrapper"},void 0,o),{lhsCol:n,rhsCol:o}},addInput:function(option,t,o,n){var input,e=option.split("."),r=e[e.length-1],l=this.lang,h=M+t+"-"+k(n.htmlFor,r);return h.match(O)||y(N,{htmlFor:h,className:n.labelClassName},void 0,o).appendChild(c.createTextNode(l[r]||r)),(input=y(T,{name:h,value:n.value,type:n.type,className:M+"popup-field"},void 0,o)).setAttribute(M+"data-name",option),input},addButton:function(t,label,o,n,e){var button,r=this,l=this.closePopup,h=this.getFields;return(button=y("button",void 0,void 0,t)).appendChild(c.createTextNode(label)),e&&["click","touchstart"].forEach((function(t){v(button,t,(function(){return l.call(r),e(h(n,o))}))})),button},getFields:function(t,o){var n,e=Array.prototype.slice.call(t.querySelectorAll(T)),r=Array.prototype.slice.call(t.querySelectorAll(j)),l=t.querySelectorAll("#highcharts-select-series > option:checked")[0],h=t.querySelectorAll("#highcharts-select-volume > option:checked")[0];return n={actionType:o,linkedTo:l&&l.getAttribute("value")||"",fields:{}},e.forEach((function(input){var param=input.getAttribute(M+"data-name");input.getAttribute(M+"data-series-id")?n.seriesId=input.value:param?n.fields[param]=input.value:n.type=input.value})),r.forEach((function(select){var t=select.id;if(t!==M+"select-series"&&t!==M+"select-volume"){var o=t.split("highcharts-select-")[1];n.fields[o]=select.value}})),h&&(n.fields["params.volumeSeriesID"]=h.getAttribute("value")||""),n},showPopup:function(){var o=this.container,n=M+"annotation-toolbar",e=o.querySelectorAll("."+M+"popup-close")[0];this.formType=void 0,o.innerHTML=t.emptyHTML,o.className.indexOf(n)>=0&&(o.classList.remove(n),o.removeAttribute("style")),o.appendChild(e),o.style.display="block",o.style.height=""},closePopup:function(){k(this.popup&&this.popup.container,this.container).style.display="none"},showForm:function(t,o,n,e){o&&(this.popup=o.navigationBindings.popup,this.showPopup(),"indicators"===t&&this.indicators.addForm.call(this,o,n,e),"annotation-toolbar"===t&&this.annotations.addToolbar.call(this,o,n,e),"annotation-edit"===t&&this.annotations.addForm.call(this,o,n,e),"flag"===t&&this.annotations.addForm.call(this,o,n,e,!0),this.formType=t,this.container.style.height=this.container.offsetHeight+"px")},getLangpack:function(){return f().lang.navigation.popup},annotations:{addToolbar:function(t,o,n){var button,e=this,r=this.lang,l=this.popup.container,h=this.showForm,d=M+"annotation-toolbar";-1===l.className.indexOf(d)&&(l.className+=" "+d),t&&(l.style.top=t.plotTop+10+"px"),y(D,void 0,void 0,l).appendChild(c.createTextNode(k(r[o.langKey]||o.langKey,o.shapes&&o.shapes[0].type))),(button=this.addButton(l,r.removeButton||"remove","remove",l,n)).className+=" "+M+"annotation-remove-button",button.style["background-image"]="url("+this.iconsURL+"destroy.svg)",(button=this.addButton(l,r.editButton||"edit","edit",l,(function(){h.call(e,"annotation-edit",t,o,n)}))).className+=" "+M+"annotation-edit-button",button.style["background-image"]="url("+this.iconsURL+"edit.svg)"},addForm:function(t,o,n,e){var r,l,h=this.popup.container,d=this.lang;t&&((l=y("h2",{className:M+"popup-main-title"},void 0,h)).appendChild(c.createTextNode(d[o.langKey]||o.langKey||"")),l=y(B,{className:M+"popup-lhs-col "+M+"popup-lhs-full"},void 0,h),r=y(B,{className:M+"popup-bottom-row"},void 0,h),this.annotations.addFormFields.call(this,l,t,"",o,[],!0),this.addButton(r,e?d.addButton||"add":d.saveButton||"save",e?"add":"save",h,n))},addFormFields:function(t,o,n,e,r,l){var h,f,v=this,m=this.annotations.addFormFields,x=this.addInput,k=this.lang;o&&(P(e,(function(e,option){h=""!==n?n+"."+option:option,C(e)&&(!A(e)||A(e)&&C(e[0])?((f=k[option]||option).match(O)||r.push([!0,f,t]),m.call(v,t,o,h,e,r,!1)):r.push([v,h,"annotation",t,e]))})),l&&(E(r,(function(a){return a[1].match(/format/g)?-1:1})),d&&r.reverse(),r.forEach((function(t){!0===t[0]?y(D,{className:M+"annotation-title"},void 0,t[2]).appendChild(c.createTextNode(t[1])):(t[4]={value:t[4][0],type:t[4][1]},x.apply(t[0],t.splice(1)))}))))}},indicators:{addForm:function(t,o,n){var e,r,l=this.indicators,h=this.lang;t&&(this.tabs.init.call(this,t),e=this.popup.container.querySelectorAll("."+M+"tab-item-content"),this.addColsContainer(e[0]),l.addSearchBox.call(this,t,e[0]),l.addIndicatorList.call(this,t,e[0],"add"),r=e[0].querySelectorAll("."+M+"popup-rhs-col")[0],this.addButton(r,h.addButton||"add","add",r,n),this.addColsContainer(e[1]),l.addIndicatorList.call(this,t,e[1],"edit"),r=e[1].querySelectorAll("."+M+"popup-rhs-col")[0],this.addButton(r,h.saveButton||"save","edit",r,n),this.addButton(r,h.removeButton||"remove","remove",r,n))},filterSeries:function(t,filter){var o,n=this,e=n.indicators,r=n.chart&&n.chart.options.lang,l=r&&r.navigation&&r.navigation.popup&&r.navigation.popup.indicatorAliases,h=[];return P(t,(function(t,n){var r=t.options;if(t.params||r&&r.params){var c=e.getNameType(t,n),d=c.indicatorFullName,f=c.indicatorType;if(filter){var v=filter.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),y=new RegExp(v,"i"),m=l&&l[f]&&l[f].join(" ")||"";(d.match(y)||m.match(y))&&(o={indicatorFullName:d,indicatorType:f,series:t},h.push(o))}else o={indicatorFullName:d,indicatorType:f,series:t},h.push(o)}})),h},filterSeriesArray:function(t){var o,n=[];return t.forEach((function(t){t.options,t.is("sma")&&(o={indicatorFullName:t.name,indicatorType:t.type,series:t},n.push(o))})),n},addIndicatorList:function(o,n,e,filter){var r=this,l=r.indicators,h=r.lang,d=n.querySelectorAll("."+M+"popup-lhs-col")[0],f=n.querySelectorAll("."+M+"popup-rhs-col")[0],m="edit"===e,x=this.indicators.addFormFields,C=m?o.series:o.options.plotOptions||{};if(o||!C){var P,k,w,O=[];m||A(C)?A(C)&&(O=l.filterSeriesArray.call(this,C)):O=l.filterSeries.call(this,C,filter),E(O,(function(a,b){var t=a.indicatorFullName.toLowerCase(),o=b.indicatorFullName.toLowerCase();return t<o?-1:t>o?1:0})),d.children[1]&&d.children[1].remove(),k=y("ul",{className:M+"indicator-list"},void 0,d),P=f.querySelectorAll("."+M+"popup-rhs-col-wrapper")[0],O.forEach((function(t){var n=t.indicatorFullName,e=t.indicatorType,l=t.series;(w=y("li",{className:M+"indicator-list"},void 0,k)).appendChild(c.createTextNode(n)),["click","touchstart"].forEach((function(t){v(w,t,(function(){var button=P.parentNode.children[1];x.call(r,o,l,e,P),button&&(button.style.display="block"),m&&l.options&&y(T,{type:"hidden",name:M+"id-"+e,value:l.options.id},void 0,P).setAttribute(M+"data-series-id",l.options.id)}))}))})),k.childNodes.length>0?k.childNodes[0].click():m||(t.setElementHTML(P.parentNode.children[0],h.noFilterMatch||""),P.parentNode.children[1].style.display="none")}},addSearchBox:function(t,o){var n=this,e=o.querySelectorAll("."+M+"popup-lhs-col")[0],r=this.lang.clearFilter,l=y(B,{className:"highcharts-input-wrapper"},void 0,e),h=function(o){n.indicators.addIndicatorList.call(n,t,n.container,"add",o)},input=this.addInput("searchIndicators",T,l,{value:"",type:"text",htmlFor:"search-indicators",labelClassName:"highcharts-input-search-indicators-label"}),button=y("a",{textContent:r},void 0,l);input.classList.add("highcharts-input-search-indicators"),button.classList.add("clear-filter-button"),v(input,"input",(function(t){h(this.value),this.value.length?button.style.display="inline-block":button.style.display="none"})),["click","touchstart"].forEach((function(t){v(button,t,(function(){input.value="",h(""),button.style.display="none"}))}))},addSelection:function(t,o,n){var e,r=o.split("."),l=r[r.length-1],h=M+o+"-type-"+t,d=this.lang;return y(N,{htmlFor:h},null,n).appendChild(c.createTextNode(d[l]||o)),(e=y(j,{name:h,className:M+"popup-field",id:M+"select-"+o},null,n)).setAttribute("id",M+"select-"+o),e},addSelectionOptions:function(t,o,n,e,r,l,h){"series"===o||"volume"===o?t.series.forEach((function(t){var e=t.options,r=e.name||e.params?t.name:e.id||"";e.id!==M+"navigator-series"&&e.id!==(h&&h.options&&h.options.id)&&(m(l)||"volume"!==o||"column"!==t.type||(l=e.id),y(S,{value:e.id},void 0,n).appendChild(c.createTextNode(r)))})):e&&r&&I[r+"-"+e].forEach((function(element){y(S,{value:element},void 0,n).appendChild(c.createTextNode(element))})),m(l)&&(n.value=l)},getNameType:function(t,n){var e=t.options,r=o.seriesTypes,l=r[n]&&r[n].prototype.nameBase||n.toUpperCase(),h=n;return e&&e.type&&(h=t.options.type,l=t.name),{indicatorFullName:l,indicatorType:h}},listAllSeries:function(t,o,n,e,r,l){var h=this,c=h.indicators;if(n){var d=c.addSelection.call(h,t,o,e);c.addSelectionOptions.call(h,n,o,d,void 0,void 0,void 0,r),m(l)&&(d.value=l)}},addFormFields:function(o,n,e,r){var l=n.params||n.options.params,h=this.indicators.getNameType;r.innerHTML=t.emptyHTML,y("h3",{className:M+"indicator-title"},void 0,r).appendChild(c.createTextNode(h(n,e).indicatorFullName)),y(T,{type:"hidden",name:M+"type-"+e,value:e},void 0,r),this.indicators.listAllSeries.call(this,e,"series",o,r,n,n.linkedParent&&n.linkedParent.options.id),l.volumeSeriesID&&this.indicators.listAllSeries.call(this,e,"volume",o,r,n,n.linkedParent&&l.volumeSeriesID),this.indicators.addParamInputs.call(this,o,"params",l,e,r)},addParamInputs:function(t,o,n,e,r){var l,c=this,d=c.indicators,f=this.indicators.addParamInputs,v=this.addInput;t&&P(n,(function(n,y){if(l=o+"."+y,m(n)&&l)if(C(n)&&(v.call(c,l,e,r,{}),f.call(c,t,l,n,e,r)),l in h){var x=d.addSelection.call(c,e,l,r);d.addSelectionOptions.call(c,t,o,x,e,y,n)}else"params.volumeSeriesID"===l||A(n)||v.call(c,l,e,r,{value:n,type:"text"})}))},getAmount:function(){var t=this.series,o=0;return t.forEach((function(t){var n=t.options;(t.params||n&&n.params)&&o++})),o}},tabs:{init:function(t){var o,n=this.tabs,e=this.indicators.getAmount.call(t);t&&(o=n.addMenuItem.call(this,"add"),n.addMenuItem.call(this,"edit",e),n.addContentItem.call(this,"add"),n.addContentItem.call(this,"edit"),n.switchTabs.call(this,e),n.selectTab.call(this,o,0))},addMenuItem:function(t,o){var n,e=this.popup.container,r=M+"tab-item",l=this.lang;return 0===o&&(r+=" "+M+"tab-disabled"),(n=y(D,{className:r},void 0,e)).appendChild(c.createTextNode(l[t+"Button"]||t)),n.setAttribute(M+"data-tab-type",t),n},addContentItem:function(){var t=this.popup.container;return y(B,{className:M+"tab-item-content "+M+"no-mousewheel"},void 0,t)},switchTabs:function(t){var o=this;this.popup.container.querySelectorAll("."+M+"tab-item").forEach((function(n,i){"edit"===n.getAttribute(M+"data-tab-type")&&0===t||["click","touchstart"].forEach((function(t){v(n,t,(function(){o.tabs.deselectAll.call(o),o.tabs.selectTab.call(o,this,i)}))}))}))},selectTab:function(t,o){var n=this.popup.container.querySelectorAll("."+M+"tab-item-content");t.className+=" "+M+"tab-item-active",n[o].className+=" "+M+"tab-item-show"},deselectAll:function(){var i,t=this.popup.container,o=t.querySelectorAll("."+M+"tab-item"),n=t.querySelectorAll("."+M+"tab-item-content");for(i=0;i<o.length;i++)o[i].classList.remove(M+"tab-item-active"),n[i].classList.remove(M+"tab-item-show")}}},v(n,"showPopup",(function(t){this.popup||(this.popup=new o.Popup(this.chart.container,this.chart.options.navigation.iconsURL||this.chart.options.stockTools&&this.chart.options.stockTools.gui.iconsURL||"https://code.highcharts.com/9.3.2/gfx/stock-icons/",this.chart)),this.popup.showForm(t.formType,this.chart,t.options,t.onSubmit)})),v(n,"closePopup",(function(){this.popup&&this.popup.closePopup()})),o.Popup})),n(o,"masters/modules/annotations.src.js",[],(function(){}))},t.exports?(l.default=l,t.exports=l):(e=[n(131)],void 0===(r=function(t){return l(t),l.Highcharts=t,l}.apply(o,e))||(t.exports=r))}}]);