/*! For license information please see LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[125],{346:function(t,o,n){"use strict";var e,r,l;l=function(t){var o=t?t._modules:{};function n(t,path,o,n){t.hasOwnProperty(path)||(t[path]=n.apply(null,o))}n(o,"Extensions/Annotations/Mixins/EventEmitterMixin.js",[o["Core/Globals.js"],o["Core/Utilities.js"]],(function(t,o){var n=o.addEvent,e=o.fireEvent,r=o.objectEach,l=o.pick,h=o.removeEvent;return{addEvents:function(){var o=this,l=function(element){n(element,t.isTouchDevice?"touchstart":"mousedown",(function(t){o.onMouseDown(t)}),{passive:!1})};if(l(this.graphic.element),(o.labels||[]).forEach((function(label){label.options.useHTML&&label.graphic.text&&l(label.graphic.text.element)})),r(o.options.events,(function(t,e){var r=function(n){"click"===e&&o.cancelClick||t.call(o,o.chart.pointer.normalize(n),o.target)};-1===(o.nonDOMEvents||[]).indexOf(e)?o.graphic.on(e,r):n(o,e,r,{passive:!1})})),o.options.draggable&&(n(o,"drag",o.onDrag),!o.graphic.renderer.styledMode)){var h={cursor:{x:"ew-resize",y:"ns-resize",xy:"move"}[o.options.draggable]};o.graphic.css(h),(o.labels||[]).forEach((function(label){label.options.useHTML&&label.graphic.text&&label.graphic.text.css(h)}))}o.isUpdating||e(o,"add")},removeDocEvents:function(){this.removeDrag&&(this.removeDrag=this.removeDrag()),this.removeMouseUp&&(this.removeMouseUp=this.removeMouseUp())},onMouseDown:function(o){var r,h,c=this,d=c.chart.pointer;o.preventDefault&&o.preventDefault(),2!==o.button&&(o=d.normalize(o),r=o.chartX,h=o.chartY,c.cancelClick=!1,c.chart.hasDraggedAnnotation=!0,c.removeDrag=n(t.doc,t.isTouchDevice?"touchmove":"mousemove",(function(t){c.hasDragged=!0,(t=d.normalize(t)).prevChartX=r,t.prevChartY=h,e(c,"drag",t),r=t.chartX,h=t.chartY}),t.isTouchDevice?{passive:!1}:void 0),c.removeMouseUp=n(t.doc,t.isTouchDevice?"touchend":"mouseup",(function(t){var o=l(c.target&&c.target.annotation,c.target);o&&(o.cancelClick=c.hasDragged),c.cancelClick=c.hasDragged,c.hasDragged=!1,c.chart.hasDraggedAnnotation=!1,e(l(o,c),"afterUpdate"),c.onMouseUp(t)}),t.isTouchDevice?{passive:!1}:void 0))},onMouseUp:function(t){var o=this.chart,n=this.target||this,e=o.options.annotations,r=o.annotations.indexOf(n);this.removeDocEvents(),e[r]=n.options},onDrag:function(t){if(this.chart.isInsidePlot(t.chartX-this.chart.plotLeft,t.chartY-this.chart.plotTop,{visiblePlotOnly:!0})){var o=this.mouseMoveToTranslation(t);"x"===this.options.draggable&&(o.y=0),"y"===this.options.draggable&&(o.x=0),this.points.length?this.translate(o.x,o.y):(this.shapes.forEach((function(t){t.translate(o.x,o.y)})),this.labels.forEach((function(label){label.translate(o.x,o.y)}))),this.redraw(!1)}},mouseMoveToRadians:function(t,o,n){var e,r=t.prevChartY-n,l=t.prevChartX-o,h=t.chartY-n,c=t.chartX-o;return this.chart.inverted&&(e=l,l=r,r=e,e=c,c=h,h=e),Math.atan2(h,c)-Math.atan2(r,l)},mouseMoveToTranslation:function(t){var o,n=t.chartX-t.prevChartX,e=t.chartY-t.prevChartY;return this.chart.inverted&&(o=e,e=n,n=o),{x:n,y:e}},mouseMoveToScale:function(t,o,n){var e,r=t.prevChartX-o,l=t.prevChartY-n,h=(t.chartX-o||1)/(r||1),c=(t.chartY-n||1)/(l||1);return this.chart.inverted&&(e=c,c=h,h=e),{x:h,y:c}},destroy:function(){this.removeDocEvents(),h(this),this.hcEvents=null}}})),n(o,"Extensions/Annotations/ControlPoint.js",[o["Core/Utilities.js"],o["Extensions/Annotations/Mixins/EventEmitterMixin.js"]],(function(t,o){var n=t.merge,e=t.pick;return function(){function t(t,n,r,l){this.addEvents=o.addEvents,this.graphic=void 0,this.mouseMoveToRadians=o.mouseMoveToRadians,this.mouseMoveToScale=o.mouseMoveToScale,this.mouseMoveToTranslation=o.mouseMoveToTranslation,this.onDrag=o.onDrag,this.onMouseDown=o.onMouseDown,this.onMouseUp=o.onMouseUp,this.removeDocEvents=o.removeDocEvents,this.nonDOMEvents=["drag"],this.chart=t,this.target=n,this.options=r,this.index=e(r.index,l)}return t.prototype.setVisibility=function(t){this.graphic.attr("visibility",t?"visible":"hidden"),this.options.visible=t},t.prototype.render=function(){var t=this.chart,o=this.options;this.graphic=t.renderer.symbol(o.symbol,0,0,o.width,o.height).add(t.controlPointsGroup).css(o.style),this.setVisibility(o.visible),this.addEvents()},t.prototype.redraw=function(t){this.graphic[t?"animate":"attr"](this.options.positioner.call(this,this.target))},t.prototype.destroy=function(){o.destroy.call(this),this.graphic&&(this.graphic=this.graphic.destroy()),this.chart=null,this.target=null,this.options=null},t.prototype.update=function(t){var o=this.chart,e=this.target,r=this.index,l=n(!0,this.options,t);this.destroy(),this.constructor(o,e,l,r),this.render(o.controlPointsGroup),this.redraw()},t}()})),n(o,"Extensions/Annotations/MockPoint.js",[o["Core/Series/Series.js"],o["Core/Utilities.js"],o["Core/Axis/Axis.js"]],(function(t,o,n){var e=o.defined,r=(o.extend,o.fireEvent);return function(){function o(o,n,e){this.isInside=void 0,this.negative=void 0,this.plotX=void 0,this.plotY=void 0,this.ttBelow=void 0,this.x=void 0,this.y=void 0,this.mock=!0,this.series={visible:!0,chart:o,getPlotBox:t.prototype.getPlotBox},this.target=n||null,this.options=e,this.applyOptions(this.getOptions())}return o.fromPoint=function(t){return new o(t.series.chart,null,{x:t.x,y:t.y,xAxis:t.series.xAxis,yAxis:t.series.yAxis})},o.pointToPixels=function(t,o){var n,e=t.series,r=e.chart,l=t.plotX,h=t.plotY;return r.inverted&&(t.mock?(l=t.plotY,h=t.plotX):(l=r.plotWidth-t.plotY,h=r.plotHeight-t.plotX)),e&&!o&&(l+=(n=e.getPlotBox()).translateX,h+=n.translateY),{x:l,y:h}},o.pointToOptions=function(t){return{x:t.x,y:t.y,xAxis:t.series.xAxis,yAxis:t.series.yAxis}},o.prototype.hasDynamicOptions=function(){return"function"==typeof this.options},o.prototype.getOptions=function(){return this.hasDynamicOptions()?this.options(this.target):this.options},o.prototype.applyOptions=function(t){this.command=t.command,this.setAxis(t,"x"),this.setAxis(t,"y"),this.refresh()},o.prototype.setAxis=function(t,o){var r=o+"Axis",l=t[r],h=this.series.chart;this.series[r]=l instanceof n?l:e(l)?h[r][l]||h.get(l):null},o.prototype.toAnchor=function(){var t=[this.plotX,this.plotY,0,0];return this.series.chart.inverted&&(t[0]=this.plotY,t[1]=this.plotX),t},o.prototype.getLabelConfig=function(){return{x:this.x,y:this.y,point:this}},o.prototype.isInsidePlot=function(){var t=this.plotX,o=this.plotY,n=this.series.xAxis,l=this.series.yAxis,h={x:t,y:o,isInsidePlot:!0};return n&&(h.isInsidePlot=e(t)&&t>=0&&t<=n.len),l&&(h.isInsidePlot=h.isInsidePlot&&e(o)&&o>=0&&o<=l.len),r(this.series.chart,"afterIsInsidePlot",h),h.isInsidePlot},o.prototype.refresh=function(){var t=this.series,o=t.xAxis,n=t.yAxis,e=this.getOptions();o?(this.x=e.x,this.plotX=o.toPixels(e.x,!0)):(this.x=null,this.plotX=e.x),n?(this.y=e.y,this.plotY=n.toPixels(e.y,!0)):(this.y=null,this.plotY=e.y),this.isInside=this.isInsidePlot()},o.prototype.translate=function(t,o,n,e){this.hasDynamicOptions()||(this.plotX+=n,this.plotY+=e,this.refreshOptions())},o.prototype.scale=function(t,o,n,e){if(!this.hasDynamicOptions()){var r=this.plotX*n,l=this.plotY*e,h=(1-n)*t,c=(1-e)*o;this.plotX=h+r,this.plotY=c+l,this.refreshOptions()}},o.prototype.rotate=function(t,o,n){if(!this.hasDynamicOptions()){var e,r,l=Math.cos(n),h=Math.sin(n),c=this.plotX,d=this.plotY;e=(c-=t)*l-(d-=o)*h,r=c*h+d*l,this.plotX=e+t,this.plotY=r+o,this.refreshOptions()}},o.prototype.refreshOptions=function(){var t=this.series,o=t.xAxis,n=t.yAxis;this.x=this.options.x=o?this.options.x=o.toValue(this.plotX,!0):this.plotX,this.y=this.options.y=n?n.toValue(this.plotY,!0):this.plotY},o}()})),n(o,"Extensions/Annotations/Mixins/ControllableMixin.js",[o["Extensions/Annotations/ControlPoint.js"],o["Extensions/Annotations/MockPoint.js"],o["Core/Tooltip.js"],o["Core/Utilities.js"]],(function(t,o,n,e){var r=e.isObject,l=e.isString,h=e.merge,c=e.splat,d={init:function(t,o,n){this.annotation=t,this.chart=t.chart,this.options=o,this.points=[],this.controlPoints=[],this.index=n,this.linkPoints(),this.addControlPoints()},attr:function(){this.graphic.attr.apply(this.graphic,arguments)},getPointsOptions:function(){var t=this.options;return t.points||t.point&&c(t.point)},attrsFromOptions:function(t){var o,n,map=this.constructor.attrsMap,e={},r=this.chart.styledMode;for(o in t)!(n=map[o])||r&&-1!==["fill","stroke","stroke-width"].indexOf(n)||(e[n]=t[o]);return e},anchor:function(t){var o=t.series.getPlotBox(),e=t.series.chart,r=t.mock?t.toAnchor():n.prototype.getAnchor.call({chart:t.series.chart},t),l={x:r[0]+(this.options.x||0),y:r[1]+(this.options.y||0),height:r[2]||0,width:r[3]||0};return{relativePosition:l,absolutePosition:h(l,{x:l.x+(t.mock?o.translateX:e.plotLeft),y:l.y+(t.mock?o.translateY:e.plotTop)})}},point:function(t,n){if(t&&t.series)return t;if(!n||null===n.series)if(r(t))n=new o(this.chart,this,t);else if(l(t))n=this.chart.get(t)||null;else if("function"==typeof t){var e=t.call(n,this);n=e.series?e:new o(this.chart,this,t)}return n},linkPoints:function(){var i,t,o=this.getPointsOptions(),n=this.points,e=o&&o.length||0;for(i=0;i<e;i++){if(!(t=this.point(o[i],n[i])))return void(n.length=0);t.mock&&t.refresh(),n[i]=t}return n},addControlPoints:function(){var o=this.options.controlPoints;(o||[]).forEach((function(n,i){var e=h(this.options.controlPointOptions,n);e.index||(e.index=i),o[i]=e,this.controlPoints.push(new t(this.chart,this,e))}),this)},shouldBeDrawn:function(){return Boolean(this.points.length)},render:function(t){this.controlPoints.forEach((function(t){t.render()}))},redraw:function(t){this.controlPoints.forEach((function(o){o.redraw(t)}))},transform:function(t,o,n,e,r){if(this.chart.inverted){var l=o;o=n,n=l}this.points.forEach((function(l,i){this.transformPoint(t,o,n,e,r,i)}),this)},transformPoint:function(t,n,e,r,l,i){var h=this.points[i];h.mock||(h=this.points[i]=o.fromPoint(h)),h[t](n,e,r,l)},translate:function(t,o){this.transform("translate",null,null,t,o)},translatePoint:function(t,o,i){this.transformPoint("translate",null,null,t,o,i)},translateShape:function(t,o,n){var e=this.annotation.chart,r=this.annotation.userOptions,l=e.annotations.indexOf(this.annotation),h=e.options.annotations[l];this.translatePoint(t,o,0),n&&this.translatePoint(t,o,1),h[this.collection][this.index].point=this.options.point,r[this.collection][this.index].point=this.options.point},rotate:function(t,o,n){this.transform("rotate",t,o,n)},scale:function(t,o,n,e){this.transform("scale",t,o,n,e)},setControlPointsVisibility:function(t){this.controlPoints.forEach((function(o){o.setVisibility(t)}))},destroy:function(){this.graphic&&(this.graphic=this.graphic.destroy()),this.tracker&&(this.tracker=this.tracker.destroy()),this.controlPoints.forEach((function(t){t.destroy()})),this.chart=null,this.points=null,this.controlPoints=null,this.options=null,this.annotation&&(this.annotation=null)},update:function(t){var o=this.annotation,n=h(!0,this.options,t),e=this.graphic.parentGroup;this.destroy(),this.constructor(o,n,this.index),this.render(e),this.redraw()}};return d})),n(o,"Extensions/Annotations/Mixins/MarkerMixin.js",[o["Core/Chart/Chart.js"],o["Core/Renderer/SVG/SVGRenderer.js"],o["Core/Utilities.js"]],(function(t,o,n){var e=n.addEvent,r=n.defined,l=n.merge,h=n.uniqueKey,c={arrow:{tagName:"marker",attributes:{id:"arrow",refY:5,refX:9,markerWidth:10,markerHeight:10},children:[{tagName:"path",attributes:{d:"M 0 0 L 10 5 L 0 10 Z","stroke-width":0}}]},"reverse-arrow":{tagName:"marker",attributes:{id:"reverse-arrow",refY:5,refX:1,markerWidth:10,markerHeight:10},children:[{tagName:"path",attributes:{d:"M 0 5 L 10 0 L 10 10 Z","stroke-width":0}}]}};function d(t){return function(o){this.attr(t,"url(#"+o+")")}}o.prototype.addMarker=function(t,o){var n={attributes:{id:t}},e={stroke:o.color||"none",fill:o.color||"rgba(0, 0, 0, 0.75)"};n.children=o.children&&o.children.map((function(t){return l(e,t)}));var r=l(!0,{attributes:{markerWidth:20,markerHeight:20,refX:0,refY:0,orient:"auto"}},o,n),marker=this.definition(r);return marker.id=t,marker};var f={markerEndSetter:d("marker-end"),markerStartSetter:d("marker-start"),setItemMarkers:function(t){var o=t.options,n=t.chart,defs=n.options.defs,e=o.fill,c=r(e)&&"none"!==e?e:o.stroke;["markerStart","markerEnd"].forEach((function(e){var r,d,f,marker,y=o[e];if(y){for(f in defs)if((y===((r=defs[f]).attributes&&r.attributes.id)||y===r.id)&&"marker"===r.tagName){d=r;break}d&&(marker=t[e]=n.renderer.addMarker((o.id||h())+"-"+y,l(d,{color:c})),t.attr(e,marker.getAttribute("id")))}}))}};return e(t,"afterGetContainer",(function(){this.options.defs=l(c,this.options.defs||{})})),f})),n(o,"Extensions/Annotations/Controllables/ControllablePath.js",[o["Extensions/Annotations/Mixins/ControllableMixin.js"],o["Core/Globals.js"],o["Extensions/Annotations/Mixins/MarkerMixin.js"],o["Core/Utilities.js"]],(function(t,o,n,e){var r=e.extend,l="rgba(192,192,192,"+(o.svg?1e-4:.002)+")";return function(){function o(o,e,r){this.addControlPoints=t.addControlPoints,this.anchor=t.anchor,this.attr=t.attr,this.attrsFromOptions=t.attrsFromOptions,this.destroy=t.destroy,this.getPointsOptions=t.getPointsOptions,this.init=t.init,this.linkPoints=t.linkPoints,this.point=t.point,this.rotate=t.rotate,this.scale=t.scale,this.setControlPointsVisibility=t.setControlPointsVisibility,this.setMarkers=n.setItemMarkers,this.transform=t.transform,this.transformPoint=t.transformPoint,this.translate=t.translate,this.translatePoint=t.translatePoint,this.translateShape=t.translateShape,this.update=t.update,this.type="path",this.init(o,e,r),this.collection="shapes"}return o.prototype.toD=function(){var t=this.options.d;if(t)return"function"==typeof t?t.call(this):t;var o,n=this.points,e=n.length,r=e,l=n[0],h=r&&this.anchor(l).absolutePosition,c=0,d=[];if(h)for(d.push(["M",h.x,h.y]);++c<e&&r;)o=(l=n[c]).command||"L",h=this.anchor(l).absolutePosition,"M"===o||"L"===o?d.push([o,h.x,h.y]):"Z"===o&&d.push([o]),r=l.series.visible;return r?this.chart.renderer.crispLine(d,this.graphic.strokeWidth()):null},o.prototype.shouldBeDrawn=function(){return t.shouldBeDrawn.call(this)||Boolean(this.options.d)},o.prototype.render=function(o){var e=this.options,h=this.attrsFromOptions(e);this.graphic=this.annotation.chart.renderer.path([["M",0,0]]).attr(h).add(o),e.className&&this.graphic.addClass(e.className),this.tracker=this.annotation.chart.renderer.path([["M",0,0]]).addClass("highcharts-tracker-line").attr({zIndex:2}).add(o),this.annotation.chart.styledMode||this.tracker.attr({"stroke-linejoin":"round",stroke:l,fill:l,"stroke-width":this.graphic.strokeWidth()+2*e.snap}),t.render.call(this),r(this.graphic,{markerStartSetter:n.markerStartSetter,markerEndSetter:n.markerEndSetter}),this.setMarkers(this)},o.prototype.redraw=function(o){var n=this.toD(),e=o?"animate":"attr";n?(this.graphic[e]({d:n}),this.tracker[e]({d:n})):(this.graphic.attr({d:"M 0 -9000000000"}),this.tracker.attr({d:"M 0 -9000000000"})),this.graphic.placed=this.tracker.placed=Boolean(n),t.redraw.call(this,o)},o.attrsMap={dashStyle:"dashstyle",strokeWidth:"stroke-width",stroke:"stroke",fill:"fill",zIndex:"zIndex"},o}()})),n(o,"Extensions/Annotations/Controllables/ControllableRect.js",[o["Extensions/Annotations/Mixins/ControllableMixin.js"],o["Extensions/Annotations/Controllables/ControllablePath.js"],o["Core/Utilities.js"]],(function(t,o,n){var e=n.merge;return function(){function n(o,n,e){this.addControlPoints=t.addControlPoints,this.anchor=t.anchor,this.attr=t.attr,this.attrsFromOptions=t.attrsFromOptions,this.destroy=t.destroy,this.getPointsOptions=t.getPointsOptions,this.init=t.init,this.linkPoints=t.linkPoints,this.point=t.point,this.rotate=t.rotate,this.scale=t.scale,this.setControlPointsVisibility=t.setControlPointsVisibility,this.shouldBeDrawn=t.shouldBeDrawn,this.transform=t.transform,this.transformPoint=t.transformPoint,this.translatePoint=t.translatePoint,this.translateShape=t.translateShape,this.update=t.update,this.type="rect",this.translate=t.translateShape,this.init(o,n,e),this.collection="shapes"}return n.prototype.render=function(o){var n=this.attrsFromOptions(this.options);this.graphic=this.annotation.chart.renderer.rect(0,-9e9,0,0).attr(n).add(o),t.render.call(this)},n.prototype.redraw=function(o){var n=this.anchor(this.points[0]).absolutePosition;n?this.graphic[o?"animate":"attr"]({x:n.x,y:n.y,width:this.options.width,height:this.options.height}):this.attr({x:0,y:-9e9}),this.graphic.placed=Boolean(n),t.redraw.call(this,o)},n.attrsMap=e(o.attrsMap,{width:"width",height:"height"}),n}()})),n(o,"Extensions/Annotations/Controllables/ControllableCircle.js",[o["Extensions/Annotations/Mixins/ControllableMixin.js"],o["Extensions/Annotations/Controllables/ControllablePath.js"],o["Core/Utilities.js"]],(function(t,o,n){var e=n.merge;return function(){function n(o,n,e){this.addControlPoints=t.addControlPoints,this.anchor=t.anchor,this.attr=t.attr,this.attrsFromOptions=t.attrsFromOptions,this.destroy=t.destroy,this.getPointsOptions=t.getPointsOptions,this.init=t.init,this.linkPoints=t.linkPoints,this.point=t.point,this.rotate=t.rotate,this.scale=t.scale,this.setControlPointsVisibility=t.setControlPointsVisibility,this.shouldBeDrawn=t.shouldBeDrawn,this.transform=t.transform,this.transformPoint=t.transformPoint,this.translatePoint=t.translatePoint,this.translateShape=t.translateShape,this.update=t.update,this.type="circle",this.translate=t.translateShape,this.init(o,n,e),this.collection="shapes"}return n.prototype.render=function(o){var n=this.attrsFromOptions(this.options);this.graphic=this.annotation.chart.renderer.circle(0,-9e9,0).attr(n).add(o),t.render.call(this)},n.prototype.redraw=function(o){var n=this.anchor(this.points[0]).absolutePosition;n?this.graphic[o?"animate":"attr"]({x:n.x,y:n.y,r:this.options.r}):this.graphic.attr({x:0,y:-9e9}),this.graphic.placed=Boolean(n),t.redraw.call(this,o)},n.prototype.setRadius=function(t){this.options.r=t},n.attrsMap=e(o.attrsMap,{r:"r"}),n}()})),n(o,"Extensions/Annotations/Controllables/ControllableEllipse.js",[o["Extensions/Annotations/Mixins/ControllableMixin.js"],o["Extensions/Annotations/Controllables/ControllablePath.js"],o["Core/Utilities.js"]],(function(t,o,n){var e=n.merge,r=n.defined;return function(){function n(o,n,e){this.addControlPoints=t.addControlPoints,this.anchor=t.anchor,this.attr=t.attr,this.attrsFromOptions=t.attrsFromOptions,this.destroy=t.destroy,this.getPointsOptions=t.getPointsOptions,this.linkPoints=t.linkPoints,this.point=t.point,this.scale=t.scale,this.setControlPointsVisibility=t.setControlPointsVisibility,this.shouldBeDrawn=t.shouldBeDrawn,this.transform=t.transform,this.translatePoint=t.translatePoint,this.transformPoint=t.transformPoint,this.type="ellipse",this.init(o,n,e),this.collection="shapes"}return n.prototype.init=function(o,n,e){r(n.yAxis)&&n.points.forEach((function(t){t.yAxis=n.yAxis})),r(n.xAxis)&&n.points.forEach((function(t){t.xAxis=n.xAxis})),t.init.call(this,o,n,e)},n.prototype.render=function(o){this.graphic=this.annotation.chart.renderer.createElement("ellipse").attr(this.attrsFromOptions(this.options)).add(o),t.render.call(this)},n.prototype.translate=function(o,n){t.translateShape.call(this,o,n,!0)},n.prototype.getDistanceFromLine=function(t,o,n,e){return Math.abs((o.y-t.y)*n-(o.x-t.x)*e+o.x*t.y-o.y*t.x)/Math.sqrt((o.y-t.y)*(o.y-t.y)+(o.x-t.x)*(o.x-t.x))},n.prototype.getAttrs=function(t,o){var n=t.x,e=t.y,r=o.x,l=o.y,h=(n+r)/2,c=(e+l)/2,d=Math.sqrt((n-r)*(n-r)/4+(e-l)*(e-l)/4),f=(l-e)/(r-n),y=180*Math.atan(f)/Math.PI;return h<n&&(y+=180),{cx:h,cy:c,rx:d,ry:this.getRY(),angle:y}},n.prototype.getRY=function(){var t=this.getYAxis();return r(t)?Math.abs(t.toPixels(this.options.ry)-t.toPixels(0)):this.options.ry},n.prototype.getYAxis=function(){var t=this.options.yAxis;return this.chart.yAxis[t]},n.prototype.getAbsolutePosition=function(t){return this.anchor(t).absolutePosition},n.prototype.redraw=function(o){var n=this.getAbsolutePosition(this.points[0]),e=this.getAbsolutePosition(this.points[1]),r=this.getAttrs(n,e);n?this.graphic[o?"animate":"attr"]({cx:r.cx,cy:r.cy,rx:r.rx,ry:r.ry,rotation:r.angle,rotationOriginX:r.cx,rotationOriginY:r.cy}):this.graphic.attr({x:0,y:-9e9}),this.graphic.placed=Boolean(n),t.redraw.call(this,o)},n.prototype.setYRadius=function(t){this.options.ry=t,this.annotation.userOptions.shapes[0].ry=t,this.annotation.options.shapes[0].ry=t},n.attrsMap=e(o.attrsMap,{ry:"ry"}),n}()})),n(o,"Extensions/Annotations/Controllables/ControllableLabel.js",[o["Extensions/Annotations/Mixins/ControllableMixin.js"],o["Core/FormatUtilities.js"],o["Extensions/Annotations/MockPoint.js"],o["Core/Renderer/SVG/SVGRenderer.js"],o["Core/Tooltip.js"],o["Core/Utilities.js"]],(function(t,o,n,e,r,l){var h=o.format,c=e.prototype.symbols,d=l.extend,f=l.isNumber,y=l.pick,x=function(){function o(o,n,e){this.addControlPoints=t.addControlPoints,this.attr=t.attr,this.attrsFromOptions=t.attrsFromOptions,this.destroy=t.destroy,this.getPointsOptions=t.getPointsOptions,this.init=t.init,this.linkPoints=t.linkPoints,this.point=t.point,this.rotate=t.rotate,this.scale=t.scale,this.setControlPointsVisibility=t.setControlPointsVisibility,this.shouldBeDrawn=t.shouldBeDrawn,this.transform=t.transform,this.transformPoint=t.transformPoint,this.translateShape=t.translateShape,this.update=t.update,this.init(o,n,e),this.collection="labels"}return o.alignedPosition=function(t,o){var n,e,r=t.align,l=t.verticalAlign,h=(o.x||0)+(t.x||0),c=(o.y||0)+(t.y||0);return"right"===r?n=1:"center"===r&&(n=2),n&&(h+=(o.width-(t.width||0))/n),"bottom"===l?e=1:"middle"===l&&(e=2),e&&(c+=(o.height-(t.height||0))/e),{x:Math.round(h),y:Math.round(c)}},o.justifiedOptions=function(t,label,o,n){var e,r=o.align,l=o.verticalAlign,h=label.box?0:label.padding||0,c=label.getBBox(),d={align:r,verticalAlign:l,x:o.x,y:o.y,width:label.width,height:label.height},f=(n.x||0)-t.plotLeft,y=(n.y||0)-t.plotTop;return(e=f+h)<0&&("right"===r?d.align="left":d.x=(d.x||0)-e),(e=f+c.width-h)>t.plotWidth&&("left"===r?d.align="right":d.x=(d.x||0)+t.plotWidth-e),(e=y+h)<0&&("bottom"===l?d.verticalAlign="top":d.y=(d.y||0)-e),(e=y+c.height-h)>t.plotHeight&&("top"===l?d.verticalAlign="bottom":d.y=(d.y||0)+t.plotHeight-e),d},o.prototype.translatePoint=function(o,n){t.translatePoint.call(this,o,n,0)},o.prototype.translate=function(t,o){var n=this.annotation.chart,e=this.annotation.userOptions,r=n.annotations.indexOf(this.annotation),l=n.options.annotations[r];if(n.inverted){var h=t;t=o,o=h}this.options.x+=t,this.options.y+=o,l[this.collection][this.index].x=this.options.x,l[this.collection][this.index].y=this.options.y,e[this.collection][this.index].x=this.options.x,e[this.collection][this.index].y=this.options.y},o.prototype.render=function(n){var e=this.options,r=this.attrsFromOptions(e),style=e.style;this.graphic=this.annotation.chart.renderer.label("",0,-9999,e.shape,null,null,e.useHTML,null,"annotation-label").attr(r).add(n),this.annotation.chart.styledMode||("contrast"===style.color&&(style.color=this.annotation.chart.renderer.getContrast(o.shapesWithoutBackground.indexOf(e.shape)>-1?"#FFFFFF":e.backgroundColor)),this.graphic.css(e.style).shadow(e.shadow)),e.className&&this.graphic.addClass(e.className),this.graphic.labelrank=e.labelrank,t.render.call(this)},o.prototype.redraw=function(o){var n=this.options,text=this.text||n.format||n.text,label=this.graphic,e=this.points[0];label.attr({text:text?h(text,e.getLabelConfig(),this.annotation.chart):n.formatter.call(e,this)});var r=this.anchor(e),l=this.position(r);l?(label.alignAttr=l,l.anchorX=r.absolutePosition.x,l.anchorY=r.absolutePosition.y,label[o?"animate":"attr"](l)):label.attr({x:0,y:-9999}),label.placed=!!l,t.redraw.call(this,o)},o.prototype.anchor=function(o){var n=t.anchor.apply(this,arguments),e=this.options.x||0,r=this.options.y||0;return n.absolutePosition.x-=e,n.absolutePosition.y-=r,n.relativePosition.x-=e,n.relativePosition.y-=r,n},o.prototype.position=function(t){var e,l,h,c,f=this.graphic,x=this.annotation.chart,v=this.points[0],m=this.options,A=t.absolutePosition,k=t.relativePosition,C=v.series.visible&&n.prototype.isInsidePlot.call(v),w=f.width,P=void 0===w?0:w,O=f.height,E=void 0===O?0:O;return C&&(m.distance?e=r.prototype.getPosition.call({chart:x,distance:y(m.distance,16)},P,E,{plotX:k.x,plotY:k.y,negative:v.negative,ttBelow:v.ttBelow,h:k.height||k.width}):m.positioner?e=m.positioner.call(this):(l={x:A.x,y:A.y,width:0,height:0},e=o.alignedPosition(d(m,{width:P,height:E}),l),"justify"===this.options.overflow&&(e=o.alignedPosition(o.justifiedOptions(x,f,m,e),l))),m.crop&&(h=e.x-x.plotLeft,c=e.y-x.plotTop,C=x.isInsidePlot(h,c)&&x.isInsidePlot(h+P,c+E))),C?e:null},o.attrsMap={backgroundColor:"fill",borderColor:"stroke",borderWidth:"stroke-width",zIndex:"zIndex",borderRadius:"r",padding:"padding"},o.shapesWithoutBackground=["connector"],o}();return c.connector=function(t,o,n,e,r){var path,l,h=r&&r.anchorX,c=r&&r.anchorY,d=n/2;return f(h)&&f(c)&&(path=[["M",h,c]],(l=o-c)<0&&(l=-e-l),l<n&&(d=h<t+n/2?l:n-l),c>o+e?path.push(["L",t+d,o+e]):c<o?path.push(["L",t+d,o]):h<t?path.push(["L",t,o+e/2]):h>t+n&&path.push(["L",t+n,o+e/2])),path||[]},x})),n(o,"Extensions/Annotations/Controllables/ControllableImage.js",[o["Extensions/Annotations/Controllables/ControllableLabel.js"],o["Extensions/Annotations/Mixins/ControllableMixin.js"]],(function(t,o){return function(){function n(t,n,e){this.addControlPoints=o.addControlPoints,this.anchor=o.anchor,this.attr=o.attr,this.attrsFromOptions=o.attrsFromOptions,this.destroy=o.destroy,this.getPointsOptions=o.getPointsOptions,this.init=o.init,this.linkPoints=o.linkPoints,this.point=o.point,this.rotate=o.rotate,this.scale=o.scale,this.setControlPointsVisibility=o.setControlPointsVisibility,this.shouldBeDrawn=o.shouldBeDrawn,this.transform=o.transform,this.transformPoint=o.transformPoint,this.translatePoint=o.translatePoint,this.translateShape=o.translateShape,this.update=o.update,this.type="image",this.translate=o.translateShape,this.init(t,n,e),this.collection="shapes"}return n.prototype.render=function(t){var n=this.attrsFromOptions(this.options),e=this.options;this.graphic=this.annotation.chart.renderer.image(e.src,0,-9e9,e.width,e.height).attr(n).add(t),this.graphic.width=e.width,this.graphic.height=e.height,o.render.call(this)},n.prototype.redraw=function(n){var e=this.anchor(this.points[0]),r=t.prototype.position.call(this,e);r?this.graphic[n?"animate":"attr"]({x:r.x,y:r.y}):this.graphic.attr({x:0,y:-9e9}),this.graphic.placed=Boolean(r),o.redraw.call(this,n)},n.attrsMap={width:"width",height:"height",zIndex:"zIndex"},n}()})),n(o,"Extensions/Annotations/Annotations.js",[o["Core/Animation/AnimationUtilities.js"],o["Core/Chart/Chart.js"],o["Extensions/Annotations/Mixins/ControllableMixin.js"],o["Extensions/Annotations/Controllables/ControllableRect.js"],o["Extensions/Annotations/Controllables/ControllableCircle.js"],o["Extensions/Annotations/Controllables/ControllableEllipse.js"],o["Extensions/Annotations/Controllables/ControllablePath.js"],o["Extensions/Annotations/Controllables/ControllableImage.js"],o["Extensions/Annotations/Controllables/ControllableLabel.js"],o["Extensions/Annotations/ControlPoint.js"],o["Extensions/Annotations/Mixins/EventEmitterMixin.js"],o["Core/Globals.js"],o["Extensions/Annotations/MockPoint.js"],o["Core/Pointer.js"],o["Core/Utilities.js"]],(function(t,o,n,e,r,l,h,c,d,f,y,x,v,m,A){var k=t.getDeferredAnimation,C=o.prototype,w=A.addEvent,P=A.defined,O=A.destroyObjectProperties,E=A.erase,T=A.extend,N=A.find,L=A.fireEvent,B=A.merge,M=A.pick,S=A.splat,I=A.wrap,Y=function(){function t(t,o){var n;this.annotation=void 0,this.coll="annotations",this.collection=void 0,this.animationConfig=void 0,this.graphic=void 0,this.group=void 0,this.labelCollector=void 0,this.labelsGroup=void 0,this.shapesGroup=void 0,this.chart=t,this.points=[],this.controlPoints=[],this.coll="annotations",this.labels=[],this.shapes=[],this.options=B(this.defaultOptions,o),this.userOptions=o,n=this.getLabelsAndShapesOptions(this.options,o),this.options.labels=n.labels,this.options.shapes=n.shapes,this.init(t,this.options)}return t.prototype.init=function(){var t=this.chart,o=this.options.animation;this.linkPoints(),this.addControlPoints(),this.addShapes(),this.addLabels(),this.setLabelCollector(),this.animationConfig=k(t,o)},t.prototype.getLabelsAndShapesOptions=function(t,o){var n={};return["labels","shapes"].forEach((function(e){t[e]&&(o[e]?n[e]=S(o[e]).map((function(o,i){return B(t[e][i],o)})):n[e]=t[e])})),n},t.prototype.addShapes=function(){(this.options.shapes||[]).forEach((function(t,i){var o=this.initShape(t,i);B(!0,this.options.shapes[i],o.options)}),this)},t.prototype.addLabels=function(){(this.options.labels||[]).forEach((function(t,i){var o=this.initLabel(t,i);B(!0,this.options.labels[i],o.options)}),this)},t.prototype.addClipPaths=function(){this.setClipAxes(),this.clipXAxis&&this.clipYAxis&&this.options.crop&&(this.clipRect=this.chart.renderer.clipRect(this.getClipBox()))},t.prototype.setClipAxes=function(){var t=this.chart.xAxis,o=this.chart.yAxis,n=(this.options.labels||[]).concat(this.options.shapes||[]).reduce((function(n,e){var r=e&&(e.point||e.points&&e.points[0]);return[t[r&&r.xAxis]||n[0],o[r&&r.yAxis]||n[1]]}),[]);this.clipXAxis=n[0],this.clipYAxis=n[1]},t.prototype.getClipBox=function(){if(this.clipXAxis&&this.clipYAxis)return{x:this.clipXAxis.left,y:this.clipYAxis.top,width:this.clipXAxis.width,height:this.clipYAxis.height}},t.prototype.setLabelCollector=function(){var t=this;t.labelCollector=function(){return t.labels.reduce((function(t,label){return label.options.allowOverlap||t.push(label.graphic),t}),[])},t.chart.labelCollectors.push(t.labelCollector)},t.prototype.setOptions=function(t){this.options=B(this.defaultOptions,t)},t.prototype.redraw=function(t){this.linkPoints(),this.graphic||this.render(),this.clipRect&&this.clipRect.animate(this.getClipBox()),this.redrawItems(this.shapes,t),this.redrawItems(this.labels,t),n.redraw.call(this,t)},t.prototype.redrawItems=function(t,o){for(var i=t.length;i--;)this.redrawItem(t[i],o)},t.prototype.renderItems=function(t){for(var i=t.length;i--;)this.renderItem(t[i])},t.prototype.render=function(){var t=this.chart.renderer;this.graphic=t.g("annotation").attr({opacity:0,zIndex:this.options.zIndex,visibility:this.options.visible?"visible":"hidden"}).add(),this.shapesGroup=t.g("annotation-shapes").add(this.graphic),this.options.crop&&this.shapesGroup.clip(this.chart.plotBoxClip),this.labelsGroup=t.g("annotation-labels").attr({translateX:0,translateY:0}).add(this.graphic),this.addClipPaths(),this.clipRect&&this.graphic.clip(this.clipRect),this.renderItems(this.shapes),this.renderItems(this.labels),this.addEvents(),n.render.call(this)},t.prototype.setVisibility=function(t){var o=this.options,n=this.chart.navigationBindings,e=M(t,!o.visible);this.graphic.attr("visibility",e?"visible":"hidden"),e||(this.setControlPointsVisibility(!1),n.activeAnnotation===this&&n.popup&&"annotation-toolbar"===n.popup.formType&&L(n,"closePopup")),o.visible=e},t.prototype.setControlPointsVisibility=function(t){var o=function(o){o.setControlPointsVisibility(t)};n.setControlPointsVisibility.call(this,t),this.shapes.forEach(o),this.labels.forEach(o)},t.prototype.destroy=function(){var t=this.chart,o=function(t){t.destroy()};this.labels.forEach(o),this.shapes.forEach(o),this.clipXAxis=null,this.clipYAxis=null,E(t.labelCollectors,this.labelCollector),y.destroy.call(this),n.destroy.call(this),O(this,t)},t.prototype.remove=function(){return this.chart.removeAnnotation(this)},t.prototype.update=function(t,o){var n=this.chart,e=this.getLabelsAndShapesOptions(this.userOptions,t),r=n.annotations.indexOf(this),l=B(!0,this.userOptions,t);l.labels=e.labels,l.shapes=e.shapes,this.destroy(),this.constructor(n,l),n.options.annotations[r]=l,this.isUpdating=!0,M(o,!0)&&n.redraw(),L(this,"afterUpdate"),this.isUpdating=!1},t.prototype.initShape=function(o,n){var e=B(this.options.shapeOptions,{controlPointOptions:this.options.controlPointOptions},o),r=new t.shapesMap[e.type](this,e,n);return r.itemType="shape",this.shapes.push(r),r},t.prototype.initLabel=function(t,o){var n=B(this.options.labelOptions,{controlPointOptions:this.options.controlPointOptions},t),label=new d(this,n,o);return label.itemType="label",this.labels.push(label),label},t.prototype.redrawItem=function(t,o){t.linkPoints(),t.shouldBeDrawn()?(t.graphic||this.renderItem(t),t.redraw(M(o,!0)&&t.graphic.placed),t.points.length&&this.adjustVisibility(t)):this.destroyItem(t)},t.prototype.adjustVisibility=function(t){var o=!1,label=t.graphic;t.points.forEach((function(t){!1!==t.series.visible&&!1!==t.visible&&(o=!0)})),o?"hidden"===label.visibility&&label.show():label.hide()},t.prototype.destroyItem=function(t){E(this[t.itemType+"s"],t),t.destroy()},t.prototype.renderItem=function(t){t.render("label"===t.itemType?this.labelsGroup:this.shapesGroup)},t.ControlPoint=f,t.MockPoint=v,t.shapesMap={rect:e,circle:r,ellipse:l,path:h,image:c},t.types={},t}();return B(!0,Y.prototype,n,y,B(Y.prototype,{nonDOMEvents:["add","afterUpdate","drag","remove"],defaultOptions:{visible:!0,animation:{},crop:!0,draggable:"xy",labelOptions:{align:"center",allowOverlap:!1,backgroundColor:"rgba(0, 0, 0, 0.75)",borderColor:"#000000",borderRadius:3,borderWidth:1,className:"highcharts-no-tooltip",crop:!1,formatter:function(){return P(this.y)?this.y:"Annotation label"},includeInDataExport:!0,overflow:"justify",padding:5,shadow:!1,shape:"callout",style:{fontSize:"11px",fontWeight:"normal",color:"contrast"},useHTML:!1,verticalAlign:"bottom",x:0,y:-16},shapeOptions:{stroke:"rgba(0, 0, 0, 0.75)",strokeWidth:1,fill:"rgba(0, 0, 0, 0.75)",r:0,snap:2},controlPointOptions:{symbol:"circle",width:10,height:10,style:{cursor:"pointer",fill:"#ffffff",stroke:"#000000","stroke-width":2},visible:!1,events:{}},events:{},zIndex:6}})),x.extendAnnotation=function(t,o,n,e){o=o||Y,T(t.prototype,B(o.prototype,n)),t.prototype.defaultOptions=B(t.prototype.defaultOptions,e||{})},T(C,{initAnnotation:function(t){var o=new(Y.types[t.type]||Y)(this,t);return this.annotations.push(o),o},addAnnotation:function(t,o){var n=this.initAnnotation(t);return this.options.annotations.push(n.options),M(o,!0)&&(n.redraw(),n.graphic.attr({opacity:1})),n},removeAnnotation:function(t){var o=this.annotations,n="annotations"===t.coll?t:N(o,(function(o){return o.options.id===t}));n&&(L(n,"remove"),E(this.options.annotations,n.options),E(o,n),n.destroy())},drawAnnotations:function(){this.plotBoxClip.attr(this.plotBox),this.annotations.forEach((function(t){t.redraw(),t.graphic.animate({opacity:1},t.animationConfig)}))}}),C.collectionsWithUpdate.push("annotations"),C.collectionsWithInit.annotations=[C.addAnnotation],w(o,"afterInit",(function(){this.annotations=[],this.options.annotations||(this.options.annotations=[])})),C.callbacks.push((function(t){t.plotBoxClip=this.renderer.clipRect(this.plotBox),t.controlPointsGroup=t.renderer.g("control-points").attr({zIndex:99}).clip(t.plotBoxClip).add(),t.options.annotations.forEach((function(o,i){if(!t.annotations.some((function(t){return t.options===o}))){var n=t.initAnnotation(o);t.options.annotations[i]=n.options}})),t.drawAnnotations(),w(t,"redraw",t.drawAnnotations),w(t,"destroy",(function(){t.plotBoxClip.destroy(),t.controlPointsGroup.destroy()})),w(t,"exportData",(function(o){var n=t.annotations,e=(this.options.exporting&&this.options.exporting.csv||{}).columnHeaderFormatter,r=!o.dataRows[1].xValues,l=t.options.lang&&t.options.lang.exportData&&t.options.lang.exportData.annotationHeader,h=o.dataRows[0].length,c=t.options.exporting&&t.options.exporting.csv&&t.options.exporting.csv.annotations&&t.options.exporting.csv.annotations.itemDelimiter,d=t.options.exporting&&t.options.exporting.csv&&t.options.exporting.csv.annotations&&t.options.exporting.csv.annotations.join;n.forEach((function(t){t.options.labelOptions.includeInDataExport&&t.labels.forEach((function(label){if(label.options.text){var t=label.options.text;label.points.forEach((function(n){var e=n.x,r=n.series.xAxis?n.series.xAxis.options.index:-1,l=!1;if(-1===r){for(var f=o.dataRows[0].length,y=new Array(f),i=0;i<f;++i)y[i]="";y.push(t),y.xValues=[],y.xValues[r]=e,o.dataRows.push(y),l=!0}if(l||o.dataRows.forEach((function(o){!l&&o.xValues&&void 0!==r&&e===o.xValues[r]&&(d&&o.length>h?o[o.length-1]+=c+t:o.push(t),l=!0)})),!l){for(f=o.dataRows[0].length,y=new Array(f),i=0;i<f;++i)y[i]="";y[0]=e,y.push(t),y.xValues=[],void 0!==r&&(y.xValues[r]=e),o.dataRows.push(y)}}))}}))}));var f=0;o.dataRows.forEach((function(t){f=Math.max(f,t.length)}));for(var y,s,x=f-o.dataRows[0].length,i=0;i<x;i++){var header=(y=i+1,s=void 0,e&&!1!==(s=e(y))?s:(s=l+" "+y,r?{columnTitle:s,topLevelColumnTitle:s}:s));r?(o.dataRows[0].push(header.topLevelColumnTitle),o.dataRows[1].push(header.columnTitle)):o.dataRows[0].push(header)}}))})),I(m.prototype,"onContainerMouseDown",(function(t){this.chart.hasDraggedAnnotation||t.apply(this,Array.prototype.slice.call(arguments,1))})),x.Annotation=Y,Y})),n(o,"Core/Chart/ChartNavigationComposition.js",[],(function(){var t;return function(t){t.compose=function(t){return t.navigation||(t.navigation=new o(t)),t};var o=function(){function t(t){this.updates=[],this.chart=t}return t.prototype.addUpdate=function(t){this.chart.navigation.updates.push(t)},t.prototype.update=function(t,o){var n=this;this.updates.forEach((function(e){e.call(n.chart,t,o)}))},t}();t.Additions=o}(t||(t={})),t})),n(o,"Extensions/Annotations/NavigationBindings.js",[o["Extensions/Annotations/Annotations.js"],o["Core/Chart/Chart.js"],o["Core/Chart/ChartNavigationComposition.js"],o["Core/FormatUtilities.js"],o["Core/Globals.js"],o["Core/DefaultOptions.js"],o["Core/Utilities.js"]],(function(t,o,n,e,r,l,h){var c=e.format,d=l.setOptions,f=h.addEvent,y=h.attr,x=h.fireEvent,v=h.isArray,m=h.isFunction,A=h.isNumber,k=h.isObject,C=h.merge,w=h.objectEach,P=h.pick,O=r.doc,E=r.win,T="highcharts-",N={getFieldType:function(t){return{string:"text",number:"number",boolean:"checkbox"}[typeof t]},updateRectSize:function(t,o){var n=o.chart,e=o.options.typeOptions,r=A(e.xAxis)&&n.xAxis[e.xAxis],l=A(e.yAxis)&&n.yAxis[e.yAxis];if(r&&l){var h=r.toValue(t[r.horiz?"chartX":"chartY"]),c=l.toValue(t[l.horiz?"chartX":"chartY"]),d=h-e.point.x,f=e.point.y-c;o.update({typeOptions:{background:{width:n.inverted?f:d,height:n.inverted?d:f}}})}},getAssignedAxis:function(t){return t.filter((function(t){var o=t.axis.getExtremes(),n=o.min,e=o.max,r=P(t.axis.minPointOffset,0);return A(n)&&A(e)&&t.value>=n-r&&t.value<=e+r&&!t.axis.options.isInternal}))[0]}},L=function(){function t(t,o){this.boundClassNames=void 0,this.selectedButton=void 0,this.chart=t,this.options=o,this.eventsToUnbind=[],this.container=O.getElementsByClassName(this.options.bindingsClassName||"")}return t.prototype.initEvents=function(){var t=this,o=t.chart,n=t.container,e=t.options;t.boundClassNames={},w(e.bindings||{},(function(o){t.boundClassNames[o.className]=o})),[].forEach.call(n,(function(o){t.eventsToUnbind.push(f(o,"click",(function(n){var e=t.getButtonEvents(o,n);e&&-1===e.button.className.indexOf("highcharts-disabled-btn")&&t.bindingsButtonClick(e.button,e.events,n)})))})),w(e.events||{},(function(o,n){m(o)&&t.eventsToUnbind.push(f(t,n,o,{passive:!1}))})),t.eventsToUnbind.push(f(o.container,"click",(function(n){!o.cancelClick&&o.isInsidePlot(n.chartX-o.plotLeft,n.chartY-o.plotTop,{visiblePlotOnly:!0})&&t.bindingsChartClick(this,n)}))),t.eventsToUnbind.push(f(o.container,r.isTouchDevice?"touchmove":"mousemove",(function(o){t.bindingsContainerMouseMove(this,o)}),r.isTouchDevice?{passive:!1}:void 0))},t.prototype.initUpdate=function(){var t=this;n.compose(this.chart).navigation.addUpdate((function(o){t.update(o)}))},t.prototype.bindingsButtonClick=function(button,t,o){var n=this,e=n.chart,r=e.renderer.boxWrapper,l=!0;n.selectedButtonElement&&(n.selectedButtonElement.classList===button.classList&&(l=!1),x(n,"deselectButton",{button:n.selectedButtonElement}),n.nextEvent&&(n.currentUserDetails&&"annotations"===n.currentUserDetails.coll&&e.removeAnnotation(n.currentUserDetails),n.mouseMoveEvent=n.nextEvent=!1)),l?(n.selectedButton=t,n.selectedButtonElement=button,x(n,"selectButton",{button:button}),t.init&&t.init.call(n,button,o),(t.start||t.steps)&&e.renderer.boxWrapper.addClass(T+"draw-mode")):(e.stockTools&&e.stockTools.toggleButtonAciveClass(button),r.removeClass(T+"draw-mode"),n.nextEvent=!1,n.mouseMoveEvent=!1,n.selectedButton=null)},t.prototype.bindingsChartClick=function(t,o){t=this.chart;var n=this,e=n.activeAnnotation,r=n.selectedButton,l=t.renderer.boxWrapper;e&&(e.cancelClick||o.activeAnnotation||!o.target.parentNode||function(t,s){var o=E.Element.prototype,n=o.matches||o.msMatchesSelector||o.webkitMatchesSelector,e=null;if(o.closest)e=o.closest.call(t,s);else do{if(n.call(t,s))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return e}(o.target,"."+T+"popup")?e.cancelClick&&setTimeout((function(){e.cancelClick=!1}),0):x(n,"closePopup")),r&&r.start&&(n.nextEvent?(n.nextEvent(o,n.currentUserDetails),n.steps&&(n.stepIndex++,r.steps[n.stepIndex]?n.mouseMoveEvent=n.nextEvent=r.steps[n.stepIndex]:(x(n,"deselectButton",{button:n.selectedButtonElement}),l.removeClass(T+"draw-mode"),r.end&&r.end.call(n,o,n.currentUserDetails),n.nextEvent=!1,n.mouseMoveEvent=!1,n.selectedButton=null))):(n.currentUserDetails=r.start.call(n,o),n.currentUserDetails&&r.steps?(n.stepIndex=0,n.steps=!0,n.mouseMoveEvent=n.nextEvent=r.steps[n.stepIndex]):(x(n,"deselectButton",{button:n.selectedButtonElement}),l.removeClass(T+"draw-mode"),n.steps=!1,n.selectedButton=null,r.end&&r.end.call(n,o,n.currentUserDetails))))},t.prototype.bindingsContainerMouseMove=function(t,o){this.mouseMoveEvent&&this.mouseMoveEvent(o,this.currentUserDetails)},t.prototype.fieldsToOptions=function(t,o){return w(t,(function(t,n){var e=parseFloat(t),path=n.split("."),r=o,l=path.length-1;!A(e)||t.match(/px/g)||n.match(/format/g)||(t=e),""!==t&&"undefined"!==t&&path.forEach((function(o,n){var e=P(path[n+1],"");l===n?r[o]=t:(r[o]||(r[o]=e.match(/\d/g)?[]:{}),r=r[o])}))})),o},t.prototype.deselectAnnotation=function(){this.activeAnnotation&&(this.activeAnnotation.setControlPointsVisibility(!1),this.activeAnnotation=!1)},t.prototype.annotationToFields=function(o){var n=o.options,e=t.annotationsEditable,r=e.nestedOptions,l=this.utils.getFieldType,h=P(n.type,n.shapes&&n.shapes[0]&&n.shapes[0].type,n.labels&&n.labels[0]&&n.labels[0].itemType,"label"),d=t.annotationsNonEditable[n.langKey]||[],f={langKey:n.langKey,type:h};function y(option,t,n,e){var h;n&&option&&-1===d.indexOf(t)&&((n.indexOf&&n.indexOf(t))>=0||n[t]||!0===n)&&(v(option)?(e[t]=[],option.forEach((function(o,i){k(o)?(e[t][i]={},w(o,(function(o,n){y(o,n,r[t],e[t][i])}))):y(o,0,r[t],e[t])}))):k(option)?(h={},v(e)?(e.push(h),h[t]={},h=h[t]):e[t]=h,w(option,(function(o,e){y(o,e,0===t?n:r[t],h)}))):"format"===t?e[t]=[c(option,o.labels[0].points[0]).toString(),"text"]:v(e)?e.push([option,l(option)]):e[t]=[option,l(option)])}return w(n,(function(option,t){"typeOptions"===t?(f[t]={},w(n[t],(function(o,n){y(o,n,r,f[t])}))):y(option,t,e[h],f)})),f},t.prototype.getClickedClassNames=function(t,o){for(var n,element=o.target,e=[];element;)if((n=y(element,"class"))&&(e=e.concat(n.split(" ").map((function(t){return[t,element]})))),(element=element.parentNode)===t)return e;return e},t.prototype.getButtonEvents=function(t,o){var n,e=this;return this.getClickedClassNames(t,o).forEach((function(t){e.boundClassNames[t[0]]&&!n&&(n={events:e.boundClassNames[t[0]],button:t[1]})})),n},t.prototype.update=function(t){this.options=C(!0,this.options,t),this.removeEvents(),this.initEvents()},t.prototype.removeEvents=function(){this.eventsToUnbind.forEach((function(t){t()}))},t.prototype.destroy=function(){this.removeEvents()},t.annotationsEditable={nestedOptions:{labelOptions:["style","format","backgroundColor"],labels:["style"],label:["style"],style:["fontSize","color"],background:["fill","strokeWidth","stroke"],innerBackground:["fill","strokeWidth","stroke"],outerBackground:["fill","strokeWidth","stroke"],shapeOptions:["fill","strokeWidth","stroke"],shapes:["fill","strokeWidth","stroke"],line:["strokeWidth","stroke"],backgroundColors:[!0],connector:["fill","strokeWidth","stroke"],crosshairX:["strokeWidth","stroke"],crosshairY:["strokeWidth","stroke"]},circle:["shapes"],ellipse:["shapes"],verticalLine:[],label:["labelOptions"],measure:["background","crosshairY","crosshairX"],fibonacci:[],tunnel:["background","line","height"],pitchfork:["innerBackground","outerBackground"],rect:["shapes"],crookedLine:[],basicAnnotation:["shapes","labelOptions"]},t.annotationsNonEditable={rectangle:["crosshairX","crosshairY","labelOptions"],ellipse:["labelOptions"],circle:["labelOptions"]},t}();function B(t){var o=t.prototype.defaultOptions.events&&t.prototype.defaultOptions.events.click;C(!0,t.prototype.defaultOptions.events,{click:function(t){var n=this,e=n.chart.navigationBindings,r=e.activeAnnotation;o&&o.call(n,t),r!==n?(e.deselectAnnotation(),e.activeAnnotation=n,n.setControlPointsVisibility(!0),x(e,"showPopup",{annotation:n,formType:"annotation-toolbar",options:e.annotationToFields(n),onSubmit:function(data){var t,o={};"remove"===data.actionType?(e.activeAnnotation=!1,e.chart.removeAnnotation(n)):(e.fieldsToOptions(data.fields,o),e.deselectAnnotation(),t=o.typeOptions,"measure"===n.options.type&&(t.crosshairY.enabled=0!==t.crosshairY.strokeWidth,t.crosshairX.enabled=0!==t.crosshairX.strokeWidth),n.update(o))}})):x(e,"closePopup"),t.activeAnnotation=!0}})}return L.prototype.utils=N,o.prototype.initNavigationBindings=function(){var t=this,o=t.options;o&&o.navigation&&o.navigation.bindings&&(t.navigationBindings=new L(t,o.navigation),t.navigationBindings.initEvents(),t.navigationBindings.initUpdate())},f(o,"load",(function(){this.initNavigationBindings()})),f(o,"destroy",(function(){this.navigationBindings&&this.navigationBindings.destroy()})),f(L,"deselectButton",(function(){this.selectedButtonElement=null})),f(t,"remove",(function(){this.chart.navigationBindings&&this.chart.navigationBindings.deselectAnnotation()})),r.Annotation&&(B(t),w(t.types,(function(t){B(t)}))),d({lang:{navigation:{popup:{simpleShapes:"Simple shapes",lines:"Lines",circle:"Circle",ellipse:"Ellipse",rectangle:"Rectangle",label:"Label",shapeOptions:"Shape options",typeOptions:"Details",fill:"Fill",format:"Text",strokeWidth:"Line width",stroke:"Line color",title:"Title",name:"Name",labelOptions:"Label options",labels:"Labels",backgroundColor:"Background color",backgroundColors:"Background colors",borderColor:"Border color",borderRadius:"Border radius",borderWidth:"Border width",style:"Style",padding:"Padding",fontSize:"Font size",color:"Color",height:"Height",shapes:"Shape options"}}},navigation:{bindingsClassName:"highcharts-bindings-container",bindings:{circleAnnotation:{className:"highcharts-circle-annotation",start:function(t){var o=this.chart.pointer.getCoordinates(t),n=this.utils.getAssignedAxis(o.xAxis),e=this.utils.getAssignedAxis(o.yAxis),r=this.chart.options.navigation;if(n&&e)return this.chart.addAnnotation(C({langKey:"circle",type:"basicAnnotation",shapes:[{type:"circle",point:{x:n.value,y:e.value,xAxis:n.axis.options.index,yAxis:e.axis.options.index},r:5}]},r.annotationsOptions,r.bindings.circleAnnotation.annotationsOptions))},steps:[function(t,o){var n,e=o.options.shapes[0].point;if(A(e.xAxis)&&A(e.yAxis)){var r=this.chart.inverted,l=this.chart.xAxis[e.xAxis].toPixels(e.x),h=this.chart.yAxis[e.yAxis].toPixels(e.y);n=Math.max(Math.sqrt(Math.pow(r?h-t.chartX:l-t.chartX,2)+Math.pow(r?l-t.chartY:h-t.chartY,2)),5)}o.update({shapes:[{r:n}]})}]},ellipseAnnotation:{className:"highcharts-ellipse-annotation",start:function(t){var o=this.chart.pointer.getCoordinates(t),n=this.utils.getAssignedAxis(o.xAxis),e=this.utils.getAssignedAxis(o.yAxis),r=this.chart.options.navigation;if(n&&e)return this.chart.addAnnotation(C({langKey:"ellipse",type:"basicAnnotation",shapes:[{type:"ellipse",xAxis:n.axis.options.index,yAxis:e.axis.options.index,points:[{x:n.value,y:e.value},{x:n.value,y:e.value}],ry:1}]},r.annotationsOptions,r.bindings.ellipseAnnotation.annotationOptions))},steps:[function(t,o){var n=o.shapes[0],e=n.getAbsolutePosition(n.points[1]);n.translatePoint(t.chartX-e.x,t.chartY-e.y,1),n.redraw(!1)},function(t,o){var n=o.shapes[0],e=n.getAbsolutePosition(n.points[0]),r=n.getAbsolutePosition(n.points[1]),l=n.getDistanceFromLine(e,r,t.chartX,t.chartY),h=n.getYAxis(),c=Math.abs(h.toValue(0)-h.toValue(l));n.setYRadius(c),n.redraw(!1)}]},rectangleAnnotation:{className:"highcharts-rectangle-annotation",start:function(t){var o=this.chart.pointer.getCoordinates(t),n=this.utils.getAssignedAxis(o.xAxis),e=this.utils.getAssignedAxis(o.yAxis);if(n&&e){var r=n.value,l=e.value,h=n.axis.options.index,c=e.axis.options.index,d=this.chart.options.navigation;return this.chart.addAnnotation(C({langKey:"rectangle",type:"basicAnnotation",shapes:[{type:"path",points:[{xAxis:h,yAxis:c,x:r,y:l},{xAxis:h,yAxis:c,x:r,y:l},{xAxis:h,yAxis:c,x:r,y:l},{xAxis:h,yAxis:c,x:r,y:l},{command:"Z"}]}]},d.annotationsOptions,d.bindings.rectangleAnnotation.annotationsOptions))}},steps:[function(t,o){var n,e,r=o.options.shapes[0].points,l=this.chart.pointer.getCoordinates(t),h=this.utils.getAssignedAxis(l.xAxis),c=this.utils.getAssignedAxis(l.yAxis);h&&c&&(n=h.value,e=c.value,r[1].x=n,r[2].x=n,r[2].y=e,r[3].y=e,o.update({shapes:[{points:r}]}))}]},labelAnnotation:{className:"highcharts-label-annotation",start:function(t){var o=this.chart.pointer.getCoordinates(t),n=this.utils.getAssignedAxis(o.xAxis),e=this.utils.getAssignedAxis(o.yAxis),r=this.chart.options.navigation;if(n&&e)return this.chart.addAnnotation(C({langKey:"label",type:"basicAnnotation",labelOptions:{format:"{y:.2f}"},labels:[{point:{xAxis:n.axis.options.index,yAxis:e.axis.options.index,x:n.value,y:e.value},overflow:"none",crop:!0}]},r.annotationsOptions,r.bindings.labelAnnotation.annotationsOptions))}}},events:{},annotationsOptions:{animation:{defer:0}}}}),f(o,"render",(function(){var t=this,o=t.navigationBindings,n="highcharts-disabled-btn";if(t&&o){var e=!1;t.series.forEach((function(t){!t.options.isInternal&&t.visible&&(e=!0)})),w(o.boundClassNames,(function(o,r){if(t.navigationBindings&&t.navigationBindings.container&&t.navigationBindings.container[0]){var l=t.navigationBindings.container[0].querySelectorAll("."+r);if(l)for(var i=0;i<l.length;i++){var button=l[i],h=button.className;"normal"===o.noDataState||e?-1!==h.indexOf(n)&&button.classList.remove(n):-1===h.indexOf(n)&&(button.className+=" "+n)}}}))}})),f(L,"closePopup",(function(){this.deselectAnnotation()})),L})),n(o,"Stock/StockToolsBindings.js",[o["Core/DefaultOptions.js"],o["Core/Globals.js"],o["Extensions/Annotations/NavigationBindings.js"],o["Core/Series/Series.js"],o["Core/Utilities.js"]],(function(t,o,n,e,r){var l=t.getOptions,h=t.setOptions,c=r.correctFloat,d=r.defined,f=r.extend,y=r.fireEvent,x=r.isNumber,v=r.merge,m=r.pick,A=r.uniqueKey,k=n.prototype.utils,C="highcharts-";k.addFlagFromForm=function(t){return function(o){var n,e,r=this,l=r.chart,h=l.stockTools,c=k.getFieldType,d=k.attractToPoint(o,l);d&&(n={x:d.x,y:d.y},e={type:"flags",onSeries:d.series.id,shape:t,data:[n],xAxis:d.xAxis,yAxis:d.yAxis,point:{events:{click:function(){var t=this,o=t.options;y(r,"showPopup",{point:t,formType:"annotation-toolbar",options:{langKey:"flags",type:"flags",title:[o.title,c(o.title)],name:[o.name,c(o.name)]},onSubmit:function(o){"remove"===o.actionType?t.remove():t.update(r.fieldsToOptions(o.fields,{}))}})}}}},h&&h.guiEnabled||l.addSeries(e),y(r,"showPopup",{formType:"flag",options:{langKey:"flags",type:"flags",title:["A",c("A")],name:["Flag A",c("Flag A")]},onSubmit:function(data){r.fieldsToOptions(data.fields,e.data[0]),l.addSeries(e)}}))}},k.indicatorsWithAxes=["apo","ad","aroon","aroonoscillator","atr","ao","cci","chaikin","cmf","cmo","disparityindex","dmi","dpo","linearRegressionAngle","linearRegressionIntercept","linearRegressionSlope","klinger","macd","mfi","momentum","natr","obv","ppo","roc","rsi","slowstochastic","stochastic","trix","williamsr"],k.manageIndicators=function(data){var t,o,n,r,h=this,c=h.chart,f={linkedTo:data.linkedTo,type:data.type},x=k.indicatorsWithAxes;if("edit"===data.actionType)h.fieldsToOptions(data.fields,f),(r=c.get(data.seriesId))&&r.update(f,!1);else if("remove"===data.actionType){if((r=c.get(data.seriesId))&&(t=r.yAxis,r.linkedSeries&&r.linkedSeries.forEach((function(t){t.remove(!1)})),r.remove(!1),x.indexOf(r.type)>=0)){var v=t.options.height;t.remove(!1),h.resizeYAxes(v)}}else f.id=A(),h.fieldsToOptions(data.fields,f),o=c.get(f.linkedTo),n=l().plotOptions,void 0!==o&&o instanceof e&&"sum"===o.getDGApproximation()&&!d(n&&n[f.type]&&n.dataGrouping&&n.dataGrouping.approximation)&&(f.dataGrouping={approximation:"sum"}),x.indexOf(data.type)>=0?(t=c.addAxis({id:A(),offset:0,opposite:!0,title:{text:""},tickPixelInterval:40,showLastLabel:!1,labels:{align:"left",y:-2}},!1,!1),f.yAxis=t.options.id,h.resizeYAxes()):f.yAxis=c.get(data.linkedTo).options.yAxis,["ad","cmf","klinger","mfi","obv","vbp","vwap"].indexOf(data.type)>=0&&(f.params.volumeSeriesID=c.series.filter((function(t){return"column"===t.options.type}))[0].options.id),c.addSeries(f,!1);y(h,"deselectButton",{button:h.selectedButtonElement}),c.redraw()},k.updateHeight=function(t,o){var n=o.options.typeOptions,e=x(n.yAxis)&&this.chart.yAxis[n.yAxis];e&&n.points&&o.update({typeOptions:{height:e.toValue(t[e.horiz?"chartX":"chartY"])-(n.points[1].y||0)}})},k.attractToPoint=function(t,o){var n,e,r,l,h,c=o.pointer.getCoordinates(t),d=Number.MAX_VALUE;if(o.navigationBindings&&(n=o.navigationBindings.utils.getAssignedAxis(c.xAxis),e=o.navigationBindings.utils.getAssignedAxis(c.yAxis)),n&&e)return l=n.value,h=e.value,e.axis.series.forEach((function(t){t.points&&t.points.forEach((function(t){t&&d>Math.abs(t.x-l)&&(d=Math.abs(t.x-l),r=t)}))})),r&&r.x&&r.y?{x:r.x,y:r.y,below:h<r.y,series:r.series,xAxis:r.series.xAxis.options.index||0,yAxis:r.series.yAxis.options.index||0}:void 0},k.isNotNavigatorYAxis=function(t){return t.userOptions.className!==C+"navigator-yaxis"},k.isPriceIndicatorEnabled=function(t){return t.some((function(s){return s.lastVisiblePrice||s.lastPrice}))},k.updateNthPoint=function(t){return function(o,n){var e=n.options.typeOptions,r=x(e.xAxis)&&this.chart.xAxis[e.xAxis],l=x(e.yAxis)&&this.chart.yAxis[e.yAxis];r&&l&&(e.points.forEach((function(n,e){e>=t&&(n.x=r.toValue(o[r.horiz?"chartX":"chartY"]),n.y=l.toValue(o[l.horiz?"chartX":"chartY"]))})),n.update({typeOptions:{points:e.points}}))}},f(n.prototype,{getYAxisPositions:function(t,o,n,e){var r,l,h=0;function f(t){return d(t)&&!x(t)&&t.match("%")}return e&&(l=c(parseFloat(e)/100)),{positions:t.map((function(e,d){var y=c(f(e.options.height)?parseFloat(e.options.height)/100:e.height/o),v=c(f(e.options.top)?parseFloat(e.options.top)/100:(e.top-e.chart.plotTop)/o);return l?v<=h?h=c(Math.max(h,(v||0)+(y||0))):(v=c(v-l),h=c(h+y)):(x(y)||(y=t[d-1].series.every((function(s){return s.is("sma")}))?r:n/100),x(v)||(v=h),r=y,h=c(Math.max(h,(v||0)+(y||0)))),{height:100*y,top:100*v}})),allAxesHeight:h}},getYAxisResizers:function(t){var o=[];return t.forEach((function(n,e){var r=t[e+1];o[e]=r?{enabled:!0,controlledAxis:{next:[m(r.options.id,r.options.index)]}}:{enabled:!1}})),o},resizeYAxes:function(t){var o=this.chart,n=o.yAxis.filter(k.isNotNavigatorYAxis),e=o.plotHeight,r=this.getYAxisPositions(n,e,20,t),l=r.positions,h=r.allAxesHeight,d=this.getYAxisResizers(n);!t&&h<=c(1)?l[l.length-1]={height:20,top:c(100*h-20)}:l.forEach((function(t){t.height=t.height/(100*h)*100,t.top=t.top/(100*h)*100})),l.forEach((function(t,o){n[o].update({height:t.height+"%",top:t.top+"%",resize:d[o],offset:0},!1)}))},recalculateYAxisPositions:function(t,o,n,e){return t.forEach((function(r,l){var h=t[l-1];r.top=h?c(h.height+h.top):0,n&&(r.height=c(r.height+e*o))})),t}}),h({navigation:{bindings:{segment:{className:"highcharts-segment",start:function(t){var o,n=this.chart.pointer.getCoordinates(t),e=this.utils.getAssignedAxis(n.xAxis),r=this.utils.getAssignedAxis(n.yAxis),l=this.chart.options.navigation;if(e&&r)return o=v({langKey:"segment",type:"crookedLine",typeOptions:{xAxis:e.axis.options.index,yAxis:r.axis.options.index,points:[{x:e.value,y:r.value},{x:e.value,y:r.value}]}},l.annotationsOptions,l.bindings.segment.annotationsOptions),this.chart.addAnnotation(o)},steps:[k.updateNthPoint(1)]},arrowSegment:{className:"highcharts-arrow-segment",start:function(t){var o,n=this.chart.pointer.getCoordinates(t),e=this.utils.getAssignedAxis(n.xAxis),r=this.utils.getAssignedAxis(n.yAxis),l=this.chart.options.navigation;if(e&&r)return o=v({langKey:"arrowSegment",type:"crookedLine",typeOptions:{line:{markerEnd:"arrow"},xAxis:e.axis.options.index,yAxis:r.axis.options.index,points:[{x:e.value,y:r.value},{x:e.value,y:r.value}]}},l.annotationsOptions,l.bindings.arrowSegment.annotationsOptions),this.chart.addAnnotation(o)},steps:[k.updateNthPoint(1)]},ray:{className:"highcharts-ray",start:function(t){var o,n=this.chart.pointer.getCoordinates(t),e=this.utils.getAssignedAxis(n.xAxis),r=this.utils.getAssignedAxis(n.yAxis),l=this.chart.options.navigation;if(e&&r)return o=v({langKey:"ray",type:"infinityLine",typeOptions:{type:"ray",xAxis:e.axis.options.index,yAxis:r.axis.options.index,points:[{x:e.value,y:r.value},{x:e.value,y:r.value}]}},l.annotationsOptions,l.bindings.ray.annotationsOptions),this.chart.addAnnotation(o)},steps:[k.updateNthPoint(1)]},arrowRay:{className:"highcharts-arrow-ray",start:function(t){var o,n=this.chart.pointer.getCoordinates(t),e=this.utils.getAssignedAxis(n.xAxis),r=this.utils.getAssignedAxis(n.yAxis),l=this.chart.options.navigation;if(e&&r)return o=v({langKey:"arrowRay",type:"infinityLine",typeOptions:{type:"ray",line:{markerEnd:"arrow"},xAxis:e.axis.options.index,yAxis:r.axis.options.index,points:[{x:e.value,y:r.value},{x:e.value,y:r.value}]}},l.annotationsOptions,l.bindings.arrowRay.annotationsOptions),this.chart.addAnnotation(o)},steps:[k.updateNthPoint(1)]},infinityLine:{className:"highcharts-infinity-line",start:function(t){var o,n=this.chart.pointer.getCoordinates(t),e=this.utils.getAssignedAxis(n.xAxis),r=this.utils.getAssignedAxis(n.yAxis),l=this.chart.options.navigation;if(e&&r)return o=v({langKey:"infinityLine",type:"infinityLine",typeOptions:{type:"line",xAxis:e.axis.options.index,yAxis:r.axis.options.index,points:[{x:e.value,y:r.value},{x:e.value,y:r.value}]}},l.annotationsOptions,l.bindings.infinityLine.annotationsOptions),this.chart.addAnnotation(o)},steps:[k.updateNthPoint(1)]},arrowInfinityLine:{className:"highcharts-arrow-infinity-line",start:function(t){var o,n=this.chart.pointer.getCoordinates(t),e=this.utils.getAssignedAxis(n.xAxis),r=this.utils.getAssignedAxis(n.yAxis),l=this.chart.options.navigation;if(e&&r)return o=v({langKey:"arrowInfinityLine",type:"infinityLine",typeOptions:{type:"line",line:{markerEnd:"arrow"},xAxis:e.axis.options.index,yAxis:r.axis.options.index,points:[{x:e.value,y:r.value},{x:e.value,y:r.value}]}},l.annotationsOptions,l.bindings.arrowInfinityLine.annotationsOptions),this.chart.addAnnotation(o)},steps:[k.updateNthPoint(1)]},horizontalLine:{className:"highcharts-horizontal-line",start:function(t){var o,n=this.chart.pointer.getCoordinates(t),e=this.utils.getAssignedAxis(n.xAxis),r=this.utils.getAssignedAxis(n.yAxis),l=this.chart.options.navigation;e&&r&&(o=v({langKey:"horizontalLine",type:"infinityLine",draggable:"y",typeOptions:{type:"horizontalLine",xAxis:e.axis.options.index,yAxis:r.axis.options.index,points:[{x:e.value,y:r.value}]}},l.annotationsOptions,l.bindings.horizontalLine.annotationsOptions),this.chart.addAnnotation(o))}},verticalLine:{className:"highcharts-vertical-line",start:function(t){var o,n=this.chart.pointer.getCoordinates(t),e=this.utils.getAssignedAxis(n.xAxis),r=this.utils.getAssignedAxis(n.yAxis),l=this.chart.options.navigation;e&&r&&(o=v({langKey:"verticalLine",type:"infinityLine",draggable:"x",typeOptions:{type:"verticalLine",xAxis:e.axis.options.index,yAxis:r.axis.options.index,points:[{x:e.value,y:r.value}]}},l.annotationsOptions,l.bindings.verticalLine.annotationsOptions),this.chart.addAnnotation(o))}},crooked3:{className:"highcharts-crooked3",start:function(t){var o=this.chart.pointer.getCoordinates(t),n=this.utils.getAssignedAxis(o.xAxis),e=this.utils.getAssignedAxis(o.yAxis);if(n&&e){var r=n.value,l=e.value,h=this.chart.options.navigation,c=v({langKey:"crooked3",type:"crookedLine",typeOptions:{xAxis:n.axis.options.index,yAxis:e.axis.options.index,points:[{x:r,y:l},{x:r,y:l},{x:r,y:l}]}},h.annotationsOptions,h.bindings.crooked3.annotationsOptions);return this.chart.addAnnotation(c)}},steps:[k.updateNthPoint(1),k.updateNthPoint(2)]},crooked5:{className:"highcharts-crooked5",start:function(t){var o=this.chart.pointer.getCoordinates(t),n=this.utils.getAssignedAxis(o.xAxis),e=this.utils.getAssignedAxis(o.yAxis);if(n&&e){var r=n.value,l=e.value,h=this.chart.options.navigation,c=v({langKey:"crooked5",type:"crookedLine",typeOptions:{xAxis:n.axis.options.index,yAxis:e.axis.options.index,points:[{x:r,y:l},{x:r,y:l},{x:r,y:l},{x:r,y:l},{x:r,y:l}]}},h.annotationsOptions,h.bindings.crooked5.annotationsOptions);return this.chart.addAnnotation(c)}},steps:[k.updateNthPoint(1),k.updateNthPoint(2),k.updateNthPoint(3),k.updateNthPoint(4)]},elliott3:{className:"highcharts-elliott3",start:function(t){var o=this.chart.pointer.getCoordinates(t),n=this.utils.getAssignedAxis(o.xAxis),e=this.utils.getAssignedAxis(o.yAxis);if(n&&e){var r=n.value,l=e.value,h=this.chart.options.navigation,c=v({langKey:"elliott3",type:"elliottWave",typeOptions:{xAxis:n.axis.options.index,yAxis:e.axis.options.index,points:[{x:r,y:l},{x:r,y:l},{x:r,y:l},{x:r,y:l}]},labelOptions:{style:{color:"#666666"}}},h.annotationsOptions,h.bindings.elliott3.annotationsOptions);return this.chart.addAnnotation(c)}},steps:[k.updateNthPoint(1),k.updateNthPoint(2),k.updateNthPoint(3)]},elliott5:{className:"highcharts-elliott5",start:function(t){var o=this.chart.pointer.getCoordinates(t),n=this.utils.getAssignedAxis(o.xAxis),e=this.utils.getAssignedAxis(o.yAxis);if(n&&e){var r=n.value,l=e.value,h=this.chart.options.navigation,c=v({langKey:"elliott5",type:"elliottWave",typeOptions:{xAxis:n.axis.options.index,yAxis:e.axis.options.index,points:[{x:r,y:l},{x:r,y:l},{x:r,y:l},{x:r,y:l},{x:r,y:l},{x:r,y:l}]},labelOptions:{style:{color:"#666666"}}},h.annotationsOptions,h.bindings.elliott5.annotationsOptions);return this.chart.addAnnotation(c)}},steps:[k.updateNthPoint(1),k.updateNthPoint(2),k.updateNthPoint(3),k.updateNthPoint(4),k.updateNthPoint(5)]},measureX:{className:"highcharts-measure-x",start:function(t){var o=this.chart.pointer.getCoordinates(t),n=this.utils.getAssignedAxis(o.xAxis),e=this.utils.getAssignedAxis(o.yAxis);if(n&&e){var r=n.value,l=e.value,h=this.chart.options.navigation,c=v({langKey:"measure",type:"measure",typeOptions:{selectType:"x",xAxis:n.axis.options.index,yAxis:e.axis.options.index,point:{x:r,y:l},crosshairX:{strokeWidth:1,stroke:"#000000"},crosshairY:{enabled:!1,strokeWidth:0,stroke:"#000000"},background:{width:0,height:0,strokeWidth:0,stroke:"#ffffff"}},labelOptions:{style:{color:"#666666"}}},h.annotationsOptions,h.bindings.measureX.annotationsOptions);return this.chart.addAnnotation(c)}},steps:[k.updateRectSize]},measureY:{className:"highcharts-measure-y",start:function(t){var o=this.chart.pointer.getCoordinates(t),n=this.utils.getAssignedAxis(o.xAxis),e=this.utils.getAssignedAxis(o.yAxis);if(n&&e){var r=n.value,l=e.value,h=this.chart.options.navigation,c=v({langKey:"measure",type:"measure",typeOptions:{selectType:"y",xAxis:n.axis.options.index,yAxis:e.axis.options.index,point:{x:r,y:l},crosshairX:{enabled:!1,strokeWidth:0,stroke:"#000000"},crosshairY:{strokeWidth:1,stroke:"#000000"},background:{width:0,height:0,strokeWidth:0,stroke:"#ffffff"}},labelOptions:{style:{color:"#666666"}}},h.annotationsOptions,h.bindings.measureY.annotationsOptions);return this.chart.addAnnotation(c)}},steps:[k.updateRectSize]},measureXY:{className:"highcharts-measure-xy",start:function(t){var o=this.chart.pointer.getCoordinates(t),n=this.utils.getAssignedAxis(o.xAxis),e=this.utils.getAssignedAxis(o.yAxis);if(n&&e){var r=n.value,l=e.value,h=this.chart.options.navigation,c=v({langKey:"measure",type:"measure",typeOptions:{selectType:"xy",xAxis:n.axis.options.index,yAxis:e.axis.options.index,point:{x:r,y:l},background:{width:0,height:0,strokeWidth:10},crosshairX:{strokeWidth:1,stroke:"#000000"},crosshairY:{strokeWidth:1,stroke:"#000000"}},labelOptions:{style:{color:"#666666"}}},h.annotationsOptions,h.bindings.measureXY.annotationsOptions);return this.chart.addAnnotation(c)}},steps:[k.updateRectSize]},fibonacci:{className:"highcharts-fibonacci",start:function(t){var o=this.chart.pointer.getCoordinates(t),n=this.utils.getAssignedAxis(o.xAxis),e=this.utils.getAssignedAxis(o.yAxis);if(n&&e){var r=n.value,l=e.value,h=this.chart.options.navigation,c=v({langKey:"fibonacci",type:"fibonacci",typeOptions:{xAxis:n.axis.options.index,yAxis:e.axis.options.index,points:[{x:r,y:l},{x:r,y:l}]},labelOptions:{style:{color:"#666666"}}},h.annotationsOptions,h.bindings.fibonacci.annotationsOptions);return this.chart.addAnnotation(c)}},steps:[k.updateNthPoint(1),k.updateHeight]},parallelChannel:{className:"highcharts-parallel-channel",start:function(t){var o=this.chart.pointer.getCoordinates(t),n=this.utils.getAssignedAxis(o.xAxis),e=this.utils.getAssignedAxis(o.yAxis);if(n&&e){var r=n.value,l=e.value,h=this.chart.options.navigation,c=v({langKey:"parallelChannel",type:"tunnel",typeOptions:{xAxis:n.axis.options.index,yAxis:e.axis.options.index,points:[{x:r,y:l},{x:r,y:l}]}},h.annotationsOptions,h.bindings.parallelChannel.annotationsOptions);return this.chart.addAnnotation(c)}},steps:[k.updateNthPoint(1),k.updateHeight]},pitchfork:{className:"highcharts-pitchfork",start:function(t){var o=this.chart.pointer.getCoordinates(t),n=this.utils.getAssignedAxis(o.xAxis),e=this.utils.getAssignedAxis(o.yAxis);if(n&&e){var r=n.value,l=e.value,h=this.chart.options.navigation,c=v({langKey:"pitchfork",type:"pitchfork",typeOptions:{xAxis:n.axis.options.index,yAxis:e.axis.options.index,points:[{x:n.value,y:e.value,controlPoint:{style:{fill:"#f21313"}}},{x:r,y:l},{x:r,y:l}],innerBackground:{fill:"rgba(100, 170, 255, 0.8)"}},shapeOptions:{strokeWidth:2}},h.annotationsOptions,h.bindings.pitchfork.annotationsOptions);return this.chart.addAnnotation(c)}},steps:[k.updateNthPoint(1),k.updateNthPoint(2)]},verticalCounter:{className:"highcharts-vertical-counter",start:function(t){var o,n,e=k.attractToPoint(t,this.chart),r=this.chart.options.navigation;e&&(this.verticalCounter=this.verticalCounter||0,o=v({langKey:"verticalCounter",type:"verticalLine",typeOptions:{point:{x:e.x,y:e.y,xAxis:e.xAxis,yAxis:e.yAxis},label:{offset:e.below?40:-40,text:this.verticalCounter.toString()}},labelOptions:{style:{color:"#666666",fontSize:"11px"}},shapeOptions:{stroke:"rgba(0, 0, 0, 0.75)",strokeWidth:1}},r.annotationsOptions,r.bindings.verticalCounter.annotationsOptions),n=this.chart.addAnnotation(o),this.verticalCounter++,n.options.events.click.call(n,{}))}},timeCycles:{className:"highcharts-time-cycles",start:function(t){var o,n,e=k.attractToPoint(t,this.chart),r=this.chart.options.navigation;if(e)return o=v({langKey:"timeCycles",type:"timeCycles",typeOptions:{xAxis:e.xAxis,yAxis:e.yAxis,points:[{x:e.x},{x:e.x}],line:{stroke:"rgba(0, 0, 0, 0.75)",fill:"transparent",strokeWidth:2}}},r.annotationsOptions,r.bindings.timeCycles.annotationsOptions),(n=this.chart.addAnnotation(o)).options.events.click.call(n,{}),n},steps:[k.updateNthPoint(1)]},verticalLabel:{className:"highcharts-vertical-label",start:function(t){var o,n,e=k.attractToPoint(t,this.chart),r=this.chart.options.navigation;e&&(o=v({langKey:"verticalLabel",type:"verticalLine",typeOptions:{point:{x:e.x,y:e.y,xAxis:e.xAxis,yAxis:e.yAxis},label:{offset:e.below?40:-40}},labelOptions:{style:{color:"#666666",fontSize:"11px"}},shapeOptions:{stroke:"rgba(0, 0, 0, 0.75)",strokeWidth:1}},r.annotationsOptions,r.bindings.verticalLabel.annotationsOptions),(n=this.chart.addAnnotation(o)).options.events.click.call(n,{}))}},verticalArrow:{className:"highcharts-vertical-arrow",start:function(t){var o,n,e=k.attractToPoint(t,this.chart),r=this.chart.options.navigation;e&&(o=v({langKey:"verticalArrow",type:"verticalLine",typeOptions:{point:{x:e.x,y:e.y,xAxis:e.xAxis,yAxis:e.yAxis},label:{offset:e.below?40:-40,format:" "},connector:{fill:"none",stroke:e.below?"#f21313":"#06b535"}},shapeOptions:{stroke:"rgba(0, 0, 0, 0.75)",strokeWidth:1}},r.annotationsOptions,r.bindings.verticalArrow.annotationsOptions),(n=this.chart.addAnnotation(o)).options.events.click.call(n,{}))}},fibonacciTimeZones:{className:"highcharts-fibonacci-time-zones",start:function(t){var o=this.chart.pointer.getCoordinates(t),n=this.utils.getAssignedAxis(o.xAxis),e=this.utils.getAssignedAxis(o.yAxis);if(n&&e){var r=this.chart.options.navigation,l=v({type:"fibonacciTimeZones",langKey:"fibonacciTimeZones",typeOptions:{xAxis:n.axis.options.index,yAxis:e.axis.options.index,points:[{x:n.value}]}},r.annotationsOptions,r.bindings.fibonacciTimeZones.annotationsOptions);return this.chart.addAnnotation(l)}},steps:[function(t,o){var n=o.options.typeOptions.points,e=n&&n[0].x,r=this.chart.pointer.getCoordinates(t),l=this.utils.getAssignedAxis(r.xAxis),h=this.utils.getAssignedAxis(r.yAxis);o.update({typeOptions:{xAxis:l.axis.options.index,yAxis:h.axis.options.index,points:[{x:e},{x:l.value}]}})}]},flagCirclepin:{className:"highcharts-flag-circlepin",start:k.addFlagFromForm("circlepin")},flagDiamondpin:{className:"highcharts-flag-diamondpin",start:k.addFlagFromForm("flag")},flagSquarepin:{className:"highcharts-flag-squarepin",start:k.addFlagFromForm("squarepin")},flagSimplepin:{className:"highcharts-flag-simplepin",start:k.addFlagFromForm("nopin")},zoomX:{className:"highcharts-zoom-x",init:function(button){this.chart.update({chart:{zoomType:"x"}}),y(this,"deselectButton",{button:button})}},zoomY:{className:"highcharts-zoom-y",init:function(button){this.chart.update({chart:{zoomType:"y"}}),y(this,"deselectButton",{button:button})}},zoomXY:{className:"highcharts-zoom-xy",init:function(button){this.chart.update({chart:{zoomType:"xy"}}),y(this,"deselectButton",{button:button})}},seriesTypeLine:{className:"highcharts-series-type-line",init:function(button){this.chart.series[0].update({type:"line",useOhlcData:!0}),y(this,"deselectButton",{button:button})}},seriesTypeOhlc:{className:"highcharts-series-type-ohlc",init:function(button){this.chart.series[0].update({type:"ohlc"}),y(this,"deselectButton",{button:button})}},seriesTypeCandlestick:{className:"highcharts-series-type-candlestick",init:function(button){this.chart.series[0].update({type:"candlestick"}),y(this,"deselectButton",{button:button})}},seriesTypeHeikinAshi:{className:"highcharts-series-type-heikinashi",init:function(button){this.chart.series[0].update({type:"heikinashi"}),y(this,"deselectButton",{button:button})}},seriesTypeHLC:{className:"highcharts-series-type-hlc",init:function(button){this.chart.series[0].update({type:"hlc",useOhlcData:!0}),y(this,"deselectButton",{button:button})}},seriesTypeHollowCandlestick:{className:"highcharts-series-type-hollowcandlestick",init:function(button){this.chart.series[0].update({type:"hollowcandlestick"}),y(this,"deselectButton",{button:button})}},fullScreen:{className:"highcharts-full-screen",noDataState:"normal",init:function(button){this.chart.fullscreen.toggle(),y(this,"deselectButton",{button:button})}},currentPriceIndicator:{className:"highcharts-current-price-indicator",init:function(button){var t=this.chart,o=t.series,n=t.stockTools,e=k.isPriceIndicatorEnabled(t.series);n&&n.guiEnabled&&(o.forEach((function(t){t.update({lastPrice:{enabled:!e},lastVisiblePrice:{enabled:!e,label:{enabled:!0}}},!1)})),t.redraw()),y(this,"deselectButton",{button:button})}},indicators:{className:"highcharts-indicators",init:function(){var t=this;y(t,"showPopup",{formType:"indicators",options:{},onSubmit:function(data){t.utils.manageIndicators.call(t,data)}})}},toggleAnnotations:{className:"highcharts-toggle-annotations",init:function(button){var t=this.chart,o=t.stockTools,n=o.getIconsURL();this.toggledAnnotations=!this.toggledAnnotations,(t.annotations||[]).forEach((function(t){t.setVisibility(!this.toggledAnnotations)}),this),o&&o.guiEnabled&&(this.toggledAnnotations?button.firstChild.style["background-image"]='url("'+n+'annotations-hidden.svg")':button.firstChild.style["background-image"]='url("'+n+'annotations-visible.svg")'),y(this,"deselectButton",{button:button})}},saveChart:{className:"highcharts-save-chart",noDataState:"normal",init:function(button){var t=this.chart,n=[],e=[],r=[],l=[];t.annotations.forEach((function(t,o){n[o]=t.userOptions})),t.series.forEach((function(t){t.is("sma")?e.push(t.userOptions):"flags"===t.type&&r.push(t.userOptions)})),t.yAxis.forEach((function(t){k.isNotNavigatorYAxis(t)&&l.push(t.options)})),o.win.localStorage.setItem(C+"chart",JSON.stringify({annotations:n,indicators:e,flags:r,yAxes:l})),y(this,"deselectButton",{button:button})}}}}}),n.prototype.utils=v(k,n.prototype.utils)})),n(o,"Stock/StockToolsGui.js",[o["Core/Chart/Chart.js"],o["Core/Globals.js"],o["Extensions/Annotations/NavigationBindings.js"],o["Core/DefaultOptions.js"],o["Core/Utilities.js"]],(function(t,o,n,e,r){var l=e.setOptions,h=r.addEvent,c=r.createElement,d=r.css,f=r.extend,y=r.fireEvent,x=r.getStyle,v=r.isArray,m=r.merge,A=r.pick,k="div",C="span",w="highcharts-",P=w+"active";l({lang:{stockTools:{gui:{simpleShapes:"Simple shapes",lines:"Lines",crookedLines:"Crooked lines",measure:"Measure",advanced:"Advanced",toggleAnnotations:"Toggle annotations",verticalLabels:"Vertical labels",flags:"Flags",zoomChange:"Zoom change",typeChange:"Type change",saveChart:"Save chart",indicators:"Indicators",currentPriceIndicator:"Current Price Indicators",zoomX:"Zoom X",zoomY:"Zoom Y",zoomXY:"Zooom XY",fullScreen:"Fullscreen",typeOHLC:"OHLC",typeLine:"Line",typeCandlestick:"Candlestick",typeHLC:"HLC",typeHollowCandlestick:"Hollow Candlestick",typeHeikinAshi:"Heikin Ashi",circle:"Circle",ellipse:"Ellipse",label:"Label",rectangle:"Rectangle",flagCirclepin:"Flag circle",flagDiamondpin:"Flag diamond",flagSquarepin:"Flag square",flagSimplepin:"Flag simple",measureXY:"Measure XY",measureX:"Measure X",measureY:"Measure Y",segment:"Segment",arrowSegment:"Arrow segment",ray:"Ray",arrowRay:"Arrow ray",line:"Line",arrowInfinityLine:"Arrow line",horizontalLine:"Horizontal line",verticalLine:"Vertical line",infinityLine:"Infinity line",crooked3:"Crooked 3 line",crooked5:"Crooked 5 line",elliott3:"Elliott 3 line",elliott5:"Elliott 5 line",verticalCounter:"Vertical counter",verticalLabel:"Vertical label",verticalArrow:"Vertical arrow",fibonacci:"Fibonacci",fibonacciTimeZones:"Fibonacci Time Zones",pitchfork:"Pitchfork",parallelChannel:"Parallel channel",timeCycles:"Time Cycles"}},navigation:{popup:{circle:"Circle",ellipse:"Ellipse",rectangle:"Rectangle",label:"Label",segment:"Segment",arrowSegment:"Arrow segment",ray:"Ray",arrowRay:"Arrow ray",line:"Line",arrowInfinityLine:"Arrow line",horizontalLine:"Horizontal line",verticalLine:"Vertical line",crooked3:"Crooked 3 line",crooked5:"Crooked 5 line",elliott3:"Elliott 3 line",elliott5:"Elliott 5 line",verticalCounter:"Vertical counter",verticalLabel:"Vertical label",verticalArrow:"Vertical arrow",fibonacci:"Fibonacci",fibonacciTimeZones:"Fibonacci Time Zones",pitchfork:"Pitchfork",parallelChannel:"Parallel channel",infinityLine:"Infinity line",measure:"Measure",measureXY:"Measure XY",measureX:"Measure X",measureY:"Measure Y",timeCycles:"Time Cycles",flags:"Flags",addButton:"add",saveButton:"save",editButton:"edit",removeButton:"remove",series:"Series",volume:"Volume",connector:"Connector",innerBackground:"Inner background",outerBackground:"Outer background",crosshairX:"Crosshair X",crosshairY:"Crosshair Y",tunnel:"Tunnel",background:"Background",noFilterMatch:"No match",searchIndicators:"Search Indicators",clearFilter:"✕ clear filter",index:"Index",period:"Period",periods:"Periods",standardDeviation:"Standard deviation",periodTenkan:"Tenkan period",periodSenkouSpanB:"Senkou Span B period",periodATR:"ATR period",multiplierATR:"ATR multiplier",shortPeriod:"Short period",longPeriod:"Long period",signalPeriod:"Signal period",decimals:"Decimals",algorithm:"Algorithm",topBand:"Top band",bottomBand:"Bottom band",initialAccelerationFactor:"Initial acceleration factor",maxAccelerationFactor:"Max acceleration factor",increment:"Increment",multiplier:"Multiplier",ranges:"Ranges",highIndex:"High index",lowIndex:"Low index",deviation:"Deviation",xAxisUnit:"x-axis unit",factor:"Factor",fastAvgPeriod:"Fast average period",slowAvgPeriod:"Slow average period",average:"Average",indicatorAliases:{abands:["Acceleration Bands"],bb:["Bollinger Bands"],dema:["Double Exponential Moving Average"],ema:["Exponential Moving Average"],ikh:["Ichimoku Kinko Hyo"],keltnerchannels:["Keltner Channels"],linearRegression:["Linear Regression"],pivotpoints:["Pivot Points"],pc:["Price Channel"],priceenvelopes:["Price Envelopes"],psar:["Parabolic SAR"],sma:["Simple Moving Average"],supertrend:["Super Trend"],tema:["Triple Exponential Moving Average"],vbp:["Volume by Price"],vwap:["Volume Weighted Moving Average"],wma:["Weighted Moving Average"],zigzag:["Zig Zag"],apo:["Absolute price indicator"],ad:["Accumulation/Distribution"],aroon:["Aroon"],aroonoscillator:["Aroon oscillator"],atr:["Average True Range"],ao:["Awesome oscillator"],cci:["Commodity Channel Index"],chaikin:["Chaikin"],cmf:["Chaikin Money Flow"],cmo:["Chande Momentum Oscillator"],disparityindex:["Disparity Index"],dmi:["Directional Movement Index"],dpo:["Detrended price oscillator"],klinger:["Klinger Oscillator"],linearRegressionAngle:["Linear Regression Angle"],linearRegressionIntercept:["Linear Regression Intercept"],linearRegressionSlope:["Linear Regression Slope"],macd:["Moving Average Convergence Divergence"],mfi:["Money Flow Index"],momentum:["Momentum"],natr:["Normalized Average True Range"],obv:["On-Balance Volume"],ppo:["Percentage Price oscillator"],roc:["Rate of Change"],rsi:["Relative Strength Index"],slowstochastic:["Slow Stochastic"],stochastic:["Stochastic"],trix:["TRIX"],williamsr:["Williams %R"]}}}},stockTools:{gui:{enabled:!0,className:"highcharts-bindings-wrapper",toolbarClassName:"stocktools-toolbar",buttons:["indicators","separator","simpleShapes","lines","crookedLines","measure","advanced","toggleAnnotations","separator","verticalLabels","flags","separator","zoomChange","fullScreen","typeChange","separator","currentPriceIndicator","saveChart"],definitions:{separator:{symbol:"separator.svg"},simpleShapes:{items:["label","circle","ellipse","rectangle"],circle:{symbol:"circle.svg"},ellipse:{symbol:"ellipse.svg"},rectangle:{symbol:"rectangle.svg"},label:{symbol:"label.svg"}},flags:{items:["flagCirclepin","flagDiamondpin","flagSquarepin","flagSimplepin"],flagSimplepin:{symbol:"flag-basic.svg"},flagDiamondpin:{symbol:"flag-diamond.svg"},flagSquarepin:{symbol:"flag-trapeze.svg"},flagCirclepin:{symbol:"flag-elipse.svg"}},lines:{items:["segment","arrowSegment","ray","arrowRay","line","arrowInfinityLine","horizontalLine","verticalLine"],segment:{symbol:"segment.svg"},arrowSegment:{symbol:"arrow-segment.svg"},ray:{symbol:"ray.svg"},arrowRay:{symbol:"arrow-ray.svg"},line:{symbol:"line.svg"},arrowInfinityLine:{symbol:"arrow-line.svg"},verticalLine:{symbol:"vertical-line.svg"},horizontalLine:{symbol:"horizontal-line.svg"}},crookedLines:{items:["elliott3","elliott5","crooked3","crooked5"],crooked3:{symbol:"crooked-3.svg"},crooked5:{symbol:"crooked-5.svg"},elliott3:{symbol:"elliott-3.svg"},elliott5:{symbol:"elliott-5.svg"}},verticalLabels:{items:["verticalCounter","verticalLabel","verticalArrow"],verticalCounter:{symbol:"vertical-counter.svg"},verticalLabel:{symbol:"vertical-label.svg"},verticalArrow:{symbol:"vertical-arrow.svg"}},advanced:{items:["fibonacci","fibonacciTimeZones","pitchfork","parallelChannel","timeCycles"],pitchfork:{symbol:"pitchfork.svg"},fibonacci:{symbol:"fibonacci.svg"},fibonacciTimeZones:{symbol:"fibonacci-timezone.svg"},parallelChannel:{symbol:"parallel-channel.svg"},timeCycles:{symbol:"time-cycles.svg"}},measure:{items:["measureXY","measureX","measureY"],measureX:{symbol:"measure-x.svg"},measureY:{symbol:"measure-y.svg"},measureXY:{symbol:"measure-xy.svg"}},toggleAnnotations:{symbol:"annotations-visible.svg"},currentPriceIndicator:{symbol:"current-price-show.svg"},indicators:{symbol:"indicators.svg"},zoomChange:{items:["zoomX","zoomY","zoomXY"],zoomX:{symbol:"zoom-x.svg"},zoomY:{symbol:"zoom-y.svg"},zoomXY:{symbol:"zoom-xy.svg"}},typeChange:{items:["typeOHLC","typeLine","typeCandlestick","typeHollowCandlestick","typeHLC","typeHeikinAshi"],typeOHLC:{symbol:"series-ohlc.svg"},typeLine:{symbol:"series-line.svg"},typeCandlestick:{symbol:"series-candlestick.svg"},typeHLC:{symbol:"series-hlc.svg"},typeHeikinAshi:{symbol:"series-heikin-ashi.svg"},typeHollowCandlestick:{symbol:"series-hollow-candlestick.svg"}},fullScreen:{symbol:"fullscreen.svg"},saveChart:{symbol:"save-chart.svg"}}}}}),h(t,"afterGetContainer",(function(){this.setStockTools()})),h(t,"getMargins",(function(){var t=this.stockTools&&this.stockTools.listWrapper,o=t&&(t.startWidth+x(t,"padding-left")+x(t,"padding-right")||t.offsetWidth);o&&o<this.plotWidth&&(this.plotLeft+=o,this.spacing[3]+=o)}),{order:0}),["beforeRender","beforeRedraw"].forEach((function(o){h(t,o,(function(){if(this.stockTools){var t=this.options.chart,o=this.stockTools.listWrapper,n=o&&(o.startWidth+x(o,"padding-left")+x(o,"padding-right")||o.offsetWidth),e=!1;if(n&&n<this.plotWidth){var r=A(t.spacingLeft,t.spacing&&t.spacing[3],0)+n,l=r-this.spacingBox.x;this.spacingBox.x=r,this.spacingBox.width-=l,e=!0}else 0===n&&(e=!0);n!==this.stockTools.prevOffsetWidth&&(this.stockTools.prevOffsetWidth=n,e&&(this.isDirtyLegend=!0))}}))})),h(t,"destroy",(function(){this.stockTools&&this.stockTools.destroy()})),h(t,"redraw",(function(){this.stockTools&&this.stockTools.guiEnabled&&this.stockTools.redraw()}));var O=function(){function t(t,o,n){this.arrowDown=void 0,this.arrowUp=void 0,this.arrowWrapper=void 0,this.listWrapper=void 0,this.showhideBtn=void 0,this.submenu=void 0,this.toolbar=void 0,this.wrapper=void 0,this.chart=n,this.options=t,this.lang=o,this.iconsURL=this.getIconsURL(),this.guiEnabled=t.enabled,this.visible=A(t.visible,!0),this.placed=A(t.placed,!1),this.eventsToUnbind=[],this.guiEnabled&&(this.createHTML(),this.init(),this.showHideNavigatorion()),y(this,"afterInit")}return t.prototype.init=function(){var button,t=this,o=this.lang,n=this.options,e=this.toolbar,r=t.addSubmenu,l=n.buttons,defs=n.definitions,c=e.childNodes;l.forEach((function(n){button=t.addButton(e,defs,n,o),t.eventsToUnbind.push(h(button.buttonWrapper,"click",(function(){t.eraseActiveButtons(c,button.buttonWrapper)}))),v(defs[n].items)&&r.call(t,button,defs[n])}))},t.prototype.addSubmenu=function(t,button){var o,n=this,e=t.submenuArrow,r=t.buttonWrapper,l=x(r,"width"),f=this.wrapper,y=this.listWrapper,v=this.toolbar.childNodes,m=0;this.submenu=o=c("ul",{className:w+"submenu-wrapper"},void 0,r),this.addSubmenuItems(r,button),n.eventsToUnbind.push(h(e,"click",(function(t){t.stopPropagation(),n.eraseActiveButtons(v,r),r.className.indexOf(w+"current")>=0?(y.style.width=y.startWidth+"px",r.classList.remove(w+"current"),o.style.display="none"):(o.style.display="block",m=o.offsetHeight-r.offsetHeight-3,o.offsetHeight+r.offsetTop>f.offsetHeight&&r.offsetTop>m||(m=0),d(o,{top:-m+"px",left:l+3+"px"}),r.className+=" "+w+"current",y.startWidth=f.offsetWidth,y.style.width=y.startWidth+x(y,"padding-left")+o.offsetWidth+3+"px")})))},t.prototype.addSubmenuItems=function(t,button){var o,n,e=this,r=this.submenu,l=this.lang,c=this.listWrapper;button.items.forEach((function(o){n=e.addButton(r,button,o,l),e.eventsToUnbind.push(h(n.mainButton,"click",(function(){e.switchSymbol(this,t,!0),c.style.width=c.startWidth+"px",r.style.display="none"})))})),o=r.querySelectorAll("li > ."+w+"menu-item-btn")[0],e.switchSymbol(o,!1)},t.prototype.eraseActiveButtons=function(t,o,n){[].forEach.call(t,(function(t){t!==o&&(t.classList.remove(w+"current"),t.classList.remove(w+"active"),(n=t.querySelectorAll("."+w+"submenu-wrapper")).length>0&&(n[0].style.display="none"))}))},t.prototype.addButton=function(o,n,e,r){void 0===r&&(r={});var l,h,d,f=n[e],y=f.items,x=t.prototype.classMapping,v=f.className||"";return d=c("li",{className:A(x[e],"")+" "+v,title:r[e]||e},void 0,o),l=c(C,{className:w+"menu-item-btn"},void 0,d),y&&y.length?(h=c(C,{className:w+"submenu-item-arrow "+w+"arrow-right"},void 0,d)).style.backgroundImage="url("+this.iconsURL+"arrow-bottom.svg)":l.style.backgroundImage="url("+this.iconsURL+f.symbol+")",{buttonWrapper:d,mainButton:l,submenuArrow:h}},t.prototype.addNavigation=function(){var t=this,o=t.wrapper;t.arrowWrapper=c(k,{className:w+"arrow-wrapper"}),t.arrowUp=c(k,{className:w+"arrow-up"},void 0,t.arrowWrapper),t.arrowUp.style.backgroundImage="url("+this.iconsURL+"arrow-right.svg)",t.arrowDown=c(k,{className:w+"arrow-down"},void 0,t.arrowWrapper),t.arrowDown.style.backgroundImage="url("+this.iconsURL+"arrow-right.svg)",o.insertBefore(t.arrowWrapper,o.childNodes[0]),t.scrollButtons()},t.prototype.scrollButtons=function(){var t=0,o=this,n=o.wrapper,e=o.toolbar,r=.1*n.offsetHeight;o.eventsToUnbind.push(h(o.arrowUp,"click",(function(){t>0&&(t-=r,e.style.marginTop=-t+"px")}))),o.eventsToUnbind.push(h(o.arrowDown,"click",(function(){n.offsetHeight+t<=e.offsetHeight+r&&(t+=r,e.style.marginTop=-t+"px")})))},t.prototype.createHTML=function(){var t,o,n=this,e=n.chart,r=n.options,l=e.container,d=e.options.navigation,f=d&&d.bindingsClassName,y=n.wrapper=c(k,{className:w+"stocktools-wrapper "+r.className+" "+f});l.appendChild(y),["mousedown","mousemove","click","touchstart"].forEach((function(t){h(y,t,(function(t){return t.stopPropagation()}))})),h(y,"mouseover",(function(t){return e.pointer.onContainerMouseLeave(t)})),n.toolbar=o=c("ul",{className:w+"stocktools-toolbar "+r.toolbarClassName}),n.listWrapper=t=c(k,{className:w+"menu-wrapper"}),y.insertBefore(t,y.childNodes[0]),t.insertBefore(o,t.childNodes[0]),n.showHideToolbar(),n.addNavigation()},t.prototype.showHideNavigatorion=function(){this.visible&&this.toolbar.offsetHeight>this.wrapper.offsetHeight-50?this.arrowWrapper.style.display="block":(this.toolbar.style.marginTop="0px",this.arrowWrapper.style.display="none")},t.prototype.showHideToolbar=function(){var t,o=this,n=this.chart,e=o.wrapper,r=this.listWrapper,l=this.submenu,d=this.visible;this.showhideBtn=t=c(k,{className:w+"toggle-toolbar "+w+"arrow-left"},void 0,e),t.style.backgroundImage="url("+this.iconsURL+"arrow-right.svg)",d?(e.style.height="100%",t.style.top=x(r,"padding-top")+"px",t.style.left=e.offsetWidth+x(r,"padding-left")+"px"):(l&&(l.style.display="none"),t.style.left="0px",o.visible=d=!1,r.classList.add(w+"hide"),t.classList.toggle(w+"arrow-right"),e.style.height=t.offsetHeight+"px"),o.eventsToUnbind.push(h(t,"click",(function(){n.update({stockTools:{gui:{visible:!d,placed:!0}}})})))},t.prototype.switchSymbol=function(button,t){var o=button.parentNode,n=o.className,e=o.parentNode.parentNode;n.indexOf("highcharts-disabled-btn")>-1||(e.className="",n&&e.classList.add(n.trim()),e.querySelectorAll("."+w+"menu-item-btn")[0].style.backgroundImage=button.style.backgroundImage,t&&this.toggleButtonAciveClass(e))},t.prototype.toggleButtonAciveClass=function(button){button.className.indexOf(P)>=0?button.classList.remove(P):button.classList.add(P)},t.prototype.unselectAllButtons=function(button){var t=button.parentNode.querySelectorAll("."+P);[].forEach.call(t,(function(t){t!==button&&t.classList.remove(P)}))},t.prototype.update=function(t,o){m(!0,this.chart.options.stockTools,t),this.destroy(),this.chart.setStockTools(t),this.chart.navigationBindings&&this.chart.navigationBindings.update(),this.chart.isDirtyBox=!0,A(o,!0)&&this.chart.redraw()},t.prototype.destroy=function(){var t=this.wrapper,o=t&&t.parentNode;this.eventsToUnbind.forEach((function(t){t()})),o&&o.removeChild(t)},t.prototype.redraw=function(){this.showHideNavigatorion()},t.prototype.getIconsURL=function(){return this.chart.options.navigation.iconsURL||this.options.iconsURL||"https://code.highcharts.com/9.3.2/gfx/stock-icons/"},t}();return O.prototype.classMapping={circle:w+"circle-annotation",ellipse:w+"ellipse-annotation",rectangle:w+"rectangle-annotation",label:w+"label-annotation",segment:w+"segment",arrowSegment:w+"arrow-segment",ray:w+"ray",arrowRay:w+"arrow-ray",line:w+"infinity-line",arrowInfinityLine:w+"arrow-infinity-line",verticalLine:w+"vertical-line",horizontalLine:w+"horizontal-line",crooked3:w+"crooked3",crooked5:w+"crooked5",elliott3:w+"elliott3",elliott5:w+"elliott5",pitchfork:w+"pitchfork",fibonacci:w+"fibonacci",fibonacciTimeZones:w+"fibonacci-time-zones",parallelChannel:w+"parallel-channel",measureX:w+"measure-x",measureY:w+"measure-y",measureXY:w+"measure-xy",timeCycles:w+"time-cycles",verticalCounter:w+"vertical-counter",verticalLabel:w+"vertical-label",verticalArrow:w+"vertical-arrow",currentPriceIndicator:w+"current-price-indicator",indicators:w+"indicators",flagCirclepin:w+"flag-circlepin",flagDiamondpin:w+"flag-diamondpin",flagSquarepin:w+"flag-squarepin",flagSimplepin:w+"flag-simplepin",zoomX:w+"zoom-x",zoomY:w+"zoom-y",zoomXY:w+"zoom-xy",typeLine:w+"series-type-line",typeOHLC:w+"series-type-ohlc",typeHLC:w+"series-type-hlc",typeCandlestick:w+"series-type-candlestick",typeHollowCandlestick:w+"series-type-hollowcandlestick",typeHeikinAshi:w+"series-type-heikinashi",fullScreen:w+"full-screen",toggleAnnotations:w+"toggle-annotations",saveChart:w+"save-chart",separator:w+"separator"},f(t.prototype,{setStockTools:function(t){var o=this.options,n=o.lang,e=m(o.stockTools&&o.stockTools.gui,t&&t.gui),r=n&&n.stockTools&&n.stockTools.gui;this.stockTools=new O(e,r,this),this.stockTools.guiEnabled&&(this.isDirtyBox=!0)}}),h(n,"selectButton",(function(t){var button=t.button,o=this.chart.stockTools;o&&o.guiEnabled&&(o.unselectAllButtons(t.button),button.parentNode.className.indexOf("highcharts-submenu-wrapper")>=0&&(button=button.parentNode.parentNode),o.toggleButtonAciveClass(button))})),h(n,"deselectButton",(function(t){var button=t.button,o=this.chart.stockTools;o&&o.guiEnabled&&(button.parentNode.className.indexOf("highcharts-submenu-wrapper")>=0&&(button=button.parentNode.parentNode),o.toggleButtonAciveClass(button))})),h(t,"render",(function(){var t=this,o=t.stockTools,button=o&&o.toolbar&&o.toolbar.querySelector(".highcharts-current-price-indicator");o&&t.navigationBindings&&t.options.series&&button&&(t.navigationBindings.constructor.prototype.utils.isPriceIndicatorEnabled(t.series)?button.firstChild.style["background-image"]='url("'+o.getIconsURL()+'current-price-hide.svg")':button.firstChild.style["background-image"]='url("'+o.getIconsURL()+'current-price-show.svg")')})),o.Toolbar=O,o.Toolbar})),n(o,"masters/modules/stock-tools.src.js",[],(function(){}))},t.exports?(l.default=l,t.exports=l):(e=[n(131),n(239)],void 0===(r=function(t){return l(t),l.Highcharts=t,l}.apply(o,e))||(t.exports=r))}}]);