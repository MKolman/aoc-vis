/*! For license information please see LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[115],{336:function(o,t,e){"use strict";var n,r,l;l=function(o){var t=o?o._modules:{};function e(o,path,t,e){o.hasOwnProperty(path)||(o[path]=e.apply(null,t))}e(t,"Series/NodesComposition.js",[t["Core/Series/Point.js"],t["Core/Series/Series.js"],t["Core/Utilities.js"]],(function(o,t,e){var n,r=e.defined,l=e.extend,d=e.find,h=e.pick;return function(e){var n=[];function c(){return this.data=[].concat(this.points||[],this.nodes),t.prototype.destroy.apply(this,arguments)}function f(){this.nodes&&(this.nodes.forEach((function(o){o.destroy()})),this.nodes.length=0),t.prototype.setData.apply(this,arguments)}function v(t){var e=arguments,n=this.isNode?this.linksTo.concat(this.linksFrom):[this.fromNode,this.toNode];"select"!==t&&n.forEach((function(t){t&&t.series&&(o.prototype.setState.apply(t,e),t.isNode||(t.fromNode.graphic&&o.prototype.setState.apply(t.fromNode,e),t.toNode&&t.toNode.graphic&&o.prototype.setState.apply(t.toNode,e)))})),o.prototype.setState.apply(this,e)}e.compose=function(o,t){if(-1===n.indexOf(o)){n.push(o);var e=o.prototype;e.setNodeState=v,e.setState=v}if(-1===n.indexOf(t)){n.push(t);var r=t.prototype;r.destroy=c,r.setData=f}return t},e.createNode=function(o){var t,e=this.pointClass,n=function(o,t){return d(o,(function(o){return o.id===t}))},r=n(this.nodes,o);return r||(t=this.options.nodes&&n(this.options.nodes,o),(r=(new e).init(this,l({className:"highcharts-node",isNode:!0,id:o,y:1},t))).linksTo=[],r.linksFrom=[],r.formatPrefix="node",r.name=r.name||r.options.id||"",r.mass=h(r.options.mass,r.options.marker&&r.options.marker.radius,this.options.marker&&this.options.marker.radius,4),r.getSum=function(){var o=0,t=0;return r.linksTo.forEach((function(link){o+=link.weight})),r.linksFrom.forEach((function(link){t+=link.weight})),Math.max(o,t)},r.offset=function(o,t){for(var e=0,i=0;i<r[t].length;i++){if(r[t][i]===o)return e;e+=r[t][i].weight}},r.hasShape=function(){var o=0;return r.linksTo.forEach((function(link){link.outgoing&&o++})),!r.linksTo.length||o!==r.linksTo.length},this.nodes.push(r)),r},e.destroy=c,e.generatePoints=function(){var o=this.chart,e={};t.prototype.generatePoints.call(this),this.nodes||(this.nodes=[]),this.colorCounter=0,this.nodes.forEach((function(o){o.linksFrom.length=0,o.linksTo.length=0,o.level=o.options.level})),this.points.forEach((function(t){r(t.from)&&(e[t.from]||(e[t.from]=this.createNode(t.from)),e[t.from].linksFrom.push(t),t.fromNode=e[t.from],o.styledMode?t.colorIndex=h(t.options.colorIndex,e[t.from].colorIndex):t.color=t.options.color||e[t.from].color),r(t.to)&&(e[t.to]||(e[t.to]=this.createNode(t.to)),e[t.to].linksTo.push(t),t.toNode=e[t.to]),t.name=t.name||t.id}),this),this.nodeLookup=e},e.setNodeState=v}(n||(n={})),n})),e(t,"Series/Sankey/SankeyPoint.js",[t["Core/Series/Point.js"],t["Core/Series/SeriesRegistry.js"],t["Core/Utilities.js"]],(function(o,t,e){var n,r=this&&this.__extends||(n=function(o,b){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,b){o.__proto__=b}||function(o,b){for(var p in b)b.hasOwnProperty(p)&&(o[p]=b[p])},n(o,b)},function(o,b){function t(){this.constructor=o}n(o,b),o.prototype=null===b?Object.create(b):(t.prototype=b.prototype,new t)}),l=t.seriesTypes.column,d=e.defined,h=(e.extend,function(t){function e(){var o=null!==t&&t.apply(this,arguments)||this;return o.className=void 0,o.fromNode=void 0,o.level=void 0,o.linkBase=void 0,o.linksFrom=void 0,o.linksTo=void 0,o.mass=void 0,o.nodeX=void 0,o.nodeY=void 0,o.options=void 0,o.series=void 0,o.toNode=void 0,o}return r(e,t),e.prototype.applyOptions=function(t,e){return o.prototype.applyOptions.call(this,t,e),d(this.options.level)&&(this.options.column=this.column=this.options.level),this},e.prototype.getClassName=function(){return(this.isNode?"highcharts-node ":"highcharts-link ")+o.prototype.getClassName.call(this)},e.prototype.isValid=function(){return this.isNode||"number"==typeof this.weight},e}(l.prototype.pointClass));return h})),e(t,"Series/TreeUtilities.js",[t["Core/Color/Color.js"],t["Core/Utilities.js"]],(function(o,t){var e=t.extend,n=t.isArray,r=t.isNumber,l=t.isObject,d=t.merge,h=t.pick,c={getColor:function(t,e){var n,r,l,d,c,f,v=e.index,m=e.mapOptionsToLevel,y=e.parentColor,k=e.parentColorIndex,C=e.series,N=e.colors,S=e.siblings,x=C.points,O=C.chart.options.chart;return t&&(n=x[t.i],r=m[t.level]||{},n&&r.colorByPoint&&(d=n.index%(N?N.length:O.colorCount),l=N&&N[d]),C.chart.styledMode||(c=h(n&&n.options.color,r&&r.color,l,y&&function(t){var e=r&&r.colorVariation;return e&&"brightness"===e.key&&v&&S?o.parse(t).brighten(e.to*(v/S)).get():t}(y),C.color)),f=h(n&&n.options.colorIndex,r&&r.colorIndex,d,k,e.colorIndex)),{color:c,colorIndex:f}},getLevelOptions:function(o){var t,e,i,c,f,v,m=null;if(l(o))for(m={},c=r(o.from)?o.from:1,v=o.levels,e={},t=l(o.defaults)?o.defaults:{},n(v)&&(e=v.reduce((function(o,e){var n,f,v;return l(e)&&r(e.level)&&(v=d({},e),f=h(v.levelIsConstant,t.levelIsConstant),delete v.levelIsConstant,delete v.level,n=e.level+(f?0:c-1),l(o[n])?d(!0,o[n],v):o[n]=v),o}),{})),f=r(o.to)?o.to:1,i=0;i<=f;i++)m[i]=d({},t,l(e[i])?e[i]:{});return m},setTreeValues:function o(t,n){var r=n.before,l=n.idRoot,d=n.mapIdToNode[l],c=!1!==n.levelIsConstant,f=n.points[t.i],v=f&&f.options||{},m=[],y=0;t.levelDynamic=t.level-(c?0:d.level),t.name=h(f&&f.name,""),t.visible=l===t.id||!0===n.visible,"function"==typeof r&&(t=r(t,n)),t.children.forEach((function(r,i){var l=e({},n);e(l,{index:i,siblings:t.children.length,visible:t.visible}),r=o(r,l),m.push(r),r.visible&&(y+=r.val)}));var k=h(v.value,y);return t.visible=k>=0&&(y>0||t.visible),t.children=m,t.childrenTotal=y,t.isLeaf=t.visible&&!y,t.val=k,t},updateRootId:function(o){var t,e;return l(o)&&(e=l(o.options)?o.options:{},t=h(o.rootNode,e.rootId,""),l(o.userOptions)&&(o.userOptions.rootId=t),o.rootNode=t),t}};return c})),e(t,"Series/Sankey/SankeySeries.js",[t["Core/Color/Color.js"],t["Core/Globals.js"],t["Series/NodesComposition.js"],t["Series/Sankey/SankeyPoint.js"],t["Core/Series/SeriesRegistry.js"],t["Series/TreeUtilities.js"],t["Core/Utilities.js"]],(function(o,t,e,n,r,l,d){var h,c=this&&this.__extends||(h=function(o,b){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,b){o.__proto__=b}||function(o,b){for(var p in b)b.hasOwnProperty(p)&&(o[p]=b[p])},h(o,b)},function(o,b){function t(){this.constructor=o}h(o,b),o.prototype=null===b?Object.create(b):(t.prototype=b.prototype,new t)}),f=r.series,v=r.seriesTypes.column,m=l.getLevelOptions,y=d.defined,k=d.extend,C=d.find,N=d.isObject,S=d.merge,x=d.pick,O=d.relativeLength,P=d.stableSort,L=function(t){function n(){var o=null!==t&&t.apply(this,arguments)||this;return o.colDistance=void 0,o.data=void 0,o.group=void 0,o.nodeLookup=void 0,o.nodePadding=void 0,o.nodes=void 0,o.nodeWidth=void 0,o.options=void 0,o.points=void 0,o.translationFactor=void 0,o}return c(n,t),n.getDLOptions=function(o){var t=N(o.optionsPoint)?o.optionsPoint.dataLabels:{},e=N(o.level)?o.level.dataLabels:{};return S({style:{}},e,t)},n.prototype.createNodeColumn=function(){var o=this,t=this.chart,e=[];return e.sum=function(){return this.reduce((function(o,t){return o+t.getSum()}),0)},e.offset=function(n,r){for(var l,d=0,h=o.nodePadding,i=0;i<e.length;i++){var c=e[i].getSum(),f=Math.max(c*r,o.options.minLinkWidth),v=n.options[t.inverted?"offsetHorizontal":"offsetVertical"],m=n.options.offset||0;if(l=c?f+h:0,e[i]===n)return{relativeTop:d+(y(v)?O(v,f):O(m,l))};d+=l}},e.top=function(e){var n=o.nodePadding,r=this.reduce((function(t,r){return t>0&&(t+=n),t+=Math.max(r.getSum()*e,o.options.minLinkWidth)}),0);return(t.plotSizeY-r)/2},e},n.prototype.createNodeColumns=function(){var o=[];this.nodes.forEach((function(t){var e,n=-1;if(!y(t.options.column))if(0===t.linksTo.length)t.column=0;else{for(var i=0;i<t.linksTo.length;i++){var r=t.linksTo[i];r.fromNode.column>n&&r.fromNode!==t&&(n=(e=r.fromNode).column)}if(t.column=n+1,e&&"hanging"===e.options.layout){t.hangsFrom=e;var l=-1;C(e.linksFrom,(function(link,o){var e=link.toNode===t;return e&&(l=o),e})),t.column+=l}}o[t.column]||(o[t.column]=this.createNodeColumn()),o[t.column].push(t)}),this);for(var i=0;i<o.length;i++)void 0===o[i]&&(o[i]=this.createNodeColumn());return o},n.prototype.generatePoints=function(){function o(t,e){void 0===t.level&&(t.level=e,t.linksFrom.forEach((function(link){link.toNode&&o(link.toNode,e+1)})))}e.generatePoints.apply(this,arguments),this.orderNodes&&(this.nodes.filter((function(o){return 0===o.linksTo.length})).forEach((function(t){o(t,0)})),P(this.nodes,(function(a,b){return a.level-b.level})))},n.prototype.getNodePadding=function(){var o=this.options.nodePadding||0;if(this.nodeColumns){var t=this.nodeColumns.reduce((function(o,col){return Math.max(o,col.length)}),0);t*o>this.chart.plotSizeY&&(o=this.chart.plotSizeY/t)}return o},n.prototype.hasData=function(){return!!this.processedXData.length},n.prototype.pointAttribs=function(t,e){if(!t)return{};var n=this,r=t.isNode?t.level:t.fromNode.level,l=n.mapOptionsToLevel[r||0]||{},d=t.options,h=l.states&&l.states[e||""]||{},c=["colorByPoint","borderColor","borderWidth","linkOpacity"].reduce((function(o,t){return o[t]=x(h[t],d[t],l[t],n.options[t]),o}),{}),f=x(h.color,d.color,c.colorByPoint?t.color:l.color);return t.isNode?{fill:f,stroke:c.borderColor,"stroke-width":c.borderWidth}:{fill:o.parse(f).setOpacity(c.linkOpacity).get()}},n.prototype.render=function(){var o=this.points;this.points=this.points.concat(this.nodes||[]),v.prototype.render.call(this),this.points=o},n.prototype.translate=function(){var o=this;this.processedXData||this.processData(),this.generatePoints(),this.nodeColumns=this.createNodeColumns(),this.nodeWidth=O(this.options.nodeWidth,this.chart.plotSizeX);var t=this,e=this.chart,n=this.options,r=this.nodeWidth,l=this.nodeColumns;this.nodePadding=this.getNodePadding(),this.translationFactor=l.reduce((function(r,l){return Math.min(r,function(r){for(var l,i,d=r.slice(),h=o.options.minLinkWidth||0,c=0,f=e.plotSizeY-n.borderWidth-(r.length-1)*t.nodePadding;r.length;){for(c=f/r.sum(),l=!1,i=r.length;i--;)r[i].getSum()*c<h&&(r.splice(i,1),f-=h,l=!0);if(!l)break}return r.length=0,d.forEach((function(o){return r.push(o)})),c}(l))}),1/0),this.colDistance=(e.plotSizeX-r-n.borderWidth)/Math.max(1,l.length-1),t.mapOptionsToLevel=m({from:1,levels:n.levels,to:l.length-1,defaults:{borderColor:n.borderColor,borderRadius:n.borderRadius,borderWidth:n.borderWidth,color:t.color,colorByPoint:n.colorByPoint,levelIsConstant:!0,linkColor:n.linkColor,linkLineWidth:n.linkLineWidth,linkOpacity:n.linkOpacity,states:n.states}}),l.forEach((function(o){o.forEach((function(e){t.translateNode(e,o)}))}),this),this.nodes.forEach((function(o){o.linksFrom.forEach((function(o){(o.weight||o.isNull)&&o.to&&(t.translateLink(o),o.allowShadow=!1)}))}))},n.prototype.translateLink=function(o){var t=function(t,e){var n=t.offset(o,e)*l;return Math.min(t.nodeY+n,t.nodeY+(t.shapeArgs&&t.shapeArgs.height||0)-d)},e=o.fromNode,n=o.toNode,r=this.chart,l=this.translationFactor,d=Math.max(o.weight*l,this.options.minLinkWidth),h=this.options,c=(r.inverted?-this.colDistance:this.colDistance)*h.curveFactor,f=t(e,"linksFrom"),v=t(n,"linksTo"),m=e.nodeX,y=this.nodeWidth,k=n.nodeX,C=o.outgoing,N=k>m+y;if(r.inverted&&(f=r.plotSizeY-f,v=(r.plotSizeY||0)-v,y=-y,d=-d,N=m>k),o.shapeType="path",o.linkBase=[f,f+d,v,v+d],N&&"number"==typeof v)o.shapeArgs={d:[["M",m+y,f],["C",m+y+c,f,k-c,v,k,v],["L",k+(C?y:0),v+d/2],["L",k,v+d],["C",k-c,v+d,m+y+c,f+d,m+y,f+d],["Z"]]};else if("number"==typeof v){var S=20,x=r.plotHeight-f-d,O=k-S-d,P=k-S,L=k,T=m+y,w=T+S,j=w+d,W=f,F=f+d,_=F+S,M=_+x,I=M+S,z=I+d,E=v,D=E+d,Y=D+S,B=F-.7*d,X=I+.7*d,A=D-.7*d,R=L-.7*d,U=T+.7*d;o.shapeArgs={d:[["M",T,W],["C",U,W,j,B,j,_],["L",j,M],["C",j,X,U,z,T,z],["L",L,z],["C",R,z,O,X,O,M],["L",O,Y],["C",O,A,R,E,L,E],["L",L,D],["C",P,D,P,D,P,Y],["L",P,M],["C",P,I,P,I,L,I],["L",T,I],["C",w,I,w,I,w,M],["L",w,_],["C",w,F,w,F,T,F],["Z"]]}}o.dlBox={x:m+(k-m+y)/2,y:f+(v-f)/2,height:d,width:0},o.tooltipPos=r.inverted?[r.plotSizeY-o.dlBox.y-d/2,r.plotSizeX-o.dlBox.x]:[o.dlBox.x,o.dlBox.y+d/2],o.y=o.plotY=1,o.color||(o.color=e.color)},n.prototype.translateNode=function(o,t){var e=this.translationFactor,r=this.chart,l=this.options,d=o.getSum(),h=Math.max(Math.round(d*e),this.options.minLinkWidth),c=Math.round(this.nodeWidth),f=Math.round(l.borderWidth)%2/2,v=t.offset(o,e),m=Math.floor(x(v.absoluteTop,t.top(e)+v.relativeTop))+f,y=Math.floor(this.colDistance*o.column+l.borderWidth/2)+O(o.options.offsetHorizontal||0,c)+f,k=r.inverted?r.plotSizeX-y:y;if(o.sum=d,d){o.shapeType="rect",o.nodeX=k,o.nodeY=m;var C=k,N=m,S=o.options.width||l.width||c,P=o.options.height||l.height||h;r.inverted&&(C=k-c,N=r.plotSizeY-m-h,S=o.options.height||l.height||c,P=o.options.width||l.width||h),o.dlOptions=n.getDLOptions({level:this.mapOptionsToLevel[o.level],optionsPoint:o.options}),o.plotX=1,o.plotY=1,o.tooltipPos=r.inverted?[r.plotSizeY-N-P/2,r.plotSizeX-C-S/2]:[C+S/2,N+P/2],o.shapeArgs={x:C,y:N,width:S,height:P,display:o.hasShape()?"":"none"}}else o.dlOptions={enabled:!1}},n.defaultOptions=S(v.defaultOptions,{borderWidth:0,colorByPoint:!0,curveFactor:.33,dataLabels:{enabled:!0,backgroundColor:"none",crop:!1,nodeFormat:void 0,nodeFormatter:function(){return this.point.name},format:void 0,formatter:function(){},inside:!0},inactiveOtherPoints:!0,linkOpacity:.5,minLinkWidth:0,nodeWidth:20,nodePadding:10,showInLegend:!1,states:{hover:{linkOpacity:1},inactive:{linkOpacity:.1,opacity:.1,animation:{duration:50}}},tooltip:{followPointer:!0,headerFormat:'<span style="font-size: 10px">{series.name}</span><br/>',pointFormat:"{point.fromNode.name} â†’ {point.toNode.name}: <b>{point.weight}</b><br/>",nodeFormat:"{point.name}: <b>{point.sum}</b><br/>"}}),n}(v);return e.compose(n,L),k(L.prototype,{animate:f.prototype.animate,createNode:e.createNode,forceDL:!0,invertible:!0,isCartesian:!1,orderNodes:!0,noSharedTooltip:!0,pointArrayMap:["from","to"],pointClass:n,searchPoint:t.noop}),r.registerSeriesType("sankey",L),L})),e(t,"masters/modules/sankey.src.js",[],(function(){}))},o.exports?(l.default=l,o.exports=l):(n=[e(131)],void 0===(r=function(o){return l(o),l.Highcharts=o,l}.apply(t,n))||(o.exports=r))}}]);