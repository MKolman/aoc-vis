/*! For license information please see LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[64],{278:function(r,e,t){"use strict";var o,n,d;d=function(r){var e=r?r._modules:{};function t(r,path,e,t){r.hasOwnProperty(path)||(r[path]=t.apply(null,e))}t(e,"Extensions/DraggablePoints.js",[e["Core/Animation/AnimationUtilities.js"],e["Core/Chart/Chart.js"],e["Core/Globals.js"],e["Core/Series/Point.js"],e["Core/Series/Series.js"],e["Core/Series/SeriesRegistry.js"],e["Core/Utilities.js"]],(function(r,e,t,o,n,d,l){var h=r.animObject,c=d.seriesTypes,x=l.addEvent,f=l.clamp,m=l.isNumber,v=l.merge,y=l.objectEach,D=l.pick;function P(r){return{left:"right",right:"left",top:"bottom",bottom:"top"}[r]}var w=function(r){var e=r.shapeArgs||r.graphic.getBBox(),t=e.r||0,o=e.height-t,n=e.height/2;return[["M",0,t],["L",0,n-5],["A",1,1,0,0,0,0,n+5],["A",1,1,0,0,0,0,n-5],["M",0,n+5],["L",0,o]]},z=n.prototype.dragDropProps={x:{axis:"x",move:!0},y:{axis:"y",move:!0}};c.flags&&(c.flags.prototype.dragDropProps=z);var H=c.column.prototype.dragDropProps={x:{axis:"x",move:!0},y:{axis:"y",move:!1,resize:!0,beforeResize:function(r,e,t){var o,n,d=t.series.translatedThreshold,l=r.attr("y");e.y>=t.series.options.threshold?(o=r.attr("height"),n=d?d-(l+o):0,r.attr({height:Math.max(0,Math.round(o+n))})):r.attr({y:Math.round(l+(d?d-l:0))})},resizeSide:function(r,e){var t=e.series.chart.dragHandles,o=r.y>=(e.series.options.threshold||0)?"top":"bottom",n=P(o);return t[n]&&(t[n].destroy(),delete t[n]),o},handlePositioner:function(r){var e=r.shapeArgs||r.graphic&&r.graphic.getBBox()||{},t=r.series.yAxis.reversed,o=r.series.options.threshold||0,n=r.y||0,d=!t&&n>=o||t&&n<o;return{x:e.x||0,y:d?e.y||0:(e.y||0)+(e.height||0)}},handleFormatter:function(r){var e=r.shapeArgs||{},t=e.r||0,o=e.width||0,n=o/2;return[["M",t,0],["L",n-5,0],["A",1,1,0,0,0,n+5,0],["A",1,1,0,0,0,n-5,0],["M",n+5,0],["L",o-t,0]]}}};if(c.bullet&&(c.bullet.prototype.dragDropProps={x:H.x,y:H.y,target:{optionName:"draggableTarget",axis:"y",move:!0,resize:!0,resizeSide:"top",handlePositioner:function(r){var e=r.targetGraphic.getBBox();return{x:r.barX,y:e.y+e.height/2}},handleFormatter:H.y.handleFormatter}}),c.columnrange&&(c.columnrange.prototype.dragDropProps={x:{axis:"x",move:!0},low:{optionName:"draggableLow",axis:"y",move:!0,resize:!0,resizeSide:"bottom",handlePositioner:function(r){var e=r.shapeArgs||r.graphic.getBBox();return{x:e.x||0,y:(e.y||0)+(e.height||0)}},handleFormatter:H.y.handleFormatter,propValidate:function(r,e){return r<=e.high}},high:{optionName:"draggableHigh",axis:"y",move:!0,resize:!0,resizeSide:"top",handlePositioner:function(r){var e=r.shapeArgs||r.graphic.getBBox();return{x:e.x||0,y:e.y||0}},handleFormatter:H.y.handleFormatter,propValidate:function(r,e){return r>=e.low}}}),c.boxplot&&(c.boxplot.prototype.dragDropProps={x:H.x,low:{optionName:"draggableLow",axis:"y",move:!0,resize:!0,resizeSide:"bottom",handlePositioner:function(r){return{x:r.shapeArgs.x||0,y:r.lowPlot}},handleFormatter:H.y.handleFormatter,propValidate:function(r,e){return r<=e.q1}},q1:{optionName:"draggableQ1",axis:"y",move:!0,resize:!0,resizeSide:"bottom",handlePositioner:function(r){return{x:r.shapeArgs.x||0,y:r.q1Plot}},handleFormatter:H.y.handleFormatter,propValidate:function(r,e){return r<=e.median&&r>=e.low}},median:{axis:"y",move:!0},q3:{optionName:"draggableQ3",axis:"y",move:!0,resize:!0,resizeSide:"top",handlePositioner:function(r){return{x:r.shapeArgs.x||0,y:r.q3Plot}},handleFormatter:H.y.handleFormatter,propValidate:function(r,e){return r<=e.high&&r>=e.median}},high:{optionName:"draggableHigh",axis:"y",move:!0,resize:!0,resizeSide:"top",handlePositioner:function(r){return{x:r.shapeArgs.x||0,y:r.highPlot}},handleFormatter:H.y.handleFormatter,propValidate:function(r,e){return r>=e.q3}}}),c.ohlc&&(c.ohlc.prototype.dragDropProps={x:H.x,low:{optionName:"draggableLow",axis:"y",move:!0,resize:!0,resizeSide:"bottom",handlePositioner:function(r){return{x:r.shapeArgs.x,y:r.plotLow}},handleFormatter:H.y.handleFormatter,propValidate:function(r,e){return r<=e.open&&r<=e.close}},high:{optionName:"draggableHigh",axis:"y",move:!0,resize:!0,resizeSide:"top",handlePositioner:function(r){return{x:r.shapeArgs.x,y:r.plotHigh}},handleFormatter:H.y.handleFormatter,propValidate:function(r,e){return r>=e.open&&r>=e.close}},open:{optionName:"draggableOpen",axis:"y",move:!0,resize:!0,resizeSide:function(r){return r.open>=r.close?"top":"bottom"},handlePositioner:function(r){return{x:r.shapeArgs.x,y:r.plotOpen}},handleFormatter:H.y.handleFormatter,propValidate:function(r,e){return r<=e.high&&r>=e.low}},close:{optionName:"draggableClose",axis:"y",move:!0,resize:!0,resizeSide:function(r){return r.open>=r.close?"bottom":"top"},handlePositioner:function(r){return{x:r.shapeArgs.x,y:r.plotClose}},handleFormatter:H.y.handleFormatter,propValidate:function(r,e){return r<=e.high&&r>=e.low}}}),c.arearange){var S=c.columnrange.prototype.dragDropProps,A=function(r){var e=r.graphic?r.graphic.getBBox().width/2+1:4;return[["M",0-e,0],["a",e,e,0,1,0,2*e,0],["a",e,e,0,1,0,-2*e,0]]};c.arearange.prototype.dragDropProps={x:S.x,low:{optionName:"draggableLow",axis:"y",move:!0,resize:!0,resizeSide:"bottom",handlePositioner:function(r){var e=r.lowerGraphic&&r.lowerGraphic.getBBox();return e?{x:e.x+e.width/2,y:e.y+e.height/2}:{x:-999,y:-999}},handleFormatter:A,propValidate:S.low.propValidate},high:{optionName:"draggableHigh",axis:"y",move:!0,resize:!0,resizeSide:"top",handlePositioner:function(r){var e=r.upperGraphic&&r.upperGraphic.getBBox();return e?{x:e.x+e.width/2,y:e.y+e.height/2}:{x:-999,y:-999}},handleFormatter:A,propValidate:S.high.propValidate}}}if(c.waterfall&&(c.waterfall.prototype.dragDropProps={x:H.x,y:v(H.y,{handleFormatter:function(r){return r.isSum||r.isIntermediateSum?null:H.y.handleFormatter(r)}})}),c.xrange){var B=function(r,e){var t=r.series,o=t.xAxis,n=t.yAxis,d=t.chart.inverted,l=o.toPixels(r[e],!0),h=n.toPixels(r.y,!0),c=t.columnMetrics?t.columnMetrics.offset:-r.shapeArgs.height/2;return d&&(l=o.len-l,h=n.len-h),h+=c,{x:Math.round(l),y:Math.round(h)}},N=c.xrange.prototype.dragDropProps={y:{axis:"y",move:!0},x:{optionName:"draggableX1",axis:"x",move:!0,resize:!0,resizeSide:"left",handlePositioner:function(r){return B(r,"x")},handleFormatter:w,propValidate:function(r,e){return r<=e.x2}},x2:{optionName:"draggableX2",axis:"x",move:!0,resize:!0,resizeSide:"right",handlePositioner:function(r){return B(r,"x2")},handleFormatter:w,propValidate:function(r,e){return r>=e.x}}};c.gantt&&(c.gantt.prototype.dragDropProps={y:N.y,start:v(N.x,{optionName:"draggableStart",validateIndividualDrag:function(r){return!r.milestone}}),end:v(N.x2,{optionName:"draggableEnd",validateIndividualDrag:function(r){return!r.milestone}})})}["gauge","pie","sunburst","wordcloud","sankey","histogram","pareto","vector","windbarb","treemap","bellcurve","sma","map","mapline"].forEach((function(r){c[r]&&(c[r].prototype.dragDropProps=null)}));var F={default:{className:"highcharts-drag-box-default",lineWidth:1,lineColor:"#888",color:"rgba(0, 0, 0, 0.1)",cursor:"move",zIndex:900}},M={className:"highcharts-drag-handle",color:"#fff",lineColor:"rgba(0, 0, 0, 0.6)",lineWidth:1,zIndex:901};function V(r){var i,e=["draggableX","draggableY"];for(y(r.dragDropProps,(function(r){r.optionName&&e.push(r.optionName)})),i=e.length;i--;)if(r.options.dragDrop[e[i]])return!0}function X(r,e){return void 0===r.chartX||void 0===r.chartY?e.pointer.normalize(r):r}function C(r,e,t,o){var n=e.map((function(e){return x(r,e,t,o)}));return function(){n.forEach((function(r){r()}))}}function Y(r,e,t){var o={chartX:r.chartX,chartY:r.chartY,guideBox:t&&{x:t.attr("x"),y:t.attr("y"),width:t.attr("width"),height:t.attr("height")},points:{}};return e.forEach((function(e){var t={};y(e.series.dragDropProps,(function(o,n){var d=e.series[o.axis+"Axis"];t[n]=e[n],t[n+"Offset"]=d.toPixels(e[n])-(d.horiz?r.chartX:r.chartY)})),t.point=e,o.points[e.id]=t})),o}function O(r,e){var t,o=function(r){var e=r.series,t=[],o=e.options.dragDrop.groupBy;return e.isSeriesBoosting?e.options.data.forEach((function(r,i){t.push((new e.pointClass).init(e,r)),t[t.length-1].index=i})):t=e.points,r.options[o]?t.filter((function(e){return e.options[o]===r.options[o]})):[r]}(e),n=e.series,d=n.chart;D(n.options.dragDrop&&n.options.dragDrop.liveRedraw,!0)||(d.dragGuideBox=t=n.getGuideBox(o),d.setGuideBoxState("default",n.options.dragDrop.guideBox).add(n.group)),d.dragDropData={origin:Y(r,o,t),point:e,groupedPoints:o,isDragging:!0}}function G(r,e){var t=r.dragDropData.newPoints,o=h(e);r.isDragDropAnimating=!0,y(t,(function(r){r.point.update(r.newValues,!1)})),r.redraw(o),setTimeout((function(){delete r.isDragDropAnimating,r.hoverPoint&&!r.dragHandles&&r.hoverPoint.showDragHandles()}),o.duration)}function E(r,e,t){var o,n,d=r.series,l=d.chart,h=l.dragDropData,c=d.dragDropProps[h.updateProp];n=h.newPoints[r.id].newValues,o="function"==typeof c.resizeSide?c.resizeSide(n,r):c.resizeSide,c.beforeResize&&c.beforeResize(l.dragGuideBox,n,r),function(rect,r,e){var t;switch(r){case"left":t={x:rect.attr("x")+e.x,width:Math.max(1,rect.attr("width")-e.x)};break;case"right":t={width:Math.max(1,rect.attr("width")+e.x)};break;case"top":t={y:rect.attr("y")+e.y,height:Math.max(1,rect.attr("height")-e.y)};break;case"bottom":t={height:Math.max(1,rect.attr("height")+e.y)}}rect.attr(t)}(l.dragGuideBox,"x"===c.axis&&d.xAxis.reversed||"y"===c.axis&&d.yAxis.reversed?P(o):o,{x:"x"===c.axis?e-(h.origin.prevdX||0):0,y:"y"===c.axis?t-(h.origin.prevdY||0):0})}function k(r){var e=r.series&&r.series.chart,t=e&&e.dragDropData;!e||!e.dragHandles||t&&(t.isDragging&&t.draggedPastSensitivity||t.isHoveringHandle===r.id)||e.hideDragHandles()}function j(r){var e=0;for(var p in r)Object.hasOwnProperty.call(r,p)&&e++;return e}function I(r){for(var p in r)if(Object.hasOwnProperty.call(r,p))return r[p]}function K(r,e){if(!e.zoomOrPanKeyPressed(r)){var t,o,n,d,l=e.dragDropData,h=0;l&&l.isDragging&&l.point.series&&(o=(t=l.point).series.options.dragDrop,r.preventDefault(),l.draggedPastSensitivity||(l.draggedPastSensitivity=function(r,e,t){var o=e.dragDropData.origin,n=o.chartX,d=o.chartY,l=r.chartX,h=r.chartY;return Math.sqrt((l-n)*(l-n)+(h-d)*(h-d))>t}(r,e,D(t.options.dragDrop&&t.options.dragDrop.dragSensitivity,o&&o.dragSensitivity,2))),l.draggedPastSensitivity&&(l.newPoints=function(r,e){var t=r.point,o=t.series,n=v(o.options.dragDrop,t.options.dragDrop),d={},l=r.updateProp,h={};return y(t.series.dragDropProps,(function(r,e){l&&(l!==e||!r.resize||r.optionName&&!1===n[r.optionName])||(l||r.move&&("x"===r.axis&&n.draggableX||"y"===r.axis&&n.draggableY))&&(d[e]=r)})),(l?[t]:r.groupedPoints).forEach((function(p){h[p.id]={point:p,newValues:p.getDropValues(r.origin,e,d)}})),h}(l,r),d=1===(h=j(n=l.newPoints))?I(n):null,t.firePointEvent("drag",{origin:l.origin,newPoints:l.newPoints,newPoint:d&&d.newValues,newPointId:d&&d.point.id,numNewPoints:h,chartX:r.chartX,chartY:r.chartY},(function(){!function(r,e){var t=e.series,o=t.chart,data=o.dragDropData,n=v(t.options.dragDrop,e.options.dragDrop),d=n.draggableX,l=n.draggableY,h=data.origin,c=r.chartX-h.chartX,x=r.chartY-h.chartY,f=c,m=data.updateProp;o.inverted&&(c=-x,x=-f),D(n.liveRedraw,!0)?(G(o,!1),e.showDragHandles()):m?E(e,c,x):o.dragGuideBox.translate(d?c:0,l?x:0),h.prevdX=c,h.prevdY=x}(r,t)}))))}}function L(r,e){var t=e.dragDropData;if(t&&t.isDragging&&t.draggedPastSensitivity&&t.point.series){var o=t.point,n=t.newPoints,d=j(n),l=1===d?I(n):null;e.dragHandles&&e.hideDragHandles(),r.preventDefault(),e.cancelClick=!0,o.firePointEvent("drop",{origin:t.origin,chartX:r.chartX,chartY:r.chartY,newPoints:n,numNewPoints:d,newPoint:l&&l.newValues,newPointId:l&&l.point.id},(function(){G(e)}))}delete e.dragDropData,e.dragGuideBox&&(e.dragGuideBox.destroy(),delete e.dragGuideBox)}function U(r,e){var t,o,n,d,l,h,c,x=e.hoverPoint,f=v(x&&x.series.options.dragDrop,x&&x.options.dragDrop),m=f.draggableX||!1,D=f.draggableY||!1;e.cancelClick=!1,!m&&!D||e.zoomOrPanKeyPressed(r)||e.hasDraggedAnnotation||(e.dragDropData&&e.dragDropData.isDragging?L(r,e):x&&(d=(t=x).series,l=d.options.dragDrop||{},h=t.options&&t.options.dragDrop,c=d.dragDropProps,y(c,(function(p){"x"===p.axis&&p.move?o=!0:"y"===p.axis&&p.move&&(n=!0)})),(l.draggableX&&o||l.draggableY&&n)&&(!h||!1!==h.draggableX||!1!==h.draggableY)&&d.yAxis&&d.xAxis)&&(e.mouseIsDown=!1,O(r,x),x.firePointEvent("dragStart",r)))}function R(r){var e=r.container,o=t.doc;(function(r){var i=r.series?r.series.length:0;if(r.hasCartesianSeries&&!r.polar)for(;i--;)if(r.series[i].options.dragDrop&&V(r.series[i]))return!0})(r)&&(C(e,["mousedown","touchstart"],(function(e){U(X(e,r),r)})),C(e,["mousemove","touchmove"],(function(e){K(X(e,r),r)}),{passive:!1}),x(e,"mouseleave",(function(e){L(X(e,r),r)})),r.unbindDragDropMouseUp=C(o,["mouseup","touchend"],(function(e){L(X(e,r),r)}),{passive:!1}),r.hasAddedDragDropEvents=!0,x(r,"destroy",(function(){r.unbindDragDropMouseUp&&r.unbindDragDropMouseUp()})))}e.prototype.setGuideBoxState=function(r,e){var t=this.dragGuideBox,o=v(F,e),n=v(o.default,o[r]);return t.attr({className:n.className,stroke:n.lineColor,strokeWidth:n.lineWidth,fill:n.color,cursor:n.cursor,zIndex:n.zIndex}).css({pointerEvents:"none"})},o.prototype.getDropValues=function(r,e,t){var o,n=this,d=n.series,l=v(d.options.dragDrop,n.options.dragDrop),h={},c=r.points[n.id];for(var x in t)if(Object.hasOwnProperty.call(t,x)){if(void 0!==o){o=!1;break}o=!0}return y(t,(function(r,t){var x=c[t],m=d[r.axis+"Axis"],v=function(r,e){var t=d[e.toLowerCase()+"Axis"].categories?1:0,o=D(l["dragPrecision"+e],t),n=D(l["dragMin"+e],-1/0),h=D(l["dragMax"+e],1/0),c=r;return o&&(c=Math.round(c/o)*o),f(c,n,h)}(m.toValue((m.horiz?e.chartX:e.chartY)+c[t+"Offset"]),r.axis.toUpperCase());o&&r.propValidate&&!r.propValidate(v,n)||void 0===x||(h[t]=v)})),h},n.prototype.getGuideBox=function(r){var e,t=this.chart,o=1/0,n=-1/0,d=1/0,l=-1/0;return r.forEach((function(r){var t=r.graphic&&r.graphic.getBBox()||r.shapeArgs;if(t){var h=void 0,c=r.x2;m(c)&&(h=r.series.xAxis.translate(c,!1,!1,!1,!0));var x=!(t.width||t.height||t.x||t.y);e=!0,o=Math.min(r.plotX||0,h||0,x?1/0:t.x||0,o),n=Math.max(r.plotX||0,h||0,(t.x||0)+(t.width||0),n),d=Math.min(r.plotY||0,x?1/0:t.y||0,d),l=Math.max((t.y||0)+(t.height||0),l)}})),e?t.renderer.rect(o,d,n-o,l-d):t.renderer.g()},o.prototype.showDragHandles=function(){var r=this,e=r.series,t=e.chart,o=t.renderer,n=v(e.options.dragDrop,r.options.dragDrop);y(e.dragDropProps,(function(d,l){var h,c,path,f=v(M,d.handleOptions,n.dragHandle),m={class:f.className,"stroke-width":f.lineWidth,fill:f.color,stroke:f.lineColor},y=f.pathFormatter||d.handleFormatter,D=d.handlePositioner,P=!d.validateIndividualDrag||d.validateIndividualDrag(r);if(d.resize&&P&&d.resizeSide&&y&&(n["draggable"+d.axis.toUpperCase()]||n[d.optionName])&&!1!==n[d.optionName]){if(t.dragHandles||(t.dragHandles={group:o.g("drag-drop-handles").add(e.markerGroup||e.group)}),t.dragHandles.point=r.id,h=D(r),m.d=path=y(r),!path||h.x<0||h.y<0)return;m.cursor=f.cursor||"x"===d.axis!=!!t.inverted?"ew-resize":"ns-resize",(c=t.dragHandles[d.optionName])||(c=t.dragHandles[d.optionName]=o.path().add(t.dragHandles.group)),c.translate(h.x,h.y).attr(m),C(c.element,["touchstart","mousedown"],(function(e){!function(r,e,t){var o=e.series.chart;o.zoomOrPanKeyPressed(r)||(o.mouseIsDown=!1,O(r,e),o.dragDropData.updateProp=r.updateProp=t,e.firePointEvent("dragStart",r),r.stopPropagation(),r.preventDefault())}(X(e,t),r,l)}),{passive:!1}),x(t.dragHandles.group.element,"mouseover",(function(){t.dragDropData=t.dragDropData||{},t.dragDropData.isHoveringHandle=r.id})),C(t.dragHandles.group.element,["touchend","mouseout"],(function(){!function(r){var e=r.series.chart;e.dragDropData&&r.id===e.dragDropData.isHoveringHandle&&delete e.dragDropData.isHoveringHandle,e.hoverPoint||k(r)}(r)}))}}))},e.prototype.hideDragHandles=function(){var r=this;r.dragHandles&&(y(r.dragHandles,(function(r,e){"group"!==e&&r.destroy&&r.destroy()})),r.dragHandles.group&&r.dragHandles.group.destroy&&r.dragHandles.group.destroy(),delete r.dragHandles)},x(o,"mouseOver",(function(){var r=this;setTimeout((function(){!function(r){var e=r.series,t=e&&e.chart,o=t&&t.dragDropData,n=t&&t.is3d&&t.is3d();!t||o&&o.isDragging&&o.draggedPastSensitivity||t.isDragDropAnimating||!e.options.dragDrop||n||(t.dragHandles&&t.hideDragHandles(),r.showDragHandles())}(r)}),12)})),x(o,"mouseOut",(function(){var r=this;setTimeout((function(){r.series&&k(r)}),10)})),x(o,"remove",(function(){var r=this.series.chart,e=r.dragHandles;e&&e.point===this.id&&r.hideDragHandles()})),e.prototype.zoomOrPanKeyPressed=function(r){var e=this.userOptions.chart||{},t=e.panKey&&e.panKey+"Key";return r[e.zoomKey&&e.zoomKey+"Key"]||r[t]},x(e,"render",(function(){this.hasAddedDragDropEvents||R(this)}))})),t(e,"masters/modules/draggable-points.src.js",[],(function(){}))},r.exports?(d.default=d,r.exports=d):(o=[t(131)],void 0===(n=function(r){return d(r),d.Highcharts=r,d}.apply(e,o))||(r.exports=n))}}]);